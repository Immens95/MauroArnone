<!--
  IT: Demo tecnica di competenze â€” codice commentato bilingue (IT/EN), con un pizzico di umorismo.
      Obiettivo: mostrare bestâ€‘practice su accessibilitÃ , animazioni, filtri dinamici e UX.
  EN: Technical skills demo â€” bilingual (IT/EN) commented code, with a sprinkle of fun.
      Goal: showcase bestâ€‘practices on accessibility, animations, dynamic filters, and UX.
  Note: i commenti restano leggeri e utili; niente romanzi, promesso ðŸ“šâœ¨
-->
<!DOCTYPE html>
<html lang="it" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mauro Arnone | CV Interattivo</title>
  <meta name="description" content="Curriculum interattivo di Mauro Arnone. Competenze: WordPress, PHP, JavaScript, CSS avanzato, Tailwind, HTML e Database (MySQL).">
  <link rel="canonical" href="https://immens95.github.io/MauroArnone/">
  <link rel="icon" href="https://avatars.githubusercontent.com/u/129175879?v=4">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Mauro Arnone | CV Interattivo">
  <meta property="og:description" content="Competenze dimostrate: WordPress, PHP, JavaScript, CSS avanzato, Tailwind, HTML e Database.">
  <meta property="og:url" content="https://immens95.github.io/MauroArnone/">
  <meta property="og:image" content="https://avatars.githubusercontent.com/u/129175879?v=4">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Mauro Arnone | CV Interattivo">
  <meta name="twitter:description" content="Portfolio e CV con focus su WordPress, PHP, JS, CSS, Tailwind, HTML e Database.">
  <meta name="twitter:image" content="https://avatars.githubusercontent.com/u/129175879?v=4">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            brand: '#1065ff',
            brandDark: '#0b4ecc',
            accent: '#10b981',
          },
          keyframes: {
            revealUp: {
              '0%': { opacity: '0', transform: 'translateY(12px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' },
            },
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-4px)' },
            },
          },
          animation: {
            'reveal-up': 'revealUp 0.6s ease-out both',
            float: 'float 6s ease-in-out infinite',
            'pulse-subtle': 'pulse 3s ease-in-out infinite',
          },
        },
      },
    };
  </script>
  <!-- Stile scrollbar nativa e progress bar in linea con la palette -->
  <style id="custom-scrollbar-style">
    /* Firefox */
    html { scrollbar-color: #1065ff #e5e7eb; scrollbar-width: thin; }
    /* WebKit */
    ::-webkit-scrollbar { width: 10px; height: 10px; }
    ::-webkit-scrollbar-track { background: #e5e7eb; }
    ::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #1065ff, #10b981, #7c3aed);
      border-radius: 9999px;
      border: 2px solid #e5e7eb;
    }
    ::-webkit-scrollbar-thumb:hover { filter: brightness(1.05); }
    /* Progress bar rifinitura */
    #scroll-progress { border-radius: 9999px; box-shadow: 0 0 8px rgba(16, 101, 255, 0.35); }
  </style>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Mauro Arnone",
    "email": "mailto:mauro.arnone.ma@gmail.com",
    "jobTitle": "Web Developer",
    "url": "https://immens95.github.io/MauroArnone/",
    "sameAs": [
      "https://github.com/Immens95",
      "https://www.linkedin.com/in/mauro-arnone/"
    ]
  }
  </script>
  <!-- Stili ModalitÃ  CV (schermo e stampa) -->
  <style id="cv-style">
    /* Dimensioni e layout A4 per la stampa */
    @page { size: A4; margin: 12mm; }
    /* Nasconde gli elementi non CV in modalitÃ  stampa */
    @media print {
      /* Mantiene visibile solo main e al suo interno il foglio CV */
      html.cv-mode body > :not(main) { display: none !important; }
      html.cv-mode main > :not(#cv-sheet) { display: none !important; }
      #cv-sheet { box-shadow: none !important; background: #ffffff !important; }
      /* Esclude controlli e istruzioni dal PDF di stampa */
      #cv-controls { display: none !important; }
    }
    /* ModalitÃ  CV su schermo: mostra navbar e SOLO il foglio CV dentro main */
    html.cv-mode body > :not(#site-nav):not(main) { display: none !important; }
    html.cv-mode main > :not(#cv-sheet) { display: none !important; }
    html.cv-mode #cv-sheet { display: block !important; }
    /* Nasconde le istruzioni in modalitÃ  CV */
    html.cv-mode #cv-controls details { display: none !important; }

    /* Disabilita transizioni/animazioni per massime performance in modalitÃ  CV */
    html.cv-mode *, html.cv-mode ::before, html.cv-mode ::after {
      animation: none !important;
      transition: none !important;
      scroll-behavior: auto !important;
    }

    /* ModalitÃ  PDF (usata da html2pdf) per ottenere fullâ€‘bleed e nascondere controlli */
    html.pdf-mode #cv-controls { display: none !important; }
    /* In PDF mode, mostra solo la navbar e il clone del CV fuori da main */
    html.pdf-mode body > :not(#site-nav):not(#cv-sheet-pdf) { display: none !important; }
    html.pdf-mode #cv-sheet-pdf {
      width: 100vw !important;
      min-height: 100vh !important;
      box-shadow: none !important;
      border-radius: 0 !important;
      background: #ffffff !important;
      color: #111111 !important;
      display: block !important;
    }
    html.pdf-mode #cv-sheet {
      width: 100vw !important;
      min-height: 100vh !important;
      box-shadow: none !important;
      border-radius: 0 !important;
      background: #ffffff !important;
      color: #111111 !important;
    }
    /* Nascondi HUD gamification in modalitÃ  CV */
    html.cv-mode #gamify-hud { display: none !important; }
  </style>
  <!-- Fallback di cattura DOM in caso di problemi con html2canvas -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image-more/2.14.1/dom-to-image-more.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body class="bg-gray-100 text-gray-900 font-sans dark:bg-gray-900 dark:text-gray-100">

  <a href="#contenuto" class="sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 bg-white text-blue-600 px-3 py-2 rounded shadow" data-i18n="skip_to_content">Salta al contenuto</a>
  <!-- Reactive particles background -->
  <canvas id="bg-particles" class="fixed inset-0 -z-10 pointer-events-none"></canvas>

  <!-- Header -->
  <!-- Navbar -->
<nav id="site-nav" class="fixed top-0 inset-x-0 z-50 bg-white/70 backdrop-blur shadow-sm dark:bg-gray-900/70" aria-label="Navigazione principale" data-i18n-aria="aria_main_nav">
    <!-- Scroll progress bar -->
    <div id="scroll-progress" class="absolute left-0 bottom-0 h-1 bg-gradient-to-r from-blue-600 via-teal-500 to-purple-600 w-0 pointer-events-none"></div>
    <div class="max-w-[92%] sm:max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="#home" class="flex items-center gap-2">
        <img src="https://avatars.githubusercontent.com/u/129175879?v=4" alt="Logo" class="w-8 h-8 rounded-full" data-i18n-alt="alt_logo">
        <span class="font-semibold">Mauro Arnone</span>
      </a>
      <button id="menu-btn" type="button" class="md:hidden px-3 py-2 rounded bg-brand text-white hover:bg-brandDark transition" data-i18n="menu_button_text" aria-controls="menu-mobile" aria-expanded="false">Menu</button>
      <ul id="menu" class="hidden md:flex items-center gap-4 text-sm">
        <li>
          <div id="gamify-hud" class="hidden md:flex items-center gap-1 px-2 py-1 rounded border text-xs bg-white/70 text-gray-800 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700">
            <span class="font-semibold" data-i18n="hud_xp_label">XP</span>
            <span id="xp-count">0</span>
            <span id="xp-progress" class="ml-1 text-gray-500 dark:text-gray-300"></span>
            <div id="xp-bar" class="ml-2 w-20 h-1 rounded bg-gray-200 dark:bg-gray-700 overflow-hidden">
              <div id="xp-bar-fill" class="h-1 bg-brand w-0 transition-all duration-300"></div>
            </div>
            <span class="mx-1">|</span>
            <span class="font-semibold" data-i18n="hud_badge_label">Badge</span>
            <span id="badge-count">0</span>
          </div>
        </li>
        <li>
          <div class="lang-switch hidden md:flex items-center gap-1 px-2 py-1 rounded border text-xs bg-white/70 text-gray-800 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700">
            <span class="sr-only" data-i18n="lang_label">Lingua</span>
            <button class="lang-btn px-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700" type="button" data-lang="it" data-i18n-aria="aria_lang_it" aria-label="Italiano">IT</button>
            <span class="mx-1">|</span>
            <button class="lang-btn px-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700" type="button" data-lang="en" data-i18n-aria="aria_lang_en" aria-label="English">EN</button>
          </div>
        </li>
        <li>
          <button class="theme-toggle px-3 py-2 rounded border text-sm bg-white hover:bg-gray-100 transition dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 dark:hover:bg-gray-700 flex items-center gap-2" type="button" aria-label="Cambia tema" aria-pressed="false" data-i18n-aria="aria_theme_toggle">
            <svg class="moon-icon w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
            <svg class="sun-icon w-4 h-4 hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="5"/><path d="M12 1v3M12 20v3M4.22 4.22l2.12 2.12M17.66 17.66l2.12 2.12M1 12h3M20 12h3M4.22 19.78l2.12-2.12M17.66 6.34l2.12-2.12"/></svg>
            <span class="hidden sm:inline theme-text" data-i18n="theme_button_text">Tema</span>
          </button>
        </li>
        
        <li>
          <button id="cv-mode-btn" type="button" class="px-3 py-2 rounded border text-sm bg-white hover:bg-gray-100 transition dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 dark:hover:bg-gray-700" data-i18n-aria="aria_cv_toggle" aria-label="Attiva modalitÃ  CV">
            <span data-i18n="cv_button_text">ModalitÃ  CV (PDF)</span>
          </button>
        </li>
      </ul>
    </div>
    <!-- Mobile dropdown -->
    <div id="menu-mobile" class="md:hidden hidden border-t bg-white dark:bg-gray-900 w-full max-h-[70vh] overflow-y-auto" role="menu" aria-labelledby="menu-btn" aria-hidden="true">
      <ul class="w-full max-w-full px-4 py-3 grid grid-cols-1 gap-2 text-sm">
        <li class="col-span-1 w-full">
          <button class="theme-toggle w-full px-3 py-2 rounded border text-sm bg-white hover:bg-gray-100 transition dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 dark:hover:bg-gray-700 flex items-center justify-center gap-2" aria-label="Cambia tema" aria-pressed="false" data-i18n-aria="aria_theme_toggle">
            <svg class="moon-icon w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
            <svg class="sun-icon w-4 h-4 hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="5"/><path d="M12 1v3M12 20v3M4.22 4.22l2.12 2.12M17.66 17.66l2.12 2.12M1 12h3M20 12h3M4.22 19.78l2.12-2.12M17.66 6.34l2.12-2.12"/></svg>
            <span class="theme-text" data-i18n="theme_button_text">Tema</span>
          </button>
        </li>
        <li class="col-span-1 w-full">
          <div class="lang-switch-mobile w-full flex flex-wrap items-center justify-center gap-1 px-2 py-1 rounded border text-xs bg-white/70 text-gray-800 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700">
            <span class="sr-only" data-i18n="lang_label">Lingua</span>
            <button class="lang-btn px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700" data-lang="it" data-i18n-aria="aria_lang_it" aria-label="Italiano">IT</button>
            <span class="mx-1">|</span>
            <button class="lang-btn px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700" data-lang="en" data-i18n-aria="aria_lang_en" aria-label="English">EN</button>
          </div>
        </li>
        <li class="col-span-1 w-full">
          <div id="gamify-hud-mobile" class="w-full flex items-center justify-center gap-2 px-2 py-2 rounded border text-xs bg-white/70 text-gray-800 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700">
            <span class="font-semibold" data-i18n="hud_xp_label">XP</span>
            <span id="xp-count-mobile">0</span>
            <div id="xp-bar-mobile" class="ml-2 w-32 h-2 rounded bg-gray-200 dark:bg-gray-700 overflow-hidden">
              <div id="xp-bar-fill-mobile" class="h-2 bg-brand w-0 transition-all duration-300"></div>
            </div>
            <span class="mx-2">|</span>
            <span class="font-semibold" data-i18n="hud_badge_label">Badge</span>
            <span id="badge-count-mobile">0</span>
          </div>
          <button id="cv-mode-btn-mobile" type="button" class="w-full mt-2 px-3 py-2 rounded border text-sm bg-white hover:bg-gray-100 transition dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 dark:hover:bg-gray-700" data-i18n-aria="aria_cv_toggle" aria-label="Attiva modalitÃ  CV">
            <span data-i18n="cv_button_text">ModalitÃ  CV (PDF)</span>
          </button>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Hero -->
  <header id="home" class="relative bg-gradient-to-br from-blue-600 via-teal-500 to-purple-600 text-white pt-28 pb-16 shadow-lg overflow-hidden" aria-label="Intestazione" data-i18n-aria="aria_header_landmark">
    <!-- Geometric shapes replacing blobs -->
    <svg id="hero-shapes" class="absolute inset-0 pointer-events-none" viewBox="0 0 800 400" preserveAspectRatio="none">
      <!-- Square -->
      <rect class="hero-shape will-change-transform" x="60" y="40" width="120" height="120" fill="none" stroke="rgba(255,255,255,0.25)" stroke-width="3" data-depth="1.2" />
      <!-- Triangle -->
      <polygon class="hero-shape will-change-transform" points="680,60 740,160 620,160" fill="none" stroke="rgba(255,255,255,0.20)" stroke-width="3" data-depth="1.4" />
      <!-- Circle -->
      <circle class="hero-shape will-change-transform" cx="300" cy="110" r="48" fill="none" stroke="rgba(255,255,255,0.18)" stroke-width="3" data-depth="1.6" />
      <!-- Hexagon -->
      <polygon class="hero-shape will-change-transform" points="200,300 240,280 240,240 200,220 160,240 160,280" fill="none" stroke="rgba(0,0,0,0.20)" stroke-width="3" data-depth="1.3" />
    </svg>
    <div id="hero-interactive-layer" class="absolute inset-0 pointer-events-none">
      <!-- Sparkles at different depths -->
      <span class="absolute left-12 top-10 w-2 h-2 rounded-full bg-white/80 shadow will-change-transform" data-depth="4"></span>
      <span class="absolute right-20 top-24 w-2 h-2 rounded-full bg-white/70 shadow will-change-transform" data-depth="5"></span>
      <span class="absolute left-1/2 bottom-12 w-2 h-2 rounded-full bg-white/60 shadow will-change-transform" data-depth="6"></span>
    </div>
    <!-- IT: Layer canvas per la mesh 3D nel header; EN: Canvas layer for the 3D mesh in header -->
    <div id="hero-3d-layer" class="absolute inset-0 pointer-events-none" aria-hidden="true" style="opacity:0;"></div>
    <div id="hero-card" class="max-w-5xl mx-auto px-6 text-center will-change-transform">
<img id="hero-photo" src="https://avatars.githubusercontent.com/u/129175879?v=4" alt="Foto profilo di Mauro Arnone" class="mx-auto rounded-full w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 border-4 border-white shadow-md animate-float will-change-transform select-none" decoding="async" data-i18n-alt="alt_profile_photo" data-depth="3">
      <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold mt-4" data-depth="2">Mauro Arnone</h1>
      <p class="text-base sm:text-lg mt-2 opacity-90" data-i18n="hero_tagline" data-depth="1.5">Web Developer â€¢ WordPress â€¢ PHP â€¢ JavaScript</p>
<div class="mt-6 flex flex-wrap items-center justify-center gap-2" data-depth="1.2">
<a href="mailto:mauro.arnone.ma@gmail.com" target="_blank" rel="noopener noreferrer" class="px-4 py-2 bg-white text-brand rounded-lg shadow hover:bg-gray-200 transition select-none" data-i18n="cta_contact">Contattami</a>
<a href="https://www.linkedin.com/in/mauro-arnone/" target="_blank" rel="noopener noreferrer" class="px-4 py-2 bg-white text-brand rounded-lg shadow hover:bg-gray-200 transition select-none" data-i18n="cta_linkedin">LinkedIn</a>
<a href="https://github.com/Immens95" target="_blank" rel="noopener noreferrer" class="px-4 py-2 bg-white text-brand rounded-lg shadow hover:bg-gray-200 transition select-none" data-i18n="cta_github">GitHub</a>
      </div>
      <p class="text-sm sm:text-base mt-3" data-depth="1.1">mauro.arnone.ma@gmail.com</p>
    </div>
  </header>

<main id="contenuto" class="pt-6" aria-label="Contenuto principale" data-i18n-aria="aria_main_landmark">
  <!-- Navigazione contestuale della pagina -->
  <nav id="page-nav" class="max-w-5xl mx-auto px-6 mb-4 flex flex-col items-center gap-3" aria-label="Navigazione di pagina" data-i18n-aria="aria_page_nav">
    <div class="cat-switch flex flex-wrap items-center justify-center gap-1 sm:gap-2 px-2 py-1 rounded border text-xs bg-white/70 text-gray-800 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 w-full max-w-full">
      <button class="cat-btn px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700" type="button" data-cat="all" aria-pressed="false"><span data-i18n="cat_all">Tutto</span></button>
      <span class="mx-1 hidden sm:inline">|</span>
      <button class="cat-btn px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700" type="button" data-cat="lf" aria-pressed="false"><span data-i18n="cat_lang_frameworks">Linguaggi + Frameworks</span></button>
      <span class="mx-1 hidden sm:inline">|</span>
      <button class="cat-btn px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700" type="button" data-cat="backend" aria-pressed="false"><span data-i18n="cat_backend">Backend</span></button>
      <span class="mx-1 hidden sm:inline">|</span>
      <button class="cat-btn px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700" type="button" data-cat="frontend" aria-pressed="false"><span data-i18n="cat_frontend">Frontend</span></button>
      <span class="mx-1 hidden sm:inline">|</span>
      <button class="cat-btn px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700" type="button" data-cat="cms" aria-pressed="false"><span data-i18n="cat_cms">CMS</span></button>
      <span class="mx-1 hidden sm:inline">|</span>
      <button class="cat-btn px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700" type="button" data-cat="database" aria-pressed="false"><span data-i18n="cat_database">Database</span></button>
      <span class="mx-1 hidden sm:inline">|</span>
      <button class="cat-btn px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700" type="button" data-cat="3d" aria-pressed="false"><span data-i18n="cat_3d">3D</span></button>
    </div>
    <!-- Pulsante ModalitÃ  CV spostato nel menu header -->
    <div id="page-subnav" class="flex flex-wrap items-center justify-center gap-2 text-sm"></div>
  </nav>
  <section id="chi-sono" class="max-w-5xl mx-auto py-10 px-6 bg-white/70 backdrop-blur rounded-2xl shadow opacity-0 translate-y-6 transition-all duration-700 dark:bg-gray-800/70 dark:text-gray-100" data-reveal>
    <h2 class="text-2xl font-bold mb-4 transition-colors hover:text-brand hover:underline decoration-2 underline-offset-4" data-i18n="about_title">Chi sono</h2>
    <p class="text-lg leading-relaxed" data-i18n="about_intro">
      Sono uno sviluppatore web con esperienza in WordPress, PHP e JavaScript.
      Unisco competenza tecnica e visione strategica per trasformare idee in strumenti concreti, scalabili e orientati ai risultati. 
      Questo progetto, realizzato con HTML, Tailwind e GitHub Pages, presenta competenze, esperienze e progetti in modo semplice, moderno e dâ€™impatto, 
      offrendo una panoramica chiara, elegante e immediata del mio percorso professionale e delle mie capacitÃ .
    </p>
  </section>

  <!-- Foglio CV (nascosto finchÃ© non attivo) -->
  <section id="cv-sheet" class="hidden max-w-[900px] mx-auto my-8 bg-white shadow-2xl rounded-xl p-8 dark:bg-gray-900 dark:text-gray-100 print:shadow-none">
    <!-- Header CV -->
    <div class="flex items-start justify-between gap-4 border-b pb-4">
      <div class="flex items-center gap-4">
        <img src="https://avatars.githubusercontent.com/u/129175879?v=4" class="w-20 h-20 rounded-full object-cover border-2 border-gray-200 dark:border-gray-700" decoding="async" data-i18n-alt="cv_profile_photo_alt" alt="Foto profilo">
        <div>
          <h1 class="text-3xl font-bold">Mauro Arnone</h1>
          <p class="text-base text-gray-600 dark:text-gray-300" data-i18n="cv_role">Web Developer â€” WordPress, PHP, JavaScript</p>
        </div>
      </div>
      <div id="cv-controls" class="flex flex-col items-end gap-2 print:hidden pdf-exclude">
        <div class="flex gap-2">
<button id="cv-print-btn" type="button" class="px-3 py-2 rounded border text-sm bg-white hover:bg-gray-100 transition dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 dark:hover:bg-gray-700"><span data-i18n="cv_print_btn">Stampa</span></button>
<button id="cv-download-btn" type="button" class="px-3 py-2 rounded border text-sm bg-white hover:bg-gray-100 transition ml-2 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 dark:hover:bg-gray-700"><span data-i18n="cv_download_btn">Scarica PDF</span></button>
          <button id="cv-exit-btn" type="button" class="px-3 py-2 rounded border text-sm bg-white hover:bg-gray-100 transition dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 dark:hover:bg-gray-700"><span data-i18n="cv_exit_btn">Esci</span></button>
        </div>
        <details class="text-xs text-gray-600 dark:text-gray-300 max-w-[480px]">
          <summary class="cursor-pointer hover:underline" data-i18n="cv_print_help_title">Istruzioni per qualitÃ  e margini</summary>
          <ul class="mt-2 list-disc list-inside space-y-1">
            <li data-i18n="cv_print_help_step1">Seleziona "Salva come PDF"</li>
            <li data-i18n="cv_print_help_step2">Formato: A4, orientamento verticale</li>
            <li data-i18n="cv_print_help_step3">Margini: Nessuno o Personalizzati (10â€“15 mm)</li>
            <li data-i18n="cv_print_help_step4">Scala: 100% (non adattare alla pagina)</li>
            <li data-i18n="cv_print_help_step5">Abilita grafica di sfondo</li>
            <li data-i18n="cv_print_help_step6">Disattiva intestazioni/piÃ¨ di pagina</li>
          </ul>
        </details>
      </div>
    </div>

    <!-- Layout a due colonne -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
      <!-- Colonna sinistra: Contatti + Lingue -->
      <aside class="md:col-span-1 space-y-6">
        <div>
          <h2 class="text-lg font-semibold mb-2" data-i18n="cv_contacts_title">Contatti</h2>
          <ul class="text-sm space-y-1">
            <li><span data-i18n="cv_email_label">Email</span>: <a href="mailto:mauro.arnone.ma@gmail.com" class="text-brand">mauro.arnone.ma@gmail.com</a></li>
            <li><span data-i18n="cv_github_label">GitHub</span>: <a href="https://github.com/Immens95" class="text-brand" target="_blank" rel="noopener noreferrer">github.com/Immens95</a></li>
            <li><span data-i18n="cv_linkedin_label">LinkedIn</span>: <a href="https://www.linkedin.com/in/mauro-arnone/" class="text-brand" target="_blank" rel="noopener noreferrer">mauro-arnone</a></li>
          </ul>
        </div>
        <div>
          <h2 class="text-lg font-semibold mb-2" data-i18n="cv_languages_title">Lingue</h2>
          <ul class="text-sm space-y-1">
            <li data-i18n="cv_lang_it">Italiano â€” Madrelingua</li>
            <li data-i18n="cv_lang_en">Inglese â€” B2</li>
          </ul>
        </div>
        <div>
          <h2 class="text-lg font-semibold mb-2" data-i18n="cv_soft_title">Soft Skills</h2>
          <ul class="text-sm space-y-1">
            <li data-i18n="cv_soft_item1">Problem Solving Creativo</li>
            <li data-i18n="cv_soft_item2">Collaborazione</li>
            <li data-i18n="cv_soft_item3">Apprendimento Rapido</li>
          </ul>
        </div>
      </aside>

      <!-- Colonna destra: contenuto principale -->
      <div class="md:col-span-2 space-y-6">
        <section>
          <h2 class="text-lg font-semibold mb-2" data-i18n="cv_intro_title">Chi sono</h2>
          <p class="text-sm leading-relaxed" data-i18n="cv_intro_text">
            Sviluppatore web con focus su WordPress, PHP e JavaScript.
            Unisco competenze tecniche e cura dellâ€™esperienza utente per realizzare soluzioni scalabili e orientate ai risultati.
          </p>
        </section>

        <section>
          <h2 class="text-lg font-semibold mb-2" data-i18n="cv_skills_title">Competenze Tecniche</h2>
          <ul class="text-sm grid grid-cols-2 gap-y-1 gap-x-4">
            <li><span data-i18n="cv_skill_php">PHP</span></li>
            <li><span data-i18n="cv_skill_js">JavaScript</span></li>
            <li><span data-i18n="cv_skill_html5">HTML5</span></li>
            <li><span data-i18n="cv_skill_css_tailwind">CSS3/Tailwind</span></li>
            <li><span data-i18n="cv_skill_wp_woo">WordPress/WooCommerce</span></li>
            <li><span data-i18n="cv_skill_jquery">jQuery</span></li>
            <li><span data-i18n="cv_skill_rest_api">REST API</span></li>
            <li><span data-i18n="cv_skill_mysql">MySQL</span></li>
            <li><span data-i18n="cv_skill_git_github">Git/GitHub</span></li>
            <li><span data-i18n="cv_skill_docker">Docker</span></li>
            <li><span data-i18n="cv_skill_ci_cd">CI/CD</span></li>
            <li><span data-i18n="cv_skill_web_perf">Performance Web</span></li>
          </ul>
        </section>

        <section>
          <h2 class="text-lg font-semibold mb-2" data-i18n="cv_projects_title">Progetti Rilevanti</h2>
          <ul class="text-sm space-y-1">
            <li><span data-i18n="cv_project_item1">Plugin CSS classes per WordPress â€” Studio immers</span></li>
            <li><span data-i18n="cv_project_item2">Plugin "Flash Order" per WooCommerce</span></li>
            <li><span data-i18n="cv_project_item3">Portfolio & Curriculum su GitHub Pages</span></li>
          </ul>
        </section>

        <section>
          <h2 class="text-lg font-semibold mb-2" data-i18n="cv_experiences_title">Esperienze</h2>
          <ul class="text-sm space-y-1">
            <li data-i18n="cv_exp_item1">Sviluppatore Web Freelance â€” 2023â€“2025</li>
            <li data-i18n="cv_exp_item2">Supporto WordPress/WooCommerce â€” 2022â€“2024</li>
          </ul>
        </section>

        <section>
          <h2 class="text-lg font-semibold mb-2" data-i18n="cv_education_title">Formazione</h2>
          <ul class="text-sm space-y-1">
            <li><span data-i18n="cv_ed_item1">Diploma tecnico â€” Istituto Buccari Marconi</span></li>
            <li><span data-i18n="cv_ed_item2">Corso Formazione Cisco CCNA â€” basi di Networking (Routing & Switching)</span></li>
            <li><span data-i18n="cv_ed_item3">Corsi intensivi: C++, OOP, Python, PHP, JavaScript, jQuery, WordPress (Udemy/YouTube)</span></li>
            <li><span data-i18n="cv_ed_item4">Autoâ€‘formazione continua: bestâ€‘practice web, sicurezza, performance, UX</span></li>
          </ul>
        </section>

        <section>
          <h2 class="text-lg font-semibold mb-2" data-i18n="cv_other_skills_title">Altre Competenze</h2>
          <ul class="text-sm grid grid-cols-2 gap-y-1 gap-x-4">
            <li><span data-i18n="cv_other_grafica_2d_3d">Grafica 2D/3D</span></li>
            <li><span data-i18n="cv_other_blender">Blender</span></li>
            <li><span data-i18n="cv_other_substance_painter">Substance Painter</span></li>
            <li><span data-i18n="cv_other_substance_designer">Substance Designer</span></li>
            <li><span data-i18n="cv_other_quixel_mixer">Quixel Mixer</span></li>
            <li><span data-i18n="cv_other_unreal_engine">Unreal Engine</span></li>
            <li><span data-i18n="cv_other_photoshop">Photoshop</span></li>
            <li><span data-i18n="cv_other_canva">Canva</span></li>
          </ul>
        </section>
      </div>
    </div>
  </section>

  

  <!-- Competenze elenco -->
  <section class="bg-white shadow-md rounded-2xl max-w-5xl mx-auto my-8 p-8 opacity-0 translate-y-6 transition-all duration-700 dark:bg-gray-900 dark:text-gray-100" data-reveal>
    <h2 class="text-2xl font-bold mb-6 transition-colors hover:text-brand hover:underline decoration-2 underline-offset-4" data-i18n="skills_title">Competenze</h2>
    <ul id="skills-list" class="grid grid-cols-2 md:grid-cols-3 gap-3 text-sm sm:text-base">
      <!-- Gruppo: Linguaggi (invertito) -->
      <li class="col-span-2 md:col-span-3 text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400"><span data-i18n="skills_group_languages_title">Linguaggi</span></li>
      <li data-cat="linguaggi backend" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_php">PHP</span></li>
      <li data-cat="linguaggi frontend" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_js">JavaScript</span></li>
      <li data-cat="linguaggi" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_html">HTML</span></li>
      <li data-cat="linguaggi" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_css_advanced">CSS avanzato</span></li>

      <!-- Database spostato sotto Software -->
      <li data-cat="database" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_db_mysql">Database (MySQL)</span></li>

      <!-- Gruppo: Frameworks (rinominato) -->
      <li class="col-span-2 md:col-span-3 text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400"><span data-i18n="skills_group_frameworks_title">Frameworks</span></li>
      <li data-cat="frameworks frontend" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_tailwind">Tailwind CSS</span></li>
      <li data-cat="frameworks frontend" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_jquery">jQuery</span></li>
      <li data-cat="frameworks frontend" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_gsap">GSAP</span></li>
      <li data-cat="frameworks frontend" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_threejs">Three.js</span></li>
      <li data-cat="frameworks backend" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_woocommerce">WooCommerce</span></li>
      <li data-cat="frameworks frontend" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_bootstrap">Bootstrap</span></li>
      <li data-cat="frameworks frontend" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_materialize">Materialize</span></li>

      <!-- Base & CMS -->
      <li data-cat="cms" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_wordpress">WordPress</span></li>

      <!-- Backend & API -->
      <li data-cat="frontend backend" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_rest_api">API REST</span></li>

      <!-- Tooling & DevOps -->
      <li class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_git_github">Git &amp; GitHub</span></li>
      <li class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_docker">Docker</span></li>
      <li class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_ci_cd">CI/CD</span></li>

      <!-- QualitÃ  & Marketing -->
      <li class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_performance">Performance Web</span></li>
      <li class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_crm_automation">CRM &amp; Automazioni</span></li>
      <li class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_seo_marketing">SEO &amp; Marketing</span></li>

      <!-- Framework & eâ€‘commerce -->
      

      <!-- 3D & Grafica -->
      
      <li data-cat="3d" class="col-span-2 md:col-span-3 text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400"><span data-i18n="skills_group_types_title">Tipologie</span></li>
      <li data-cat="3d" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_3d_modeling">Modellazione 3D</span></li>
      <li data-cat="3d" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_3d_rendering">Rendering 3D</span></li>
      <li data-cat="3d" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_texture_painting">Texture Painting</span></li>
      <li data-cat="3d" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_3d_models_printing">Modelli per stampa 3D</span></li>
      <li data-cat="3d" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_3d_models_rendering">Modelli per rendering 3D</span></li>
      <li data-cat="3d" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_3d_models_games">Modelli 3D per videogiochi</span></li>

      <li data-cat="3d" class="col-span-2 md:col-span-3 text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400"><span data-i18n="skills_group_other_title">Softwares</span></li>
      <li data-cat="3d" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_photoshop">Photoshop</span></li>
      <li data-cat="3d" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_canva">Canva</span></li>
      <li data-cat="3d" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_webgl_webgpu">WebGL/WebGPU</span></li>
      <li data-cat="3d" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_blender">Blender</span></li>
      <li data-cat="3d" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_substance_painter">Substance Painter</span></li>
      <li data-cat="3d" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_substance_designer">Substance Designer</span></li>
      <li data-cat="3d" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_quixel_mixer">Quixel Mixer</span></li>
      <li data-cat="3d" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_unreal_engine">Unreal Engine</span></li>

      <li data-cat="3d" class="col-span-2 md:col-span-3 text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400"><span data-i18n="skills_group_alt_title">Altro</span></li>

      <!-- Database (spostato sopra) -->
      <!-- Server & VPS -->
      <li data-cat="backend" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_server_linux_install">Installazione server Linux (Ubuntu/Debian)</span></li>
      <li data-cat="backend" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_nginx_apache_config">Configurazione Nginx/Apache</span></li>
      <li data-cat="backend" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_ssl_letsencrypt">SSL/TLS &amp; Let's Encrypt</span></li>
      <li data-cat="backend" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_vps_provisioning">Provisioning VPS</span></li>
      <li data-cat="backend" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_backup_restore">Backup &amp; Restore</span></li>
      <li data-cat="backend" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_monitoring_logging">Monitoraggio &amp; Log</span></li>
      <li data-cat="backend" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_security_firewall">Sicurezza &amp; Firewall (ufw/fail2ban)</span></li>

      <!-- Database & Admin -->
      <li data-cat="database" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_db_admin_mysql_postgres">Admin DB (MySQL/PostgreSQL)</span></li>
      <li data-cat="database" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_db_tuning_indexing">Tuning &amp; Indexing</span></li>
      <li data-cat="database" class="flex items-center gap-2 px-3 py-2 rounded-full border bg-white/80 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"><svg class="w-4 h-4 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M5 13l4 4L19 7"/></svg><span data-i18n="skills_db_replication_migration">Replica &amp; Migrazioni</span></li>
    </ul>
  </section>


  <!-- Sezioni dedicate -->
<section id="wordpress" data-category="cms backend" class="max-w-5xl mx-auto my-8 p-8 bg-gradient-to-br from-blue-50/50 to-teal-50/50 rounded-2xl shadow opacity-0 translate-y-6 transition-all duration-700 dark:bg-none dark:bg-gray-900/50 dark:text-gray-100" data-reveal>
    <h2 class="text-2xl font-bold mb-4 flex items-center gap-2 motion-safe:animate-reveal-up transition-colors transition-transform transform-gpu hover:text-brand hover:underline decoration-2 underline-offset-4 hover:scale-105" data-i18n="wp_title">ðŸ§© WordPress</h2>
    <div class="grid sm:grid-cols-2 gap-6">
      <div class="p-6 bg-white rounded-xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0s">
        <h3 class="text-xl font-semibold flex items-center gap-2 text-brand transition-transform transform-gpu hover:skew-x-1">
          <svg class="w-5 h-5 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M3 10v10a1 1 0 0 0 1 1h10"/><path d="M21 8v9a1 1 0 0 1-1 1h-9"/></svg>
          <span data-i18n="wp_dev_title">Sviluppo Plugin e Temi</span>
        </h3>
        <p class="mt-2 text-gray-700 dark:text-gray-300" data-i18n="wp_dev_desc">Best practice, sicurezza, hooks e custom post types. Pubblicazioni su wordpress.org.</p>
        <a href="https://github.com/Studio-Immens/studio-immens-css-classes" class="text-blue-600 font-semibold hover:underline" data-i18n="wp_dev_link">Esempio plugin</a>
      </div>
      <div class="p-6 bg-white rounded-xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0.12s">
        <h3 class="text-xl font-semibold flex items-center gap-2 text-brand transition-transform transform-gpu hover:rotate-1">
          <svg class="w-5 h-5 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 12h18"/><path d="M12 3v18"/></svg>
          <span data-i18n="wp_perf_title">Performance &amp; SEO</span>
        </h3>
        <p class="mt-2 text-gray-700 dark:text-gray-300" data-i18n="wp_perf_desc">Ottimizzazioni LCP, caching, immagini e struttura HTML semantica con schema.org.</p>
      </div>
      <div class="p-6 bg-white rounded-xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0.18s">
        <h3 class="text-xl font-semibold flex items-center gap-2 text-brand transition-transform transform-gpu hover:translate-y-0.5">
          <svg class="w-5 h-5 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4 6h16M4 12h10M4 18h7"/></svg>
          <span data-i18n="js_ajax_title">AJAX &amp; API</span>
        </h3>
        <p class="mt-2 text-gray-700 dark:text-gray-300" data-i18n="js_ajax_desc">Richieste AJAX con fetch/XHR, caching lato client, gestione CORS.</p>
      </div>
      <div class="p-6 bg-white rounded-xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0.24s">
        <h3 class="text-xl font-semibold flex items-center gap-2 text-brand transition-transform transform-gpu hover:-translate-y-0.5">
          <svg class="w-5 h-5 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 4h18M6 8h12M9 12h6M6 16h12M3 20h18"/></svg>
          <span data-i18n="js_debug_title">Log &amp; Debug avanzato</span>
        </h3>
        <p class="mt-2 text-gray-700 dark:text-gray-300" data-i18n="js_debug_desc">Console strutturata, livelli di log, tracciamento errori, profiling performance.</p>
      </div>
      <div class="p-6 bg-white rounded-xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0.30s">
        <h3 class="text-xl font-semibold flex items-center gap-2 text-brand transition-transform transform-gpu hover:rotate-1">
          <svg class="w-5 h-5 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2l4 8h8l-6.5 5 2.5 7-6.5-4.5L7.5 22 10 15 2 10h8z"/></svg>
          <span data-i18n="js_libs_title">Librerie &amp; Frameworks</span>
        </h3>
        <p class="mt-2 text-gray-700 dark:text-gray-300" data-i18n="js_libs_desc">three.js per 3D/WebGL, jQuery per DOM, GSAP per animazioni.</p>
      </div>
    </div>
  </section>

<section id="php" data-category="linguaggi backend" class="max-w-5xl mx-auto my-8 p-8 bg-gradient-to-br from-amber-50/50 to-orange-50/50 rounded-2xl shadow opacity-0 translate-y-6 transition-all duration-700 dark:bg-none dark:bg-gray-900/50 dark:text-gray-100" data-reveal>
    <h2 class="text-2xl font-bold mb-4 motion-safe:animate-reveal-up transition-colors hover:text-brand hover:underline decoration-2 underline-offset-4" data-i18n="php_title">ðŸ˜ PHP</h2>
    <div class="grid sm:grid-cols-2 gap-6">
      <div class="p-6 bg-white rounded-xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0s">
        <h3 class="text-xl font-semibold flex items-center gap-2 text-brand transition-transform hover:scale-105 transform-gpu">
          <svg class="w-5 h-5 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4 7h16M4 12h16M4 17h16"/></svg>
          <span data-i18n="php_arch_title">Architettura &amp; OOP</span>
        </h3>
        <p class="mt-2 text-gray-700 dark:text-gray-300" data-i18n="php_arch_desc">Pattern, organizzazione codice, sicurezza input/output, integrazione con WordPress.</p>
      </div>
      <div class="p-6 bg-white rounded-xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0.12s">
        <h3 class="text-xl font-semibold flex items-center gap-2 text-brand transition-transform hover:scale-105 transform-gpu">
          <svg class="w-5 h-5 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M7 7l10 10M17 7L7 17"/></svg>
          <span data-i18n="php_api_title">API &amp; integrazioni</span>
        </h3>
        <p class="mt-2 text-gray-700 dark:text-gray-300" data-i18n="php_api_desc">REST, webhook, automazioni CRM e servizi terzi.</p>
      </div>
      <div class="p-6 bg-white rounded-xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0.18s">
        <h3 class="text-xl font-semibold flex items-center gap-2 text-brand transition-transform transform-gpu hover:translate-x-0.5">
          <svg class="w-5 h-5 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M6 6h12v12H6z"/><path d="M8 8h8v8H8z"/></svg>
          <span data-i18n="css_frameworks_title">Frameworks CSS</span>
        </h3>
        <p class="mt-2 text-gray-700 dark:text-gray-300" data-i18n="css_frameworks_desc">Bootstrap e Materialize: grid, componenti UI, responsive e accessibilitÃ .</p>
      </div>
    </div>
  </section>

<section id="javascript" data-category="linguaggi frontend" class="max-w-5xl mx-auto my-8 p-8 bg-gradient-to-br from-indigo-50/50 to-purple-50/50 rounded-2xl shadow opacity-0 translate-y-6 transition-all duration-700 dark:bg-none dark:bg-gray-900/50 dark:text-gray-100" data-reveal>
    <h2 class="text-2xl font-bold mb-4 motion-safe:animate-reveal-up transition-colors transition-transform transform-gpu hover:text-brand hover:underline decoration-2 underline-offset-4 hover:scale-105" data-i18n="js_title">âš¡ JavaScript</h2>
    <div class="grid sm:grid-cols-2 gap-6">
      <div class="p-6 bg-white rounded-xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0s">
        <h3 class="text-xl font-semibold flex items-center gap-2 text-brand transition-transform transform-gpu hover:-translate-y-0.5">
          <svg class="w-5 h-5 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M13 2L3 14h7v8l10-12h-7z"/></svg>
          <span data-i18n="js_interactivity_title">InterattivitÃ  &amp; UX</span>
        </h3>
        <p class="mt-2 text-gray-700 dark:text-gray-300" data-i18n="js_interactivity_desc">Esperienze fluide, animazioni, gestione stato lato client, integrazione editor WP.</p>
      </div>
      <div class="p-6 bg-white rounded-xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0.12s">
        <h3 class="text-xl font-semibold flex items-center gap-2 text-brand transition-transform transform-gpu hover:rotate-1">
          <svg class="w-5 h-5 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 12h6l2-3 2 6 2-3h6"/></svg>
          <span data-i18n="js_fetch_title">Fetch &amp; Async</span>
        </h3>
        <p class="mt-2 text-gray-700 dark:text-gray-300" data-i18n="js_fetch_desc">Richieste asincrone, error handling, progressive enhancement.</p>
      </div>
    </div>
  </section>

<section id="css" data-category="linguaggi frontend" class="max-w-5xl mx-auto my-8 p-8 bg-gradient-to-br from-pink-50/50 to-rose-50/50 rounded-2xl shadow opacity-0 translate-y-6 transition-all duration-700 dark:bg-none dark:bg-gray-900/50 dark:text-gray-100" data-reveal>
    <h2 class="text-2xl font-bold mb-4 motion-safe:animate-reveal-up transition-colors transition-transform transform-gpu hover:text-brand hover:underline decoration-2 underline-offset-4 hover:-translate-y-0.5" data-i18n="css_title">ðŸŽ¨ CSS Avanzato</h2>
    <div class="grid sm:grid-cols-2 gap-6">
      <div class="p-6 bg-white rounded-xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0s">
        <h3 class="text-xl font-semibold flex items-center gap-2 text-brand transition-transform transform-gpu hover:skew-x-1">
          <svg class="w-5 h-5 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4 20l6-6 4 4 6-10"/></svg>
          <span data-i18n="css_layout_title">Layout &amp; Animazioni</span>
        </h3>
        <p class="mt-2 text-gray-700 dark:text-gray-300" data-i18n="css_layout_desc">Grid, flex, transizioni e animazioni complesse con performance ottimali.</p>
      </div>
      <div class="p-6 bg-white rounded-xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0.12s">
        <h3 class="text-xl font-semibold flex items-center gap-2 text-brand transition-transform transform-gpu hover:-skew-y-1">
          <svg class="w-5 h-5 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="7"/></svg>
          <span data-i18n="css_design_system_title">Design System</span>
        </h3>
        <p class="mt-2 text-gray-700 dark:text-gray-300" data-i18n="css_design_system_desc">Componenti riutilizzabili, tipografia e palette coerenti.</p>
      </div>
    </div>
  </section>

  <section id="tailwind" data-category="frontend" class="max-w-5xl mx-auto my-8 p-8 bg-gradient-to-br from-teal-50/50 to-emerald-50/50 rounded-2xl shadow opacity-0 translate-y-6 transition-all duration-700 dark:bg-none dark:bg-gray-900/50 dark:text-gray-100" data-reveal>
    <h2 class="text-2xl font-bold mb-4 motion-safe:animate-reveal-up transition-colors transition-transform transform-gpu hover:text-brand hover:underline decoration-2 underline-offset-4 hover:skew-x-1" data-i18n="tailwind_title">ðŸŒ¬ï¸ Tailwind CSS</h2>
    <div class="grid sm:grid-cols-2 gap-6">
      <div class="p-6 bg-white rounded-xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0s">
        <h3 class="text-xl font-semibold flex items-center gap-2 text-brand transition-all transform-gpu hover:tracking-wide">
          <svg class="w-5 h-5 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 12c4-8 14-8 18 0-4 8-14 8-18 0z"/></svg>
          <span data-i18n="tailwind_utility_title">Utility-first UI</span>
        </h3>
        <p class="mt-2 text-gray-700 dark:text-gray-300" data-i18n="tailwind_utility_desc">Componenti moderni, responsive mobile-first, stato hover/focus accessibile.</p>
      </div>
      <div class="p-6 bg-white rounded-xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0.12s">
        <h3 class="text-xl font-semibold flex items-center gap-2 text-brand transition-transform transform-gpu hover:rotate-1">
          <svg class="w-5 h-5 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M6 6h12v12H6z"/><path d="M9 9h6v6H9z"/></svg>
          <span data-i18n="tailwind_build_title">Build &amp; Performance</span>
        </h3>
        <p class="mt-2 text-gray-700 dark:text-gray-300" data-i18n="tailwind_build_desc">Purge CSS, ottimizzazione production, riduzione CSS critico.</p>
      </div>
    </div>

    <!-- Demo Modal -->
    <div class="mt-6">
      <button id="open-modal" type="button" class="px-4 py-2 bg-brand text-white rounded-lg shadow hover:bg-brandDark transition" data-reveal data-delay="0.18s" data-i18n="modal_open">Apri Modal Demo</button>
    </div>
    <div id="modal" class="fixed inset-0 hidden items-center justify-center">
      <div id="modal-overlay" class="absolute inset-0 bg-black/40"></div>
      <div role="dialog" aria-modal="true" aria-labelledby="modal-title" class="relative bg-white rounded-xl shadow-xl w-11/12 sm:w-96 p-6 dark:bg-gray-800 dark:text-gray-100">
        <h3 id="modal-title" class="text-xl font-semibold flex items-center gap-2 transition-transform hover:scale-105 transform-gpu">
          <svg class="w-5 h-5 text-emerald-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 3l9 4-9 4-9-4 9-4z"/><path d="M3 12l9 4 9-4"/></svg>
          <span data-i18n="modal_title">Modal Tailwind Demo</span>
        </h3>
        <p class="mt-2 text-gray-700 dark:text-gray-300" data-i18n="modal_desc">Esempio di componente UI con Tailwind e JavaScript minimale.</p>
        <div class="mt-4 flex justify-end gap-2">
          <button id="close-modal" type="button" class="px-3 py-2 bg-gray-100 rounded border border-gray-200 text-gray-800 hover:bg-gray-200 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-brand dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-100 dark:border-gray-600" data-i18n="modal_close">Chiudi</button>
        </div>
      </div>
    </div>

    <!-- FunzionalitÃ  rapide -->
    <div class="mt-6">
      <h3 class="text-xl font-semibold mb-2" data-i18n="quick_actions_title">âš¡ FunzionalitÃ  rapide</h3>
      <div class="flex flex-wrap items-center gap-2">
        <!-- Tema -->
        <button class="theme-toggle px-3 py-2 rounded border text-sm bg-white hover:bg-gray-100 transition dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 dark:hover:bg-gray-700 flex items-center gap-2" type="button" aria-label="Cambia tema" aria-pressed="false" data-i18n-aria="aria_theme_toggle"><span class="hidden sm:inline theme-text" data-i18n="theme_button_text">Tema</span></button>
        <!-- Lingua -->
        <div class="flex items-center gap-1">
          <button class="lang-btn px-2 py-1 rounded border text-xs bg-white/70 text-gray-800 hover:bg-gray-100 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 dark:hover:bg-gray-700" type="button" data-lang="it" data-i18n-aria="aria_lang_it" aria-label="Italiano">IT</button>
          <button class="lang-btn px-2 py-1 rounded border text-xs bg-white/70 text-gray-800 hover:bg-gray-100 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 dark:hover:bg-gray-700" type="button" data-lang="en" data-i18n-aria="aria_lang_en" aria-label="English">EN</button>
        </div>
        
        <!-- Scorri su -->
        <button id="qa-scroll-top" type="button" class="px-3 py-2 rounded border text-sm bg-white hover:bg-gray-100 transition dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 dark:hover:bg-gray-700"><span data-i18n="qa_scroll_top">Torna su</span></button>
        <!-- Copia email -->
        <button id="qa-copy-email" type="button" class="px-3 py-2 rounded border text-sm bg-white hover:bg-gray-100 transition dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 dark:hover:bg-gray-700"><span data-i18n="qa_copy_email">Copia email</span></button>
        <!-- Apri badge -->
        <button id="qa-open-badges" type="button" class="px-3 py-2 rounded border text-sm bg-white hover:bg-gray-100 transition dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 dark:hover:bg-gray-700"><span data-i18n="qa_open_badges">Apri badge</span></button>
      </div>
    </div>
  </section>

<section id="html" data-category="linguaggi frontend" class="max-w-5xl mx-auto my-8 p-8 bg-gradient-to-br from-cyan-50/50 to-sky-50/50 rounded-2xl shadow opacity-0 translate-y-6 transition-all duration-700 dark:bg-none dark:bg-gray-900/50 dark:text-gray-100" data-reveal>
    <h2 class="text-2xl font-bold mb-4 motion-safe:animate-reveal-up transition-colors transition-transform transform-gpu hover:text-brand hover:underline decoration-2 underline-offset-4 hover:translate-x-0.5" data-i18n="html_title">ðŸ”¤ HTML Semantico</h2>
    <div class="p-6 bg-white rounded-2xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100 opacity-100 translate-y-0 motion-safe:animate-reveal-up" data-reveal="" data-delay="0s">
      <p class="mt-2 text-gray-700 dark:text-gray-300" data-i18n="html_desc">Struttura semantica, accessibilitÃ , SEO tecnico e dati strutturati JSON-LD.</p>
    </div>
  </section>

  <section id="database" data-category="database" class="max-w-5xl mx-auto my-8 p-8 bg-gradient-to-br from-lime-50/50 to-green-50/50 rounded-2xl shadow opacity-0 translate-y-6 transition-all duration-700 dark:bg-none dark:bg-gray-900/50 dark:text-gray-100" data-reveal>
    <h2 class="text-2xl font-bold mb-4 motion-safe:animate-reveal-up transition-colors transition-transform transform-gpu hover:text-brand hover:underline decoration-2 underline-offset-4 hover:rotate-1" data-i18n="db_title">ðŸ—„ï¸ Database (MySQL)</h2>
    <div class="grid sm:grid-cols-2 gap-6">
      <div class="p-6 bg-white rounded-xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0s">
        <h3 class="text-xl font-semibold flex items-center gap-2 text-brand transition-transform transform-gpu hover:rotate-1">
          <svg class="w-5 h-5 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><ellipse cx="12" cy="6" rx="9" ry="4"/><path d="M3 6v6c0 2.2 4 4 9 4s9-1.8 9-4V6"/></svg>
          <span data-i18n="db_model_title">Modellazione & Query</span>
        </h3>
        <p class="mt-2 text-gray-700 dark:text-gray-300" data-i18n="db_model_desc">Schema ottimizzato, normalizzazione, query complesse e indici.</p>
      </div>
      <div class="p-6 bg-white rounded-xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0.12s">
        <h3 class="text-xl font-semibold flex items-center gap-2 text-brand transition-transform transform-gpu hover:-skew-y-1">
          <svg class="w-5 h-5 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2l7 4v6c0 4-5 6-7 8-2-2-7-4-7-8V6l7-4z"/></svg>
          <span data-i18n="db_migrate_title">Migrazioni &amp; Sicurezza</span>
        </h3>
        <p class="mt-2 text-gray-700 dark:text-gray-300" data-i18n="db_migrate_desc">Backup, migrazioni, gestione permessi e protezione dati.</p>
      </div>
    </div>
  </section>

  <!-- Frameworks: jQuery -->
  <section id="jquery" data-category="frameworks frontend" class="max-w-5xl mx-auto my-8 p-8 bg-gradient-to-br from-violet-50/50 to-fuchsia-50/50 rounded-2xl shadow opacity-0 translate-y-6 transition-all duration-700 dark:bg-none dark:bg-gray-900/50 dark:text-gray-100" data-reveal>
    <h2 class="text-2xl font-bold mb-4 flex items-center gap-2 motion-safe:animate-reveal-up transition-colors transition-transform transform-gpu hover:text-brand hover:underline decoration-2 underline-offset-4 hover:scale-105">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="text-neutral-500 dark:text-neutral-400"><path d="M12 2a10 10 0 1 0 10 10" stroke="currentColor" stroke-width="1.5"/></svg>
      <span data-i18n="jquery_title">jQuery</span>
    </h2>
    <p class="text-gray-700 dark:text-gray-300" data-i18n="jquery_desc">Selettori DOM, eventi, animazioni leggere e integrazioni AJAX.</p>
    <!-- Demo animazioni jQuery -->
    <div class="mt-4 p-4 bg-white rounded-xl shadow transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0.06s">
      <h3 class="text-lg font-semibold mb-3" data-i18n="jquery_demo_title">Demo animazioni jQuery</h3>
      <div class="flex flex-wrap gap-2 mb-4">
        <button id="jq-show" class="px-3 py-1 rounded bg-brand text-white hover:bg-brandDark transition" data-i18n="jquery_demo_show">Mostra</button>
        <button id="jq-hide" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="jquery_demo_hide">Nascondi</button>
        <button id="jq-toggle" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="jquery_demo_toggle">Toggle</button>
        <button id="jq-fade" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="jquery_demo_fade">Fade</button>
        <button id="jq-slide" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="jquery_demo_slide">Slide</button>
        <button id="jq-animate" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="jquery_demo_animate">Anima</button>
        <button id="jq-fadeto" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="jquery_demo_fadeto">FadeTo 50%</button>
        <button id="jq-bounce" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="jquery_demo_bounce">Bounce</button>
        <button id="jq-highlight" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="jquery_demo_highlight">Highlight</button>
        <button id="jq-pulse" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="jquery_demo_pulse">Pulse</button>
        <button id="jq-stop" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover_bg-gray-600" data-i18n="jquery_demo_stop">Stop</button>
        <button id="jq-reset" class="px-3 py-1 rounded bg-orange-500 text-white hover:bg-orange-600 transition" data-i18n="jquery_demo_reset">Reset</button>
      </div>
      <div id="jq-box" class="relative w-40 h-24 rounded-lg bg-brand/20 border border-brand/40 shadow-inner flex items-center justify-center text-brand font-medium select-none" style="left:0px; opacity:1;">
        <span data-i18n="jquery_demo_box_label">Box jQuery</span>
      </div>
    </div>
  </section>

  <!-- Frameworks: GSAP -->
  <section id="gsap" data-category="frameworks frontend" class="max-w-5xl mx-auto my-8 p-8 bg-gradient-to-br from-emerald-50/50 to-teal-50/50 rounded-2xl shadow opacity-0 translate-y-6 transition-all duration-700 dark:bg-none dark:bg-gray-900/50 dark:text-gray-100" data-reveal>
    <h2 class="text-2xl font-bold mb-4 flex items-center gap-2 motion-safe:animate-reveal-up transition-colors transition-transform transform-gpu hover:text-brand hover:underline decoration-2 underline-offset-4 hover:scale-105">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="text-neutral-500 dark:text-neutral-400"><path d="M4 12h16M12 4v16" stroke="currentColor" stroke-width="1.5"/></svg>
      <span data-i18n="gsap_title">GSAP</span>
    </h2>
    <p class="text-gray-700 dark:text-gray-300" data-i18n="gsap_desc">Timeline, easing e animazioni performanti su canvas/DOM.</p>
    <!-- Demo animazioni GSAP -->
    <div class="mt-4 p-4 bg-white rounded-xl shadow transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0.06s">
      <h3 class="text-lg font-semibold mb-3" data-i18n="gsap_demo_title">Demo animazioni GSAP</h3>
      <div class="flex flex-wrap gap-2 mb-4">
        <button id="gsap-play" class="px-3 py-1 rounded bg-brand text-white hover:bg-brandDark transition" data-i18n="gsap_demo_play">Play</button>
        <!-- sostituito: Reverse -->
        <button id="gsap-pause" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="gsap_demo_pause">Pausa</button>
        <button id="gsap-resume" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="gsap_demo_resume">Riprendi</button>
        <button id="gsap-restart" class="px-3 py-1 rounded bg-orange-500 text-white hover:bg-orange-600 transition" data-i18n="gsap_demo_restart">Restart</button>
        <!-- sostituito: Yoyo -->
        <button id="gsap-stagger" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="gsap_demo_stagger">Stagger</button>
        <!-- nuovi bottoni GSAP -->
        <button id="gsap-spin" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="gsap_demo_spin">Spin</button>
        <button id="gsap-bounce" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="gsap_demo_bounce">Bounce</button>
      </div>
      <div id="gsap-box" class="relative w-40 h-24 rounded-lg bg-brand/20 border border-brand/40 shadow-inner flex items-center justify-center text-brand font-medium select-none" style="left:0px; opacity:1; transform: scale(1) rotate(0deg);">
        <span data-i18n="gsap_demo_box_label">Box GSAP</span>
      </div>
      <div class="mt-4">
        <div class="flex items-center gap-2 mb-2">
          <span class="text-sm text-gray-600 dark:text-gray-300" data-i18n="gsap_demo_dots_label">Gruppo box GSAP</span>
        </div>
        <div id="gsap-dots" class="flex gap-2">
          <div class="gsap-dot w-5 h-5 rounded-md bg-brand/30 border border-brand/40"></div>
          <div class="gsap-dot w-5 h-5 rounded-md bg-brand/30 border border-brand/40"></div>
          <div class="gsap-dot w-5 h-5 rounded-md bg-brand/30 border border-brand/40"></div>
          <div class="gsap-dot w-5 h-5 rounded-md bg-brand/30 border border-brand/40"></div>
          <div class="gsap-dot w-5 h-5 rounded-md bg-brand/30 border border-brand/40"></div>
          <div class="gsap-dot w-5 h-5 rounded-md bg-brand/30 border border-brand/40"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Frameworks: Three.js -->
  <section id="threejs" data-category="frameworks frontend 3d" class="max-w-5xl mx-auto my-8 p-8 bg-gradient-to-br from-sky-50/50 to-indigo-50/50 rounded-2xl shadow opacity-0 translate-y-6 transition-all duration-700 dark:bg-none dark:bg-gray-900/50 dark:text-gray-100" data-reveal>
    <h2 class="text-2xl font-bold mb-4 flex items-center gap-2 motion-safe:animate-reveal-up transition-colors transition-transform transform-gpu hover:text-brand hover:underline decoration-2 underline-offset-4 hover:scale-105">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="text-neutral-500 dark:text-neutral-400"><path d="M12 2l8 4v8l-8 4-8-4V6z" stroke="currentColor" stroke-width="1.5"/></svg>
      <span data-i18n="threejs_title">Three.js</span>
    </h2>
    <p class="text-gray-700 dark:text-gray-300" data-i18n="threejs_desc">Scene, camera, materiali e rendering WebGL/WebGPU.</p>
    <!-- Demo Three.js: cubo 3D -->
    <div class="mt-4 p-4 bg-white rounded-xl shadow transition dark:bg-gray-800 dark:text-gray-100" data-reveal data-delay="0.06s">
      <h3 class="text-lg font-semibold mb-3" data-i18n="threejs_demo_title">Demo Three.js (cubo)</h3>
      <div class="flex flex-wrap gap-2 mb-4">
        <button id="threejs-start" class="px-3 py-1 rounded bg-brand text-white hover:bg-brandDark transition" data-i18n="threejs_demo_start">Avvia</button>
        <button id="threejs-stop" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="threejs_demo_stop">Stop</button>
        <button id="threejs-spin" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="threejs_demo_spin">Accelera</button>
        <button id="threejs-reset" class="px-3 py-1 rounded bg-orange-500 text-white hover:bg-orange-600 transition" data-i18n="threejs_demo_reset">Reset</button>
        <button id="threejs-autorotate" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="threejs_demo_autorotate">Autoâ€‘ruota</button>
        <button id="threejs-wireframe" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="threejs_demo_wireframe">Wireframe</button>
        <button id="threejs-solid" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="threejs_demo_solid">Solido</button>
        <button id="threejs-lights" class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="threejs_demo_lights">Luci dinamiche</button>
      </div>
      <div id="threejs-canvas-wrap" class="relative w-full sm:w-[420px] h-[260px] bg-gray-100 dark:bg-gray-700 rounded-lg border border-gray-300 dark:border-gray-600 overflow-hidden">
        <span class="absolute top-2 left-2 text-xs font-medium text-gray-600 dark:text-gray-300" data-i18n="threejs_demo_canvas_label">Canvas Three.js</span>
      </div>
    </div>
  </section>

  <!-- Frameworks: Bootstrap -->
  <section id="bootstrap" data-category="frameworks frontend" class="max-w-5xl mx-auto my-8 p-8 bg-gradient-to-br from-purple-50/50 to-pink-50/50 rounded-2xl shadow opacity-0 translate-y-6 transition-all duration-700 dark:bg-none dark:bg-gray-900/50 dark:text-gray-100" data-reveal>
    <h2 class="text-2xl font-bold mb-4 flex items-center gap-2 motion-safe:animate-reveal-up transition-colors transition-transform transform-gpu hover:text-brand hover:underline decoration-2 underline-offset-4 hover:scale-105">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="text-neutral-500 dark:text-neutral-400"><path d="M6 4h12v16H6z" stroke="currentColor" stroke-width="1.5"/></svg>
      <span data-i18n="bootstrap_title">Bootstrap</span>
    </h2>
    <p class="text-gray-700 dark:text-gray-300" data-i18n="bootstrap_desc">Grid, componenti, responsive e utilitÃ  pronte allâ€™uso.</p>
    <!-- Demo animazioni Bootstrap (isolata in iframe per evitare conflitti CSS) -->
    <div class="mt-4 p-4 bg-white rounded-xl shadow transition dark:bg-gray-800 dark:text-gray-100">
      <h3 class="text-lg font-semibold mb-3" data-i18n="bootstrap_demo_title">Demo animazioni Bootstrap</h3>
      <iframe id="bootstrap-demo" title="Bootstrap Demo" class="w-full h-96 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"
        srcdoc="<!doctype html><html lang='it' data-bs-theme='light'><head><meta charset='utf-8'/><meta name='viewport' content='width=device-width, initial-scale=1'/>
        <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css' rel='stylesheet'/>
        <style>body{padding:1rem} .demo-card{box-shadow:0 1px 6px rgba(0,0,0,0.08);} .btn{margin-right:.25rem}</style></head><body>
          <h4 class='mb-3' data-i18n='title'>Bootstrap Mini Demo</h4>
          <div class='d-flex flex-wrap gap-2 mb-3'>
            <button class='btn btn-primary' id='collapseBtn' data-bs-toggle='collapse' data-bs-target='#demoCollapse' data-i18n='collapse_btn'>Toggle Collapse</button>
            <button class='btn btn-warning' id='alertBtn' data-i18n='alert_btn'>Show Alert</button>
            <button class='btn btn-success' id='toastBtn' data-i18n='toast_btn'>Show Toast</button>
            <button class='btn btn-info' id='modalBtn' data-i18n='modal_btn'>Show Modal</button>
            <button class='btn btn-secondary' id='offcanvasBtn' data-i18n='offcanvas_btn'>Open Offcanvas</button>
          </div>
          <div class='collapse show' id='demoCollapse'>
            <div class='card demo-card card-body' data-i18n='collapse_body'>Area con transizione di altezza (collapse).</div>
          </div>

          <div id='alertContainer'></div>

          <div class='accordion mt-3' id='demoAccordion'>
            <div class='accordion-item'>
              <h2 class='accordion-header' id='h1'><button class='accordion-button' type='button' data-bs-toggle='collapse' data-bs-target='#c1' aria-expanded='true' aria-controls='c1' data-i18n='accordion_item1'>Elemento #1</button></h2>
              <div id='c1' class='accordion-collapse collapse show' data-bs-parent='#demoAccordion'><div class='accordion-body' data-i18n='accordion_body1'>Contenuto 1.</div></div>
            </div>
            <div class='accordion-item'>
              <h2 class='accordion-header' id='h2'><button class='accordion-button collapsed' type='button' data-bs-toggle='collapse' data-bs-target='#c2' aria-controls='c2' data-i18n='accordion_item2'>Elemento #2</button></h2>
              <div id='c2' class='accordion-collapse collapse' data-bs-parent='#demoAccordion'><div class='accordion-body' data-i18n='accordion_body2'>Contenuto 2.</div></div>
            </div>
          </div>

          <div class='toast-container position-fixed bottom-0 end-0 p-3'>
            <div id='demoToast' class='toast' role='alert' aria-live='assertive' aria-atomic='true' data-bs-delay='1400'>
              <div class='toast-header'>
                <strong class='me-auto'>Bootstrap</strong>
                <small data-i18n='toast_time'>ora</small>
                <button type='button' class='btn-close' data-bs-dismiss='toast' aria-label='Close'></button>
              </div>
              <div class='toast-body' data-i18n='toast_text'>Semplice toast con fade.</div>
            </div>
          </div>

          <div class='mt-3'>
            <div class='spinner-border text-primary me-2' role='status'><span class='visually-hidden' data-i18n='spinner_label'>Loading...</span></div>
            <div class='spinner-grow text-info' role='status'><span class='visually-hidden' data-i18n='spinner_label'>Loading...</span></div>
          </div>

          <div class='modal fade' id='demoModal' tabindex='-1' aria-hidden='true'>
            <div class='modal-dialog'>
              <div class='modal-content'>
                <div class='modal-header'><h5 class='modal-title' data-i18n='modal_title'>Esempio Modal</h5><button type='button' class='btn-close' data-bs-dismiss='modal' aria-label='Close'></button></div>
                <div class='modal-body' data-i18n='modal_body'>Contenuto della modal con transizioni.</div>
                <div class='modal-footer'><button class='btn btn-secondary' data-i18n='modal_close' data-bs-dismiss='modal'>Chiudi</button><button class='btn btn-primary' data-i18n='modal_save'>Salva</button></div>
              </div>
            </div>
          </div>

          <div class='offcanvas offcanvas-start' tabindex='-1' id='demoOffcanvas'>
            <div class='offcanvas-header'><h5 class='offcanvas-title' data-i18n='offcanvas_title'>Offcanvas</h5><button type='button' class='btn-close' data-bs-dismiss='offcanvas' aria-label='Close'></button></div>
            <div class='offcanvas-body'><p data-i18n='offcanvas_body'>Menu laterale con slide.</p></div>
          </div>

          <script src='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js'></script>
          <script>
            // i18n + tema dentro iframe
            const T = {
              it: {
                title: 'Demo Bootstrap Mini',
                collapse_btn: 'Apri/Chiudi collapse',
                alert_btn: 'Aggiungi Alert',
                toast_btn: 'Mostra Toast',
                modal_btn: 'Apri Modal',
                offcanvas_btn: 'Apri Offcanvas',
                collapse_body: 'Area con transizione di altezza (collapse).',
                accordion_item1: 'Elemento #1',
                accordion_item2: 'Elemento #2',
                accordion_body1: 'Contenuto 1.',
                accordion_body2: 'Contenuto 2.',
                toast_time: 'ora',
                toast_text: 'Semplice toast con fade.',
                spinner_label: 'Caricamento...',
                modal_title: 'Esempio Modal',
                modal_body: 'Contenuto della modal con transizioni.',
                modal_close: 'Chiudi',
                modal_save: 'Salva',
                offcanvas_title: 'Offcanvas',
                offcanvas_body: 'Menu laterale con slide.'
              },
              en: {
                title: 'Bootstrap Mini Demo',
                collapse_btn: 'Toggle Collapse',
                alert_btn: 'Show Alert',
                toast_btn: 'Show Toast',
                modal_btn: 'Show Modal',
                offcanvas_btn: 'Open Offcanvas',
                collapse_body: 'Area with height transition (collapse).',
                accordion_item1: 'Item #1',
                accordion_item2: 'Item #2',
                accordion_body1: 'Content 1.',
                accordion_body2: 'Content 2.',
                toast_time: 'now',
                toast_text: 'Simple toast with fade.',
                spinner_label: 'Loading...',
                modal_title: 'Modal Example',
                modal_body: 'Modal content with transitions.',
                modal_close: 'Close',
                modal_save: 'Save',
                offcanvas_title: 'Offcanvas',
                offcanvas_body: 'Side menu with slide.'
              }
            };
            let L = 'it';
            const t = (k) => (T[L] && T[L][k]) || k;
            const applyI18n = () => {
              document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (key) el.textContent = t(key);
              });
              document.documentElement.lang = L;
            };
            const setLang = (lang) => { if (['it','en'].includes(lang)) { L = lang; applyI18n(); } };
            const setTheme = (theme) => { document.documentElement.setAttribute('data-bs-theme', theme === 'dark' ? 'dark' : 'light'); };
            window.addEventListener('message', (e) => {
              const msg = e.data || {};
              if (msg.type === 'lang') setLang(msg.value);
              if (msg.type === 'theme') setTheme(msg.value);
            });
            applyI18n();
            const toast = new bootstrap.Toast(document.getElementById('demoToast'));
            document.getElementById('toastBtn').addEventListener('click', ()=> { toast.show(); try { window.parent && window.parent.postMessage({type:'bootstrap_demo_click', id:'toastBtn'}, '*'); } catch(e){} });
            document.getElementById('alertBtn').addEventListener('click', ()=> {
              const el = document.createElement('div');
              el.className = 'alert alert-warning alert-dismissible fade show mt-2';
              el.role = 'alert';
              el.innerHTML = (L === 'it' ? 'Attenzione! Questo Ã¨ un alert con fade.' : 'Attention! This is a Bootstrap alert with fade.') + ' <button type=\'button\' class=\'btn-close\' data-bs-dismiss=\'alert\' aria-label=\'Close\'></button>';
              document.getElementById('alertContainer').appendChild(el);
              try { window.parent && window.parent.postMessage({type:'bootstrap_demo_click', id:'alertBtn'}, '*'); } catch(e){}
            });
            const modal = new bootstrap.Modal(document.getElementById('demoModal'));
            document.getElementById('modalBtn').addEventListener('click', ()=> { modal.show(); try { window.parent && window.parent.postMessage({type:'bootstrap_demo_click', id:'modalBtn'}, '*'); } catch(e){} });
            const offcanvas = new bootstrap.Offcanvas(document.getElementById('demoOffcanvas'));
            document.getElementById('offcanvasBtn').addEventListener('click', ()=> { offcanvas.toggle(); try { window.parent && window.parent.postMessage({type:'bootstrap_demo_click', id:'offcanvasBtn'}, '*'); } catch(e){} });
            // Track collapse toggle clicks
            document.getElementById('collapseBtn').addEventListener('click', ()=> { try { window.parent && window.parent.postMessage({type:'bootstrap_demo_click', id:'collapseBtn'}, '*'); } catch(e){} });
          </script>
        </body></html>"></iframe>
    </div>
  </section>

  <!-- Frameworks: Materialize -->
  

  <!-- Frameworks/CMS: WooCommerce -->
  <section id="woocommerce" data-category="frameworks backend cms" class="max-w-5xl mx-auto my-8 p-8 bg-gradient-to-br from-amber-50/50 to-rose-50/50 rounded-2xl shadow opacity-0 translate-y-6 transition-all duration-700 dark:bg-none dark:bg-gray-900/50 dark:text-gray-100" data-reveal>
    <h2 class="text-2xl font-bold mb-4 flex items-center gap-2 motion-safe:animate-reveal-up transition-colors transition-transform transform-gpu hover:text-brand hover:underline decoration-2 underline-offset-4 hover:scale-105">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="text-neutral-500 dark:text-neutral-400"><path d="M3 7h18v10H3z" stroke="currentColor" stroke-width="1.5"/></svg>
      <span data-i18n="woocommerce_title">WooCommerce</span>
    </h2>
    <p class="text-gray-700 dark:text-gray-300" data-i18n="woocommerce_desc">Eâ€‘commerce su WordPress: hook, checkout, integrazioni, performance e scalabilitÃ .</p>

    <!-- Competenze principali -->
    <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3">
      <div class="p-3 rounded-xl bg-white/70 shadow dark:bg-gray-800/70">
        <h3 class="font-semibold mb-2" data-i18n="woo_block_checkout_title">Checkout &amp; UX</h3>
        <ul class="text-sm text-gray-700 dark:text-gray-300 list-disc list-inside">
          <li data-i18n="woo_checkout_item1">Campi personalizzati, step semplificati, upsell/crossâ€‘sell</li>
          <li data-i18n="woo_checkout_item2">Metodi di pagamento: Stripe, PayPal, carte, bonifici</li>
        </ul>
      </div>
      <div class="p-3 rounded-xl bg-white/70 shadow dark:bg-gray-800/70">
        <h3 class="font-semibold mb-2" data-i18n="woo_block_catalog_title">Catalogo &amp; Logica</h3>
        <ul class="text-sm text-gray-700 dark:text-gray-300 list-disc list-inside">
          <li data-i18n="woo_catalog_item1">Attributi, variabili, bundle, prodotti compositi</li>
          <li data-i18n="woo_catalog_item2">Regole prezzi, coupon, tassazioni e spedizioni</li>
        </ul>
      </div>
      <div class="p-3 rounded-xl bg-white/70 shadow dark:bg-gray-800/70">
        <h3 class="font-semibold mb-2" data-i18n="woo_block_api_title">API &amp; Integrazioni</h3>
        <ul class="text-sm text-gray-700 dark:text-gray-300 list-disc list-inside">
          <li data-i18n="woo_api_item1">Webhooks, REST API, ERP/CRM, automazioni</li>
          <li data-i18n="woo_api_item2">Multiâ€‘lingua (WPML/Polylang) e multiâ€‘negozio</li>
        </ul>
      </div>
      <div class="p-3 rounded-xl bg-white/70 shadow dark:bg-gray-800/70">
        <h3 class="font-semibold mb-2" data-i18n="woo_block_perf_title">Performance &amp; ScalabilitÃ </h3>
        <ul class="text-sm text-gray-700 dark:text-gray-300 list-disc list-inside">
          <li data-i18n="woo_perf_item1">Cache, query ottimizzate, lazy loading</li>
          <li data-i18n="woo_perf_item2">ScalabilitÃ  orizzontale e CDN</li>
        </ul>
      </div>
    </div>

    <!-- InterattivitÃ : dettagli e calcolatore sconto -->
    <div class="mt-6 space-y-4">
      <button id="woo-toggle" class="px-4 py-2 rounded bg-brand text-white hover:bg-brand/90 transition active:scale-95" data-i18n="woo_toggle_show">Mostra dettagli</button>
      <div id="woo-details" class="hidden p-4 rounded-xl bg-white/80 shadow dark:bg-gray-800/80">
        <h4 class="font-semibold mb-2" data-i18n="woo_details_title">Dettagli rapidi</h4>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-gray-700 dark:text-gray-300">
          <ul class="list-disc list-inside">
            <li data-i18n="woo_details_item1">Modifiche checkout con hook/filters e blocchi Gutenberg</li>
            <li data-i18n="woo_details_item2">Gestione spedizioni avanzate (tabelle, zone, corrieri)</li>
            <li data-i18n="woo_details_item3">Abbonamenti/Membership e email transazionali</li>
          </ul>
          <ul class="list-disc list-inside">
            <li data-i18n="woo_details_item4">Sincronizzazione prodotti via API (ERP/CRM)</li>
            <li data-i18n="woo_details_item5">Tracking eventi per analytics/ads</li>
            <li data-i18n="woo_details_item6">Hardening e conformitÃ  (GDPR)</li>
          </ul>
        </div>
      </div>
    </div>

    <script>
      // IT: InterattivitÃ  sezione WooCommerce â€” toggle dettaglio con localizzazione e animazione.
      // EN: WooCommerce section interactivity â€” toggle details with i18n and animation.
      (function(){
        var toggleBtn = document.getElementById('woo-toggle');
        var panel = document.getElementById('woo-details');

        if(toggleBtn){
          toggleBtn.addEventListener('click', function(){
            var hidden = panel.classList.contains('hidden');
            panel.classList.toggle('hidden');
            // IT: Localizzazione â€” usa le chiavi i18n se disponibili; fallback IT.
            // EN: Localization â€” use i18n keys when available; Italian fallback.
            if (typeof window !== 'undefined' && typeof t === 'function') {
              toggleBtn.textContent = hidden ? t('woo_toggle_hide') : t('woo_toggle_show');
            } else {
              toggleBtn.textContent = hidden ? 'Nascondi dettagli' : 'Mostra dettagli';
            }
            // IT: Piccola animazione dâ€™ingresso se GSAP Ã¨ disponibile (microâ€‘interazione, yay!).
            // EN: Tiny entrance animation if GSAP is available (microâ€‘interaction, yay!).
            if(window.gsap && !hidden){
              gsap.from(panel, { opacity: 0, y: 12, duration: 0.25, ease: 'power2.out' });
            }
          });
        }
      })();
    </script>
    
    <!-- Esempio hook WooCommerce -->
    <div class="mt-4 p-4 rounded-xl bg-white/80 shadow dark:bg-gray-800/80">
      <h4 class="font-semibold mb-2" data-i18n="woo_example_title">Esempio hook Checkout</h4>
      <p class="text-sm text-gray-700 dark:text-gray-300 mb-2" data-i18n="woo_example_desc">Aggiunta di un campo personalizzato al checkout usando i filtri di WooCommerce.</p>
      <pre class="text-xs p-3 rounded bg-gray-100 dark:bg-gray-900 overflow-auto"><code>add_filter('woocommerce_checkout_fields', function($fields) {
  $fields['billing']['billing_codice_fiscale'] = [
    'type' => 'text',
    'label' => 'Codice Fiscale',
    'required' => false,
    'class' => ['form-row-wide'],
    'priority' => 120,
  ];
  return $fields;
});</code></pre>
    </div>
  </section>

  <!-- API REST -->
  <section id="api-rest" data-category="backend frontend" class="max-w-5xl mx-auto my-8 p-8 bg-gradient-to-br from-yellow-50/50 to-orange-50/50 rounded-2xl shadow opacity-0 translate-y-6 transition-all duration-700 dark:bg-none dark:bg-gray-900/50 dark:text-gray-100" data-reveal>
    <h2 class="text-2xl font-bold mb-4 flex items-center gap-2 motion-safe:animate-reveal-up transition-colors transition-transform transform-gpu hover:text-brand hover:underline decoration-2 underline-offset-4 hover:scale-105">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="text-neutral-500 dark:text-neutral-400"><path d="M4 12h6M14 12h6" stroke="currentColor" stroke-width="1.5"/></svg>
      <span data-i18n="rest_title">API REST</span>
    </h2>
    <p class="text-gray-700 dark:text-gray-300" data-i18n="rest_desc">Endpoint CRUD, autenticazione, fetch asincrono e integrazioni.</p>

    <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3">
      <div class="p-3 rounded-xl bg-white/70 shadow dark:bg-gray-800/70">
        <h3 class="font-semibold mb-2" data-i18n="rest_details_title">Dettagli tecnici</h3>
        <ul class="text-sm text-gray-700 dark:text-gray-300 list-disc list-inside">
          <li data-i18n="rest_point_endpoints">Endpoint CRUD, parametri query, paginazione e filtri</li>
          <li data-i18n="rest_point_auth">Autenticazione JWT/OAuth2, sessioni, ruoli e permessi</li>
          <li data-i18n="rest_point_validation">Validazione payload, schemi, sanitizzazione ed error handling</li>
        </ul>
      </div>
      <div class="p-3 rounded-xl bg-white/70 shadow dark:bg-gray-800/70">
        <h3 class="font-semibold mb-2" data-i18n="rest_details_title2">Integrazioni & Performance</h3>
        <ul class="text-sm text-gray-700 dark:text-gray-300 list-disc list-inside">
          <li data-i18n="rest_point_integrations">Integrazioni: Webhooks, ERP/CRM, servizi terzi</li>
          <li data-i18n="rest_point_performance">Caching, rate limiting, ETag, CDN e performance</li>
          <li data-i18n="rest_point_security">Sicurezza: CSRF, CORS, HTTPS, audit e logging</li>
        </ul>
      </div>
    </div>

    <!-- Esempio richiesta/risposta REST -->
    <div class="mt-6 p-4 rounded-xl bg-white/80 shadow dark:bg-gray-800/80">
      <h3 class="font-semibold mb-2" data-i18n="rest_example_title">Esempio richiesta/risposta</h3>
      <p class="text-sm text-gray-700 dark:text-gray-300 mb-3" data-i18n="rest_example_desc">Esempio di chiamata GET a un endpoint prodotti e relativa risposta JSON.</p>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
        <div>
          <h4 class="font-semibold text-sm mb-1" data-i18n="rest_example_request_title">Richiesta</h4>
          <pre class="text-xs p-3 rounded bg-gray-100 dark:bg-gray-900 overflow-auto"><code>curl -s 'https://api.example.com/products?limit=2' -H 'Accept: application/json'</code></pre>
        </div>
        <div>
          <h4 class="font-semibold text-sm mb-1" data-i18n="rest_example_response_title">Risposta</h4>
          <pre class="text-xs p-3 rounded bg-gray-100 dark:bg-gray-900 overflow-auto"><code>{
  "data": [
    { "id": 101, "name": "T-shirt", "price": 19.90 },
    { "id": 102, "name": "Sneakers", "price": 69.00 }
  ],
  "meta": { "limit": 2, "total": 42 }
}</code></pre>
        </div>
      </div>
    </div>
  </section>



  <section id="progetti" class="max-w-5xl mx-auto py-12 px-6 data-[reveal] opacity-0 translate-y-6 transition-all duration-700 dark:text-gray-100" data-reveal>
    <h2 class="text-2xl font-bold mb-6 motion-safe:animate-reveal-up transition-colors transition-transform transform-gpu hover:text-brand hover:underline decoration-2 underline-offset-4 hover:scale-105" data-i18n="projects_title">Esperienze &amp; Progetti</h2>
    
     <!-- Card sito con preview live -->
    <a href="https://innovazioneweb.com/" target="_blank" rel="noopener noreferrer" data-reveal data-delay="0.12s"
        class="group relative bg-white rounded-2xl shadow-xl overflow-hidden transform transition duration-500 hover:rotate-1 hover:-translate-y-3 hover:shadow-2xl dark:bg-gray-800">
      
      <div class="overflow-hidden">
      </div>
      
    </a>
    
    <div class="space-y-6">
      
      <div class="p-6 bg-white rounded-2xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100">
        <h3 class="text-xl font-semibold transition-transform transform-gpu hover:rotate-1" data-i18n="projects_github_title">Progetti GitHub Open Source</h3>
        <p class="mt-2 dark:text-gray-300" data-i18n="projects_github_desc">Plugin e tool sviluppati per semplificare lâ€™uso di WordPress e automazioni digitali.</p>
        <a href="https://github.com/Immens95" class="text-blue-600 font-semibold hover:underline" data-i18n="projects_github_link">Vai ai repo</a>
      </div>

      <div class="p-6 bg-white rounded-2xl shadow hover:shadow-lg transition dark:bg-gray-800 dark:text-gray-100">
        <h3 class="text-xl font-semibold transition-transform transform-gpu hover:-skew-y-1">Studio Immens CSS Classes</h3>
        <p class="mt-2 dark:text-gray-300" data-i18n="projects_cssclasses_desc">Plugin pubblicato su wordpress.org per creare rapidamente classi CSS e aggiungerle ai blocchi dell'editor di WordPress con un clic e con anteprima in tempo reale.</p>
        <a href="https://github.com/Studio-Immens/studio-immens-css-classes" class="text-blue-600 font-semibold hover:underline" data-i18n="projects_repo_link">Vai al repo</a>
      </div>
      
    </div>
  </section>

  </main>

  <!-- Toast ricompense -->
  <div id="toast-container" class="fixed bottom-4 right-4 space-y-2 z-50"></div>

  <!-- Animazione click globale -->
  <style>
    @keyframes clickPop {
      0% { transform: translateY(0) scale(1) skewY(0deg); }
      50% { transform: translateY(0) scale(0.98) skewY(-2deg); }
      100% { transform: translateY(0) scale(1) skewY(0deg); }
    }
    .click-anim { animation: clickPop 180ms ease-out; }

    /* Sezioni visitate: solo stato, nessun overlay di background */
    .section-visited { }

    /* Stellina SVG per sezioni visitate (senza background) */
    .visited-badge {
      position: static;
      display: inline-block;
      margin-left: 0.5rem;
      width: 16px;
      height: 16px;
      vertical-align: middle;
      color: #f59e0b; /* amber-600 */
      pointer-events: none;
      user-select: none;
    }
    .visited-badge .visited-star { display: block; width: 16px; height: 16px; }
    /* OpacitÃ  0.5 per tutti i background dentro main (light e dark) */
    main .bg-white { --tw-bg-opacity: 0.5 !important; }
    main .bg-gray-100 { --tw-bg-opacity: 0.5 !important; }
    .dark main .bg-gray-800 { --tw-bg-opacity: 0.5 !important; }
    .dark main .bg-gray-900 { --tw-bg-opacity: 0.5 !important; }
  </style>

  <!-- Overlay Badge -->
  <div id="badge-overlay" class="fixed inset-0 hidden items-center justify-center z-50">
    <div id="badge-backdrop" class="absolute inset-0 bg-black/40"></div>
    <div role="dialog" aria-modal="true" aria-labelledby="badge-title" class="relative bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded-xl shadow-xl w-10/12 sm:w-[26rem] p-6 max-h-[75vh] overflow-y-auto">
      <div class="flex items-center justify-between">
        <h3 id="badge-title" class="text-lg font-semibold" data-i18n="overlay_title">Badge</h3>
        <button id="badge-close" class="px-3 py-1 text-sm rounded bg-gray-100 hover:bg-gray-200 transition dark:bg-gray-700 dark:hover:bg-gray-600" data-i18n="overlay_close">Chiudi</button>
      </div>
      <p class="mt-2 text-sm dark:text-gray-300" data-i18n="overlay_desc">Clicca i titoli del CV per guadagnare XP e sbloccare badge.</p>
      <ul id="badge-list" class="mt-4 space-y-2 pr-1">
        <li class="text-sm text-gray-600 dark:text-gray-300" data-i18n="overlay_no_badge">Nessun badge ancora. Prova a cliccare un titolo!</li>
      </ul>
    </div>
  </div>

  <!-- Contenuto sbloccabile: Gate Leggenda -->
  <section id="legendary-gate" data-badge-gate="Leggenda" class="hidden max-w-5xl mx-auto my-6 p-6 bg-gradient-to-br from-amber-50/60 to-yellow-50/60 rounded-2xl shadow dark:bg-none dark:bg-gray-900/50 dark:text-gray-100">
    <h3 class="text-xl font-semibold mb-2 flex items-center gap-2">
      <span>ðŸŒŸ</span>
      <span data-i18n="legendary_gate_title">Contenuto Leggendario</span>
    </h3>
    <p class="text-sm text-gray-700 dark:text-gray-300" data-i18n="legendary_gate_desc">Hai sbloccato un contenuto speciale cliccando il badge Leggenda.</p>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-800 text-gray-300 py-6 mt-12" aria-label="PiÃ¨ di pagina" data-i18n-aria="aria_footer_landmark">
    <div class="max-w-4xl mx-auto text-center">
      <p data-i18n="footer_rights">Â© 2025 Mauro Arnone - Tutti i diritti riservati</p>
    </div>
  </footer>

  <!-- Interazioni: menu mobile, modal e reveal on scroll -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Theme toggle
      const root = document.documentElement;
      // Riferimento iframe Bootstrap e helper per inviare messaggi
      const bootstrapIframe = document.getElementById('bootstrap-demo');
      // Riferimento iframe Materialize e helper
      const materializeIframe = document.getElementById('materialize-demo');
      const sendToBootstrapIframe = (msg) => {
        try {
          if (bootstrapIframe && bootstrapIframe.contentWindow) {
            bootstrapIframe.contentWindow.postMessage(msg, '*');
          }
        } catch (e) { /* no-op */ }
      };
      const sendToMaterializeIframe = (msg) => {
        try {
          if (materializeIframe && materializeIframe.contentWindow) {
            materializeIframe.contentWindow.postMessage(msg, '*');
          }
        } catch (e) { /* no-op */ }
      };
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      const savedTheme = localStorage.getItem('theme');
      const isDark = savedTheme ? savedTheme === 'dark' : prefersDark;
      const applyTheme = (dark) => {
        root.classList.toggle('dark', dark);
        document.querySelectorAll('.theme-toggle').forEach(btn => {
          btn.setAttribute('aria-pressed', String(dark));
          const moon = btn.querySelector('.moon-icon');
          const sun = btn.querySelector('.sun-icon');
          if (moon && sun) {
            if (dark) { moon.classList.add('hidden'); sun.classList.remove('hidden'); }
            else { sun.classList.add('hidden'); moon.classList.remove('hidden'); }
          }
        });
        localStorage.setItem('theme', dark ? 'dark' : 'light');
        // Propaga cambio tema agli iframe
        const themeVal = dark ? 'dark' : 'light';
        sendToBootstrapIframe({ type: 'theme', value: themeVal });
        sendToMaterializeIframe({ type: 'theme', value: themeVal });
      };
      applyTheme(isDark);
      document.querySelectorAll('.theme-toggle').forEach(btn => {
        btn.addEventListener('click', () => applyTheme(!root.classList.contains('dark')));
      });

      // Invio iniziale di tema/lingua quando gli iframe sono pronti
      if (bootstrapIframe) {
        bootstrapIframe.addEventListener('load', () => {
          const currentTheme = root.classList.contains('dark') ? 'dark' : 'light';
          const currentLang = document.documentElement.getAttribute('lang') || 'it';
          sendToBootstrapIframe({ type: 'theme', value: currentTheme });
          sendToBootstrapIframe({ type: 'lang', value: currentLang });
        });
      }
      if (materializeIframe) {
        materializeIframe.addEventListener('load', () => {
          const currentTheme = root.classList.contains('dark') ? 'dark' : 'light';
          const currentLang = document.documentElement.getAttribute('lang') || 'it';
          sendToMaterializeIframe({ type: 'theme', value: currentTheme });
          sendToMaterializeIframe({ type: 'lang', value: currentLang });
        });
      }

      const menuBtn = document.getElementById('menu-btn');
      const menuDesktop = document.getElementById('menu');
      const menuMobile = document.getElementById('menu-mobile');
      const closeMobileMenu = () => {
        if (!menuMobile) return;
        // animazione di chiusura leggera prima di nascondere
        menuMobile.classList.remove('open');
        menuMobile.classList.add('closing');
        menuBtn?.setAttribute('aria-expanded', 'false');
        menuMobile.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
        try { window.resumeParticles?.(); } catch(e){}
        setTimeout(() => {
          menuMobile.classList.add('hidden');
          menuMobile.classList.remove('closing');
        }, 220);
      };
      const openMobileMenu = () => {
        if (!menuMobile) return;
        menuMobile.classList.remove('hidden');
        // assicura stato iniziale per transizione
        requestAnimationFrame(() => {
          menuMobile.classList.add('open');
        });
        menuBtn?.setAttribute('aria-expanded', 'true');
        menuMobile.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
        try { window.pauseParticles?.(); } catch(e){}
        // focus primo elemento interattivo
        const focusable = menuMobile.querySelector('button, a, input, select, textarea, [tabindex]:not([tabindex="-1"])');
        if (focusable && focusable.focus) { focusable.focus(); }
      };
      if (menuBtn && menuMobile) {
        menuBtn.addEventListener('click', function () {
          const isHidden = menuMobile.classList.contains('hidden');
          if (isHidden) openMobileMenu(); else closeMobileMenu();
        });
        // chiudi su click fuori
        document.addEventListener('click', function (ev) {
          const nav = document.getElementById('site-nav');
          if (!nav) return;
          const isOpen = !menuMobile.classList.contains('hidden');
          if (!isOpen) return;
          if (!nav.contains(ev.target)) {
            closeMobileMenu();
          }
        });
        // chiudi su ESC
        document.addEventListener('keydown', function (ev) {
          if (ev.key === 'Escape') {
            const isOpen = !menuMobile.classList.contains('hidden');
            if (isOpen) closeMobileMenu();
          }
        });
        // chiudi quando si clicca qualcosa dentro
        menuMobile.addEventListener('click', function (ev) {
          const target = ev.target;
          if (target && (target.tagName === 'A' || target.tagName === 'BUTTON')) {
            closeMobileMenu();
          }
        });
      }

      const options = { threshold: 0.15 };
      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const delay = entry.target.getAttribute('data-delay');
            if (delay) entry.target.style.animationDelay = delay;
            entry.target.classList.add('opacity-100', 'translate-y-0');
            entry.target.classList.remove('opacity-0', 'translate-y-6');
            entry.target.classList.add('motion-safe:animate-reveal-up');
            observer.unobserve(entry.target);
          }
        });
      }, options);
      document.querySelectorAll('[data-reveal]').forEach((el) => observer.observe(el));

      // Modal demo
      const openModal = document.getElementById('open-modal');
      const closeModal = document.getElementById('close-modal');
      const modal = document.getElementById('modal');
      const overlay = document.getElementById('modal-overlay');
      const toggleModal = (show) => {
        if (!modal) return;
        modal.classList.toggle('hidden', !show);
        modal.classList.toggle('flex', show);
      };
      if (openModal) openModal.addEventListener('click', () => toggleModal(true));
      if (closeModal) closeModal.addEventListener('click', () => toggleModal(false));
      if (overlay) overlay.addEventListener('click', () => toggleModal(false));

      // Gamification: XP/Badge e titoli cliccabili
      const hudEl = document.getElementById('gamify-hud');
      const xpEl = document.getElementById('xp-count');
      const badgeEl = document.getElementById('badge-count');
      const xpElMobile = document.getElementById('xp-count-mobile');
      const badgeElMobile = document.getElementById('badge-count-mobile');
      const toastContainer = document.getElementById('toast-container');
      const badgeOverlay = document.getElementById('badge-overlay');
      const badgeBackdrop = document.getElementById('badge-backdrop');
      const badgeCloseBtn = document.getElementById('badge-close');
      const badgeListEl = document.getElementById('badge-list');
      const ACHIEVEMENTS = [
        { threshold: 3, name: 'Esploratore', desc: 'Hai iniziato ad esplorare il CV.' },
        { threshold: 7, name: 'Esperto', desc: 'Hai approfondito molte sezioni.' },
        { threshold: 12, name: 'Maestro', desc: 'Hai provato quasi tutto.' },
        { threshold: 25, name: 'Curioso', desc: 'Hai cliccato su molte sezioni.' },
        { threshold: 50, name: 'Instancabile', desc: 'Non ti fermi mai: grande costanza.' },
        { threshold: 100, name: 'Veterano', desc: 'Hai esplorato a fondo ogni parte.' },
        { threshold: 250, name: 'Leggenda', desc: 'Impegno epico nel tour del CV.' },
        { threshold: 500, name: 'Mitico', desc: 'Hai raggiunto un traguardo altissimo.' },
        { threshold: 1000, name: 'Immortale', desc: 'Hai portato lâ€™XP al massimo livello.' },
      ];
      let xp = parseInt(localStorage.getItem('xp') || '0', 10);
      let badges = [];
      try { badges = JSON.parse(localStorage.getItem('badges') || '[]'); } catch (e) { badges = []; }
      let secretClicks = parseInt(localStorage.getItem('secretClicks') || '0', 10);
      // Sezioni visitate: memorizzazione e applicazione stile
      let visitedSections = [];
      try { visitedSections = JSON.parse(localStorage.getItem('visitedSections') || '[]'); } catch (e) { visitedSections = []; }
      // Titoli visitati (H2/H3, spesso con <span data-i18n>): persistenza e badge
      let visitedTitles = [];
      try { visitedTitles = JSON.parse(localStorage.getItem('visitedTitles') || '[]'); } catch (e) { visitedTitles = []; }

      const applyPersistentBadgeEffects = () => {
        let effects = {};
        try { effects = JSON.parse(localStorage.getItem('badgeEffectsDone') || '{}'); } catch(e) { effects = {}; }
        if (effects['Leggenda']) {
          const gate = document.querySelector('[data-badge-gate="Leggenda"]');
          if (gate) gate.classList.remove('hidden');
        }
        if (effects['Segreto']) {
          document.body.classList.add('egg-active');
        }
        if (effects['Debugger']) {
          try { localStorage.setItem('devMode','1'); } catch(e){}
        }
      };
      applyPersistentBadgeEffects();

      const getTitleKey = (el) => {
        if (!el) return null;
        const selfKey = el.getAttribute && el.getAttribute('data-i18n');
        if (selfKey) return `i18n:${selfKey}`;
        const span = el.querySelector && el.querySelector('[data-i18n]');
        if (span) return `i18n:${span.getAttribute('data-i18n')}`;
        const id = el.getAttribute && el.getAttribute('id');
        if (id) return `id:${id}`;
        const txt = (el.textContent || '').trim().toLowerCase();
        return txt ? `txt:${txt}` : null;
      };

      const ensureTitleBadge = (el) => {
        if (!el) return;
        // Preferisci inserire la stella dentro lo span data-i18n, altrimenti nell'heading
        const target = el.querySelector('[data-i18n]') || el;
        // Evita duplicati: se l'heading ha giÃ  una stella, non aggiungere
        if (el.querySelector('.visited-badge')) return;
        const badge = document.createElement('span');
        badge.className = 'visited-badge';
        badge.setAttribute('aria-hidden', 'true');
        badge.innerHTML = '<svg class="visited-star" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg>';
        target.appendChild(badge);
      };
      const ensureVisitedBadge = (sec) => {
        if (!sec) return;
        // Punta sempre al titolo della sezione (H2/H3) e al suo span data-i18n se presente
        const titleEl = sec.querySelector('h2, h3');
        const preferred = (titleEl && (titleEl.querySelector('[data-i18n]') || titleEl)) || sec;
        // Se esiste giÃ  una stella nella sezione (ovunque), non aggiungere
        if (sec.querySelector('.visited-badge')) return;
        const badge = document.createElement('span');
        badge.className = 'visited-badge';
        badge.setAttribute('aria-hidden', 'true');
        badge.innerHTML = '<svg class="visited-star" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg>';
        preferred.appendChild(badge);
      };
      const applyVisitedStyles = () => {
        visitedSections.forEach(id => {
          const sec = document.getElementById(id);
          if (sec) {
            sec.classList.add('section-visited');
            ensureVisitedBadge(sec);
          }
        });
        // Applica badge anche ai titoli visitati
        const headings = Array.from(document.querySelectorAll('h2, h3'));
        headings.forEach(h => {
          const key = getTitleKey(h);
          if (key && visitedTitles.includes(key)) ensureTitleBadge(h);
        });
      };
      applyVisitedStyles();
      // FX control removed
      const lang = ((localStorage.getItem('langOverride') || navigator.language || 'it').slice(0,2) || 'it').toLowerCase();
      let L = ['it','en'].includes(lang) ? lang : 'it';
      document.documentElement.setAttribute('lang', L);
      const LABELS = { it: 'Segreto', en: 'Secret' };
      const SECRET_HINTS = {
        it: [
          'Apri DevTools (F12) e digita cvGame.help() ðŸ¤“',
          'Usa cvGame.progress() per vedere XP e badge',
          'Il codice Ã¨ una parolaâ€¦',
          'â€¦ legata al nome del CV',
          'Tutto minuscolo',
          'Nessuno spazio',
          'Inizia con â€œmâ€',
          'Finisce con â€œoâ€',
          'Sono 5 lettere',
          'mauro'
        ],
        en: [
          'Open DevTools (F12) and type cvGame.help() ðŸ¤“',
          'Use cvGame.progress() to see XP and badges',
          'The code is a wordâ€¦',
          'â€¦ tied to the name of the CV',
          'All lowercase',
          'No spaces',
          'Starts with â€œmâ€',
          'Ends with â€œoâ€',
          'Has 5 letters',
          'mauro'
        ]
      };

      const xpProgressEl = document.getElementById('xp-progress');
      const xpBarFillEl = document.getElementById('xp-bar-fill');
      const xpBarFillElMobile = document.getElementById('xp-bar-fill-mobile');
      const thresholds = ACHIEVEMENTS.map(a => a.threshold).sort((a,b)=>a-b);
      const getProgressStr = () => {
        const next = thresholds.find(t => xp < t);
        const prev = thresholds.reduce((acc, t) => t <= xp ? t : acc, 0);
        if (!next) return 'Max';
        const current = xp - prev;
        const need = next - prev;
        return `${current}/${need}`;
      };
      const updateHUD = () => {
        if (xpEl) xpEl.textContent = String(xp);
        if (xpElMobile) xpElMobile.textContent = String(xp);
        if (badgeEl) badgeEl.textContent = String(badges.length);
        if (badgeElMobile) badgeElMobile.textContent = String(badges.length);
        if (xpProgressEl) xpProgressEl.textContent = `(${getProgressStr()})`;
        if (hudEl) hudEl.classList.remove('hidden');

        // Barra di progresso e tooltip XP al prossimo badge
        const nextBadge = thresholds.find(t => xp < t);
        const prevBadge = thresholds.reduce((acc, t) => t <= xp ? t : acc, 0);
        let pct = 100;
        if (nextBadge) {
          const current = Math.max(0, xp - prevBadge);
          const need = Math.max(1, nextBadge - prevBadge);
          pct = Math.min(100, Math.round((current / need) * 100));
        }
        if (xpBarFillEl) xpBarFillEl.style.width = `${pct}%`;
        if (xpBarFillElMobile) xpBarFillElMobile.style.width = `${pct}%`;
        if (hudEl) hudEl.setAttribute('title', nextBadge ? t('hud_tooltip_next', {remaining: Math.max(0, nextBadge - xp)}) : t('hud_tooltip_all'));

        // FX UI state removed
      };


      const showToast = (message) => {
        // In modalitÃ  CV, evitiamo toast per massima staticitÃ 
        if (document.documentElement.classList.contains('cv-mode')) return;
        if (!toastContainer) return;
        const t = document.createElement('div');
        t.className = 'transition opacity-0 translate-y-2 px-3 py-2 rounded shadow bg-white text-gray-800 border border-gray-200 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700';
        t.textContent = message;
        toastContainer.appendChild(t);
        requestAnimationFrame(() => {
          t.classList.add('opacity-100');
          t.classList.remove('opacity-0');
          t.classList.add('translate-y-0');
          t.classList.remove('translate-y-2');
        });
        setTimeout(() => {
          t.classList.add('opacity-0');
          t.classList.remove('opacity-100');
          setTimeout(() => t.remove(), 300);
        }, 1800);
      };

      const BADGE_ICONS = {
        'Esploratore': 'ðŸ§­',
        'Esperto': 'ðŸ’¡',
        'Maestro': 'ðŸ†',
        'Curioso': 'ðŸ”',
        'Instancabile': 'ðŸ”¥',
        'Veterano': 'â­',
        'Leggenda': 'ðŸŒŸ',
        'Mitico': 'ðŸ’Ž',
        'Immortale': 'ðŸ‘‘',
        'Segreto': 'ðŸ”“'
      };

      const BADGE_DESC_EXTRA = {
        'Segreto': 'Hai scoperto un easter egg cliccando il logo!'
      };

      const renderBadges = () => {
        if (!badgeListEl) return;
        badgeListEl.innerHTML = '';
        if (!badges.length) {
          const li = document.createElement('li');
          li.className = 'text-sm text-gray-600 dark:text-gray-300';
          li.textContent = t('overlay_no_badge');
          badgeListEl.appendChild(li);
          return;
        }
        const BADGE_RARITY = {
          'Esploratore': 'comune',
          'Curioso': 'comune',
          'Esperto': 'raro',
          'Instancabile': 'raro',
          'Maestro': 'epico',
          'Veterano': 'epico',
          'Leggenda': 'leggendario',
          'Mitico': 'mitico',
          'Immortale': 'mitico',
          'Segreto': 'segreto',
          'Debugger': 'raro'
        };
        const RARITY_CLASS = {
          'comune': 'border-gray-300 dark:border-gray-700',
          'raro': 'border-blue-300 dark:border-blue-400',
          'epico': 'border-purple-300 dark:border-purple-400',
          'leggendario': 'border-amber-300 dark:border-amber-400',
          'mitico': 'border-emerald-300 dark:border-emerald-400',
          'segreto': 'border-pink-300 dark:border-pink-400 ring-1 ring-pink-300/50'
        };
        const playBadgeAnimation = (name, el) => {
          const durMap = {
            'Esploratore': 1.2, 'Curioso': 1.2, 'Esperto': 1.4, 'Instancabile': 1.0,
            'Maestro': 1.8, 'Veterano': 1.5, 'Leggenda': 2.0, 'Mitico': 2.5,
            'Immortale': 2.2, 'Segreto': 1.3, 'Debugger': 1.6
          };
          const DURATION = durMap[name] || 1.2;
          if (window.gsap) {
            const tl = gsap.timeline({ defaults: { ease: 'power2.out' } });
            switch(name){
              case 'Esploratore': tl.fromTo(el, { scale: 1 }, { scale: 1.06, duration: 0.6 }).to(el, { scale: 1, duration: 0.6 }); break;
              case 'Curioso': tl.fromTo(el, { filter: 'brightness(1)' }, { filter: 'brightness(1.25)', duration: 0.6 }).to(el, { filter: 'brightness(1)', duration: 0.6 }); break;
              case 'Esperto': tl.fromTo(el, { y: 0 }, { y: -6, duration: 0.7 }).to(el, { y: 0, duration: 0.7 }); break;
              case 'Instancabile': tl.to(el, { x: 6, duration: 0.1 }).to(el, { x: -6, duration: 0.1 }).to(el, { x: 0, duration: 0.2 }); break;
              case 'Maestro': tl.fromTo(el, { boxShadow: '0 0 0 rgba(0,0,0,0)' }, { boxShadow: '0 0 30px rgba(99,102,241,0.45)', duration: 0.9 }).to(el, { boxShadow: '0 0 0 rgba(0,0,0,0)', duration: 0.9 }); break;
              case 'Veterano': tl.fromTo(el, { borderColor: '#ddd' }, { borderColor: '#eab308', duration: 0.8 }).to(el, { borderColor: '#ddd', duration: 0.7 }); break;
              case 'Leggenda': tl.fromTo(el, { rotate: 0 }, { rotate: 1.5, duration: 0.9 }).to(el, { rotate: 0, duration: 1.1 }); break;
              case 'Mitico': tl.fromTo(el, { scale: 1, filter: 'saturate(1)' }, { scale: 1.08, filter: 'saturate(1.25)', duration: 1.2 }).to(el, { scale: 1, filter: 'saturate(1)', duration: 1.3 }); break;
              case 'Immortale': tl.fromTo(el, { opacity: 1 }, { opacity: 0.75, duration: 1.1 }).to(el, { opacity: 1, duration: 1.1 }); break;
              case 'Segreto': tl.fromTo(el, { skewX: 0 }, { skewX: 8, duration: 0.6 }).to(el, { skewX: 0, duration: 0.7 }); break;
              case 'Debugger': tl.fromTo(el, { y: 0 }, { y: -2, duration: 0.3 }).to(el, { y: 0, duration: 0.3 }).to(el, { y: -2, duration: 0.3 }).to(el, { y: 0, duration: 0.3 }); break;
              default: tl.to(el, { scale: 1.03, duration: 0.6 }).to(el, { scale: 1, duration: 0.6 });
            }
            return new Promise(res => tl.eventCallback('onComplete', res));
          }
          el.classList.add('animate-pulse');
          return new Promise(res => setTimeout(() => { el.classList.remove('animate-pulse'); res(); }, Math.min(Math.max(DURATION,1),3)*1000));
        };
        const revealGateForBadge = (name) => {
          const gate = document.querySelector(`[data-badge-gate="${name}"]`);
          if (gate) gate.classList.remove('hidden');
        };
        const BADGE_ACTIONS = {
          'Leggenda': () => { revealGateForBadge('Leggenda'); showToast(`ðŸŒŸ ${t('badge_action_unlocked_content')}`); },
          'Maestro': () => { showToast(`ðŸ† ${t('badge_action_special_message')}`); },
          'Segreto': () => { document.body.classList.add('egg-active'); showToast(`ðŸ«£ ${t('badge_action_hidden_feature')}`); },
          'Debugger': () => { try { localStorage.setItem('devMode','1'); } catch(e){} showToast(`ðŸ› ï¸ ${t('badge_action_state_updated')}`); },
        };
        const badgeEffectsDone = JSON.parse(localStorage.getItem('badgeEffectsDone') || '{}');
        badges.forEach((b) => {
          const li = document.createElement('li');
          const rarity = BADGE_RARITY[b] || 'comune';
          const rarityClass = RARITY_CLASS[rarity] || RARITY_CLASS['comune'];
          li.className = `flex items-start gap-2 px-3 py-2 rounded border bg-white/70 dark:bg-gray-800 ${rarityClass}`;
          const icon = document.createElement('span');
          icon.textContent = BADGE_ICONS[b] || 'ðŸŽ–ï¸';
          const nameRow = document.createElement('div');
          nameRow.className = 'flex items-center gap-2';
          const name = document.createElement('span');
          name.textContent = (T[L]?.badge_labels?.[b] || b);
          name.className = 'font-medium';
          const rarityTag = document.createElement('span');
          const rarityLabel = (T[L]?.rarity_map?.[rarity] || rarity);
          rarityTag.textContent = rarityLabel;
          rarityTag.className = 'text-[10px] uppercase tracking-wide px-1.5 py-0.5 rounded bg-gray-100 dark:bg-gray-700';
          const meta = ACHIEVEMENTS.find(a => a.name === b);
          const desc = document.createElement('span');
          desc.className = 'text-xs text-gray-600 dark:text-gray-300';
          const localizedDesc = (T[L]?.achievement_desc?.[b]) || (T[L]?.badge_desc_extra?.[b]) || (meta ? meta.desc : '');
          desc.textContent = localizedDesc;
          const col = document.createElement('div');
          col.className = 'flex flex-col';
          nameRow.append(name, rarityTag);
          col.append(nameRow, desc);
          li.append(icon, col);
          li.dataset.badgeName = b;
          li.setAttribute('role','button');
          li.setAttribute('tabindex','0');
          li.addEventListener('click', async () => {
            await playBadgeAnimation(b, li);
            try { (BADGE_ACTIONS[b]||(()=>{}))(); } catch(e){}
            badgeEffectsDone[b] = true;
            try { localStorage.setItem('badgeEffectsDone', JSON.stringify(badgeEffectsDone)); } catch(e){}
          });
          li.addEventListener('keydown', async (ev) => { if (ev.key==='Enter' || ev.key===' ') { ev.preventDefault(); li.click(); } });
          badgeListEl.appendChild(li);
        });
      };

      const toggleBadgeOverlay = (show) => {
        if (!badgeOverlay) return;
        badgeOverlay.classList.toggle('hidden', !show);
        badgeOverlay.classList.toggle('flex', show);
        if (show) renderBadges();
      };

      const launchConfetti = () => {
        // In modalitÃ  CV, disattiva confetti per performance
        if (document.documentElement.classList.contains('cv-mode')) return;
        const colors = ['#1065ff', '#34d399', '#f59e0b', '#ef4444', '#a855f7'];
        const count = 24;
        for (let i = 0; i < count; i++) {
          const c = document.createElement('span');
          const size = Math.floor(Math.random() * 8) + 6;
          c.style.position = 'fixed';
          c.style.zIndex = '60';
          c.style.top = `${Math.floor(Math.random() * 20) + 10}px`;
          c.style.left = `${Math.floor(Math.random() * 100)}vw`;
          c.style.width = `${size}px`;
          c.style.height = `${size}px`;
          c.style.background = colors[Math.floor(Math.random() * colors.length)];
          c.style.transform = 'translateY(0) rotate(0deg)';
          c.style.opacity = '1';
          c.style.borderRadius = '2px';
          c.style.transition = 'transform 900ms ease-out, opacity 900ms ease-out';
          document.body.appendChild(c);
          requestAnimationFrame(() => {
            const fall = Math.floor(Math.random() * 60) + 40; // vh
            const rot = Math.floor(Math.random() * 180) - 90;
            c.style.transform = `translateY(${fall}vh) rotate(${rot}deg)`;
            c.style.opacity = '0';
          });
          setTimeout(() => c.remove(), 1000);
        }
      };

      const checkAchievements = () => {
        ACHIEVEMENTS.forEach((a) => {
          if (xp >= a.threshold && !badges.includes(a.name)) {
            badges.push(a.name);
            localStorage.setItem('badges', JSON.stringify(badges));
            showToast(`ðŸ… ${t('toast_badge_unlocked', {name: (T[L]?.badge_labels?.[a.name] || a.name)})}`);
            launchConfetti();
          }
        });
      };

      const applyClickableHeadings = () => {
        document.querySelectorAll('h2, h3').forEach((el) => {
          el.setAttribute('role', 'button');
          el.setAttribute('tabindex', '0');
          el.classList.add('cursor-pointer', 'select-none', 'active:scale-95', 'focus:outline-none', 'focus-visible:ring-2', 'focus-visible:ring-brand');
          const title = (el.textContent || '').trim();
          const handleAction = () => {
            // Evita gamification in modalitÃ  CV per unâ€™esperienza statica
            if (document.documentElement.classList.contains('cv-mode')) return;
            // Calcolo XP basato sulla profonditÃ  del titolo nella pagina
            const base = el.tagName === 'H2' ? 2 : 1;
            const rect = el.getBoundingClientRect();
            const elTop = rect.top + window.scrollY;
            const docH = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight);
            const ratio = Math.min(1, Math.max(0, elTop / docH));
            const depthBonus = Math.round(ratio * 8); // 0..8
            const points = Math.max(base, Math.min(10, base + depthBonus));
            xp += points;
            localStorage.setItem('xp', String(xp));
            showToast(`ðŸŽ‰ ${t('toast_xp_plus', {points, title})}`);
            el.classList.add('click-anim');
            setTimeout(() => el.classList.remove('click-anim'), 220);
            // Marca la sezione come visitata quando si ottiene XP
            const sec = el.closest('section');
            if (sec) {
              sec.classList.add('section-visited');
              ensureVisitedBadge(sec);
              const id = sec.getAttribute('id');
              if (id && !visitedSections.includes(id)) {
                visitedSections.push(id);
                try { localStorage.setItem('visitedSections', JSON.stringify(visitedSections)); } catch (e) {}
              }
            }
            // Aggiungi stellina anche al titolo cliccato (H2/H3 con span)
            ensureTitleBadge(el);
            const k = getTitleKey(el);
            if (k && !visitedTitles.includes(k)) {
              visitedTitles.push(k);
              try { localStorage.setItem('visitedTitles', JSON.stringify(visitedTitles)); } catch (e) {}
            }
            checkAchievements();
            updateHUD();
          };
          el.addEventListener('click', handleAction);
          el.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              handleAction();
            }
          });
        });
      };

      // Tracking clic demo per EXP bonus e badge curiositÃ /grafica
      const setupDemoXpTracking = () => {
        const saveSet = (key, set) => {
          try { localStorage.setItem(key, JSON.stringify(Array.from(set))); } catch (e) {}
        };
        const loadSet = (key) => {
          try {
            const v = localStorage.getItem(key);
            return v ? new Set(JSON.parse(v)) : new Set();
          } catch (e) { return new Set(); }
        };
        const awardOnce = (flagKey, awardFn) => {
          if (localStorage.getItem(flagKey) === '1') return false;
          awardFn();
          localStorage.setItem(flagKey, '1');
          return true;
        };
        const unlockBadge = (name) => {
          if (!badges.includes(name)) {
            badges.push(name);
            localStorage.setItem('badges', JSON.stringify(badges));
            showToast(`ðŸ… ${t('toast_badge_unlocked', {name: (T[L]?.badge_labels?.[name] || name)})}`);
            launchConfetti();
            updateHUD();
          }
        };
        const registerClick = (groupKey, id, expectedIds, bonusXp, badgeName) => {
          const s = loadSet(groupKey);
          s.add(id);
          saveSet(groupKey, s);
          // Badge per prima curiositÃ  nel gruppo
          if (badgeName) {
            awardOnce(`${groupKey}_badge_awarded`, () => unlockBadge(badgeName));
          }
          if (expectedIds.every(x => s.has(x))) {
            awardOnce(`${groupKey}_bonus_awarded`, () => {
              xp += bonusXp;
              localStorage.setItem('xp', String(xp));
              showToast(`ðŸŽ‰ ${t('toast_xp_plus', {points: bonusXp, title: `${groupKey} demo complete`})}`);
              checkAchievements();
              updateHUD();
            });
          }
        };

        // jQuery demo buttons
        const jqIds = ['jq-show','jq-hide','jq-toggle','jq-fade','jq-slide','jq-animate','jq-fadeto','jq-bounce','jq-highlight','jq-pulse','jq-stop','jq-reset'];
        jqIds.forEach((id) => {
          const el = document.getElementById(id);
          if (el) el.addEventListener('click', () => registerClick('demoClicks_jq', id, jqIds, 100, 'Curioso'));
        });

        // GSAP demo buttons
        const gsapIds = ['gsap-play','gsap-pause','gsap-resume','gsap-restart','gsap-stagger','gsap-spin','gsap-bounce'];
        gsapIds.forEach((id) => {
          const el = document.getElementById(id);
          if (el) el.addEventListener('click', () => registerClick('demoClicks_gsap', id, gsapIds, 100, 'Curioso'));
        });

        // Three.js demo buttons
        const threeIds = ['threejs-start','threejs-stop','threejs-spin','threejs-reset','threejs-autorotate','threejs-wireframe','threejs-solid','threejs-lights'];
        threeIds.forEach((id) => {
          const el = document.getElementById(id);
          if (el) el.addEventListener('click', () => registerClick('demoClicks_threejs', id, threeIds, 100, 'Esperto'));
        });

        // Bootstrap iframe demo â€” ricevi eventi dai pulsanti interni
        window.addEventListener('message', (e) => {
          const msg = e.data || {};
          if (msg && msg.type === 'bootstrap_demo_click' && msg.id) {
            const bsIds = ['collapseBtn','alertBtn','toastBtn','modalBtn','offcanvasBtn'];
            registerClick('demoClicks_bootstrap', msg.id, bsIds, 100, 'Curioso');
          }
        });
      };

      applyClickableHeadings();
      setupDemoXpTracking();

      // Animazione di click globale simile allâ€™effetto degli h3
      // Applica una micro-animazione a elementi interattivi
      document.addEventListener('click', (e) => {
        // Disabilita micro-animazioni in modalitÃ  CV
        if (document.documentElement.classList.contains('cv-mode')) return;
        const el = e.target.closest('h1, h2, h3, h4, h5, h6, a, button, [role="button"], .theme-toggle, #gamify-hud');
        if (!el) return;
        el.classList.add('click-anim');
        setTimeout(() => el.classList.remove('click-anim'), 220);
      });

      // Badge segreto: 10 clic sul logo (navbar o avatar hero)
      const logoLink = document.querySelector('nav a[href="#home"]');
      const heroImg = document.querySelector('#home img');
      const incSecret = () => {
        secretClicks += 1;
        localStorage.setItem('secretClicks', String(secretClicks));
        const hintArr = SECRET_HINTS[L] || SECRET_HINTS['it'];
        const hint = hintArr[Math.min(secretClicks - 1, hintArr.length - 1)];
        if (hint) console.log(`%c[${LABELS[L]} ${secretClicks}/10]%c ${hint}`, 'color:#1065ff; font-weight:bold', '');
        if (secretClicks >= 10 && !badges.includes('Segreto')) {
          badges.push('Segreto');
          localStorage.setItem('badges', JSON.stringify(badges));
          const bonus = 10;
          xp += bonus;
          localStorage.setItem('xp', String(xp));
          showToast(`ðŸ«£ ${t('toast_secret_unlocked', {bonus})}`);
          launchConfetti();
          checkAchievements();
          updateHUD();
        }
      };
      if (logoLink) logoLink.addEventListener('click', incSecret);
      if (heroImg) heroImg.addEventListener('click', incSecret);

      // Mini-gioco per sviluppatori via console
      const T = {
        it: {
          helpTitle: 'Comandi disponibili:',
          helpProgress: '- cvGame.progress()  â†’ mostra XP, badge e segreto',
          helpSolve: '- cvGame.solve("mauro") â†’ risolvi lâ€™enigma e sblocca un badge',
          progressLabel: 'Segreto',
          nope: 'Nope! Suggerimento: prova a cliccare il logo e leggere i log.',
          welcome: 'Benvenuto Dev!',
          welcomeHelp: 'Digita cvGame.help() per iniziare.'
        },
        en: {
          helpTitle: 'Available commands:',
          helpProgress: '- cvGame.progress()  â†’ show XP, badges and secret',
          helpSolve: '- cvGame.solve("mauro") â†’ solve the riddle and unlock a badge',
          progressLabel: 'Secret',
          nope: 'Nope! Hint: click the logo and read the logs.',
          welcome: 'Welcome Dev!',
          welcomeHelp: 'Type cvGame.help() to get started.'
        }
      };
      // Estensione dizionario per UI
      Object.assign(T.it, {
        doc_title: 'Mauro Arnone | CV Interattivo',
        nav_about: 'Chi sono',
        nav_wordpress: 'WordPress',
        nav_php: 'PHP',
        nav_javascript: 'JavaScript',
        nav_css: 'CSS',
        nav_tailwind: 'Tailwind',
        nav_html: 'HTML',
        nav_database: 'Database',
        nav_projects: 'Progetti',
        cat_all: 'Tutto',
        cat_languages: 'Linguaggi',
        cat_frontend: 'Frontend',
        cat_cms: 'CMS',
        cat_database: 'Database',
        cat_frameworks: 'Frameworks & Librerie',
        cat_lang_frameworks: 'Linguaggi + Frameworks',
        cat_backend: 'Backend',
        cat_3d: '3D',
        skills_title: 'Competenze',
        skip_to_content: 'Salta al contenuto',
        menu_button_text: 'Menu',
        alt_logo: 'Logo',
        alt_profile_photo: 'Foto profilo di Mauro Arnone',
        hero_tagline: 'Web Developer â€¢ WordPress â€¢ PHP â€¢ JavaScript',
        cta_contact: 'Contattami',
        cta_linkedin: 'LinkedIn',
        cta_github: 'GitHub',
        about_title: 'Chi sono',
        about_intro: 'Sono uno sviluppatore web con esperienza in WordPress, PHP e JavaScript. Unisco competenza tecnica e visione strategica per trasformare idee in strumenti concreti, scalabili e orientati ai risultati. Questo progetto, realizzato con HTML, Tailwind e GitHub Pages, presenta competenze, esperienze e progetti in modo semplice, moderno e dâ€™impatto, offrendo una panoramica chiara, elegante e immediata del mio percorso professionale e delle mie capacitÃ .',
        skills_wordpress: 'WordPress',
        skills_photoshop: 'Photoshop',
        skills_canva: 'Canva',
        skills_substance_designer: 'Substance Designer',
        skills_quixel_mixer: 'Quixel Mixer',
        skills_php: 'PHP',
        skills_js: 'JavaScript',
        skills_jquery: 'jQuery',
        skills_html: 'HTML',
        skills_css_advanced: 'CSS avanzato',
        skills_tailwind: 'Tailwind CSS',
        skills_db_mysql: 'Database (MySQL)',
        skills_crm_automation: 'CRM & Automazioni',
        skills_seo_marketing: 'SEO & Marketing',
        skills_typescript: 'TypeScript',
        skills_react: 'React',
        skills_vue: 'Vue.js',
        skills_node: 'Node.js',
        skills_express: 'Express',
        skills_rest_api: 'API REST',
        
        skills_vite_webpack: 'Build (Vite/Webpack)',
        skills_git_github: 'Git & GitHub',
        skills_docker: 'Docker',
        skills_ci_cd: 'CI/CD',
        skills_testing_jest: 'Test (Jest)',
        skills_accessibility: 'AccessibilitÃ  (a11y)',
        skills_performance: 'Performance Web',
        skills_sass: 'SASS/SCSS',
        skills_laravel: 'Laravel',
        skills_woocommerce: 'WooCommerce',
        skills_elementor: 'Elementor',
        skills_bootstrap: 'Bootstrap',
        skills_materialize: 'Materialize',
        skills_gsap: 'GSAP',
        skills_threejs: 'Three.js',
        skills_3d_group_title: '3D & Grafica',
        skills_group_types_title: '3D & Grafica',
        skills_group_frameworks_title: 'Frameworks',
        skills_group_languages_title: 'Linguaggi',
        skills_group_software_title: 'Software',
        skills_group_other_title: 'Softwares',
        skills_group_alt_title: 'Altro',
        skills_3d_modeling: 'Modellazione 3D',
        skills_3d_rendering: 'Rendering 3D',
        skills_texture_painting: 'Texture Painting',
        skills_3d_models_printing: 'Modelli per stampa 3D',
        skills_3d_models_rendering: 'Modelli per rendering 3D',
        skills_3d_models_games: 'Modelli 3D per videogiochi',
        skills_webgl_webgpu: 'WebGL/WebGPU',
        skills_blender: 'Blender',
        skills_substance_painter: 'Substance Painter',
        skills_zbrush: 'ZBrush',
        skills_unity: 'Unity',
        skills_unreal_engine: 'Unreal Engine',
        skills_glsl: 'GLSL (Shader)',
        skills_server_linux_install: 'Installazione server Linux (Ubuntu/Debian)',
        skills_nginx_apache_config: 'Configurazione Nginx/Apache',
        skills_ssl_letsencrypt: "SSL/TLS & Let's Encrypt",
        skills_vps_provisioning: 'Provisioning VPS',
        
        skills_backup_restore: 'Backup & Restore',
        skills_monitoring_logging: 'Monitoraggio & Log',
        skills_security_firewall: 'Sicurezza & Firewall (ufw/fail2ban)',
        skills_db_admin_mysql_postgres: 'Admin DB (MySQL/PostgreSQL)',
        skills_db_tuning_indexing: 'Tuning & Indexing',
        skills_db_replication_migration: 'Replica & Migrazioni',
        hud_xp_label: 'XP',
        hud_badge_label: 'Badge',
        hud_tooltip_next: 'XP al prossimo badge: {{remaining}}',
        hud_tooltip_all: 'Hai sbloccato tutti i badge',
        overlay_title: 'Badge',
        overlay_close: 'Chiudi',
        overlay_desc: 'Clicca i titoli del CV per guadagnare XP e sbloccare badge.',
        overlay_no_badge: 'Nessun badge ancora. Prova a cliccare un titolo!',
        aria_theme_toggle: 'Cambia tema',
        aria_main_nav: 'Navigazione principale',
        aria_page_nav: 'Navigazione di pagina',
        aria_header_landmark: 'Intestazione',
        aria_main_landmark: 'Contenuto principale',
        aria_footer_landmark: 'PiÃ¨ di pagina',
        quick_actions_title: 'FunzionalitÃ  rapide',
        qa_scroll_top: 'Torna su',
        qa_copy_email: 'Copia email',
        qa_open_badges: 'Apri badge',
        toast_copied: 'Copiato negli appunti',
        theme_button_text: 'Tema',
        toast_xp_plus: '+{{points}} XP: {{title}}',
        toast_badge_unlocked: 'Badge sbloccato: {{name}}',
        toast_secret_unlocked: 'Badge sbloccato: Segreto (+{{bonus}} XP)',
        toast_dev_bonus: 'Bonus Dev: +{{bonus}} XP',
        toast_debugger_unlocked: 'Badge sbloccato: Debugger',
        badge_action_unlocked_content: 'Contenuto sbloccato',
        badge_action_special_message: 'Messaggio speciale mostrato',
        badge_action_hidden_feature: 'FunzionalitÃ  nascosta attivata',
        badge_action_state_updated: 'Stato progetto aggiornato',
        rarity_map: { comune: 'Comune', raro: 'Raro', epico: 'Epico', leggendario: 'Leggendario', mitico: 'Mitico', segreto: 'Segreto' },
        badge_labels: { 'Segreto': 'Segreto', 'Debugger': 'Debugger', 'Esploratore': 'Esploratore', 'Curioso':'Curioso', 'Esperto':'Esperto', 'Instancabile':'Instancabile', 'Maestro':'Maestro', 'Veterano':'Veterano', 'Leggenda':'Leggenda', 'Mitico':'Mitico', 'Immortale':'Immortale' },
        badge_desc_extra: { 'Segreto': 'Hai scoperto un easter egg cliccando il logo!' },
        achievement_desc: {
          'Esploratore': 'Hai iniziato ad esplorare il CV.',
          'Esperto': 'Hai approfondito molte sezioni.',
          'Maestro': 'Hai provato quasi tutto.',
          'Curioso': 'Hai cliccato su molte sezioni.',
          'Instancabile': 'Non ti fermi mai: grande costanza.',
          'Veterano': 'Hai esplorato a fondo ogni parte.',
          'Leggenda': 'Impegno epico nel tour del CV.',
          'Mitico': 'Hai raggiunto un traguardo altissimo.',
          'Immortale': 'Hai portato lâ€™XP al massimo livello.',
          'Debugger': 'Hai risolto lâ€™enigma via console.'
        },
        // Sezioni dettagliate
        wp_dev_title: 'Sviluppo Plugin e Temi',
        wp_dev_desc: 'Best practice, sicurezza, hooks e custom post types. Pubblicazioni su wordpress.org.',
        wp_dev_link: 'Esempio plugin',
        wp_perf_title: 'Performance & SEO',
        wp_perf_desc: 'Ottimizzazioni LCP, caching, immagini e struttura HTML semantica con schema.org.',
        php_arch_title: 'Architettura & OOP',
        php_arch_desc: 'Pattern, organizzazione codice, sicurezza input/output, integrazione con WordPress.',
        php_api_title: 'API & integrazioni',
        php_api_desc: 'REST, webhook, automazioni CRM e servizi terzi.',
        js_title: 'âš¡ JavaScript',
        js_interactivity_title: 'InterattivitÃ  & UX',
        js_interactivity_desc: 'Esperienze fluide, animazioni, gestione stato lato client, integrazione editor WP.',
        js_fetch_title: 'Fetch & Async',
        js_fetch_desc: 'Richieste asincrone, error handling, progressive enhancement.',
        js_ajax_title: 'AJAX & API',
        js_ajax_desc: 'Richieste AJAX con fetch/XHR, caching lato client, gestione CORS.',
        js_debug_title: 'Log & Debug avanzato',
        js_debug_desc: 'Console strutturata, livelli di log, tracciamento errori, profiling performance.',
        js_libs_title: 'Librerie & Frameworks',
        js_libs_desc: 'three.js per 3D/WebGL, jQuery per DOM, GSAP per animazioni.',
        css_title: 'ðŸŽ¨ CSS Avanzato',
        css_layout_title: 'Layout & Animazioni',
        css_layout_desc: 'Grid, flex, transizioni e animazioni complesse con performance ottimali.',
        css_design_system_desc: 'Componenti riutilizzabili, tipografia e palette coerenti.',
        css_frameworks_title: 'Frameworks CSS',
        css_frameworks_desc: 'Bootstrap e Materialize: grid, componenti UI, responsive e accessibilitÃ .',
        tailwind_title: 'ðŸŒ¬ï¸ Tailwind CSS',
        tailwind_utility_title: 'UI utility-first',
        tailwind_utility_desc: 'Componenti moderni, responsive mobile-first, stato hover/focus accessibile.',
        tailwind_build_title: 'Build & performance',
        tailwind_build_desc: 'Purge CSS, ottimizzazione production, riduzione CSS critico.',
        modal_open: 'Apri Modal Demo',
        modal_title: 'Demo Modal Tailwind',
        modal_desc: 'Esempio di componente UI con Tailwind e JavaScript minimale.',
        modal_close: 'Chiudi',
        html_title: 'ðŸ”¤ HTML Semantico',
        html_desc: 'Struttura semantica, accessibilitÃ , SEO tecnico e dati strutturati JSON-LD.',
        db_title: 'ðŸ—„ï¸ Database (MySQL)',
        db_model_title: 'Modellazione & Query',
        db_model_desc: 'Schema ottimizzato, normalizzazione, query complesse e indici.',
        db_migrate_title: 'Migrazioni & Sicurezza',
        db_migrate_desc: 'Backup, migrazioni, gestione permessi e protezione dati.',
        // Frameworks & API sections
        jquery_title: 'jQuery',
        jquery_desc: 'Selettori DOM, eventi, animazioni leggere e integrazioni AJAX.',
        jquery_demo_title: 'Demo animazioni jQuery',
        jquery_demo_show: 'Mostra',
        jquery_demo_hide: 'Nascondi',
        jquery_demo_toggle: 'Toggle',
        jquery_demo_fade: 'Fade',
        jquery_demo_slide: 'Slide',
        jquery_demo_animate: 'Anima',
        jquery_demo_fadeto: 'FadeTo 50%',
        jquery_demo_bounce: 'Bounce',
        jquery_demo_highlight: 'Highlight',
        jquery_demo_pulse: 'Pulse',
        jquery_demo_stop: 'Stop',
        jquery_demo_reset: 'Reset',
        jquery_demo_box_label: 'Box jQuery',
        gsap_title: 'GSAP',
        gsap_desc: 'Timeline, easing e animazioni performanti su canvas/DOM.',
        gsap_demo_title: 'Demo animazioni GSAP',
        gsap_demo_play: 'Play',
        gsap_demo_reverse: 'Reverse',
        gsap_demo_pause: 'Pausa',
        gsap_demo_resume: 'Riprendi',
        gsap_demo_restart: 'Restart',
        gsap_demo_box_label: 'Box GSAP',
        gsap_demo_yoyo: 'Yoyo',
        gsap_demo_stagger: 'Stagger',
        gsap_demo_dots_label: 'Gruppo box GSAP',
        threejs_title: 'Three.js',
        threejs_desc: 'Scene, camera, materiali e rendering WebGL/WebGPU.',
        threejs_demo_title: 'Demo Three.js (cubo)',
        threejs_demo_start: 'Avvia',
        threejs_demo_stop: 'Stop',
        threejs_demo_spin: 'Accelera',
        threejs_demo_reset: 'Reset',
        threejs_demo_canvas_label: 'Canvas Three.js',
        threejs_demo_autorotate: 'Autoâ€‘ruota',
        threejs_demo_wireframe: 'Wireframe',
        threejs_demo_solid: 'Solido',
        threejs_demo_lights: 'Luci dinamiche',
        bootstrap_title: 'Bootstrap',
        bootstrap_desc: 'Grid, componenti, responsive e utilitÃ  pronte allâ€™uso.',
        bootstrap_demo_title: 'Demo animazioni Bootstrap',
        materialize_title: 'Materialize',
        materialize_desc: 'UI Material Design, griglie, componenti e modali.',
        wp_title: 'WordPress',
        php_title: 'PHP',
        css_design_system_title: 'Design System',
        woocommerce_title: 'WooCommerce',
        woocommerce_desc: 'Eâ€‘commerce su WordPress: hook, checkout, integrazioni, performance e scalabilitÃ .',
        // WooCommerce - blocchi e dettagli
        woo_block_checkout_title: 'Checkout & UX',
        woo_block_catalog_title: 'Catalogo & Logica',
        woo_block_api_title: 'API & Integrazioni',
        woo_block_perf_title: 'Performance & ScalabilitÃ ',
        woo_checkout_item1: 'Campi personalizzati, step semplificati, upsell/crossâ€‘sell',
        woo_checkout_item2: 'Metodi di pagamento: Stripe, PayPal, carte, bonifici',
        woo_catalog_item1: 'Attributi, variabili, bundle, prodotti compositi',
        woo_catalog_item2: 'Regole prezzi, coupon, tassazioni e spedizioni',
        woo_api_item1: 'Webhooks, REST API, ERP/CRM, automazioni',
        woo_api_item2: 'Multiâ€‘lingua (WPML/Polylang) e multiâ€‘negozio',
        woo_perf_item1: 'Cache, query ottimizzate, lazy loading',
        woo_perf_item2: 'ScalabilitÃ  orizzontale e CDN',
        woo_toggle_show: 'Mostra dettagli',
        woo_toggle_hide: 'Nascondi dettagli',
        woo_details_title: 'Dettagli rapidi',
        woo_details_item1: 'Modifiche checkout con hook/filters e blocchi Gutenberg',
        woo_details_item2: 'Gestione spedizioni avanzate (tabelle, zone, corrieri)',
        woo_details_item3: 'Abbonamenti/Membership e email transazionali',
        woo_details_item4: 'Sincronizzazione prodotti via API (ERP/CRM)',
        woo_details_item5: 'Tracking eventi per analytics/ads',
        woo_details_item6: 'Hardening e conformitÃ  (GDPR)',
        // WooCommerce - esempio
        woo_example_title: 'Esempio hook Checkout',
        woo_example_desc: 'Aggiunta di un campo personalizzato al checkout usando i filtri di WooCommerce.',
        rest_title: 'API REST',
        rest_desc: 'Endpoint CRUD, autenticazione, fetch asincrono e integrazioni.',
        // REST - dettagli
        rest_details_title: 'Dettagli tecnici',
        rest_details_title2: 'Integrazioni & Performance',
        rest_point_endpoints: 'Endpoint CRUD, parametri query, paginazione e filtri',
        rest_point_auth: 'Autenticazione JWT/OAuth2, sessioni, ruoli e permessi',
        rest_point_validation: 'Validazione payload, schemi, sanitizzazione ed error handling',
        rest_point_integrations: 'Integrazioni: Webhooks, ERP/CRM, servizi terzi',
        rest_point_performance: 'Caching, rate limiting, ETag, CDN e performance',
        rest_point_security: 'Sicurezza: CSRF, CORS, HTTPS, audit e logging',
        projects_title: 'Esperienze & Progetti',
        projects_github_title: 'Progetti GitHub Open Source',
        projects_github_desc: 'Plugin e tool sviluppati per semplificare lâ€™uso di WordPress e automazioni digitali.',
        projects_github_link: 'Vai ai repo',
        projects_cssclasses_desc: "Plugin pubblicato su wordpress.org per creare rapidamente classi CSS e aggiungerle ai blocchi dell'editor di WordPress con un clic e con anteprima in tempo reale.",
        projects_repo_link: 'Vai al repo',
        footer_rights: 'Â© 2025 Mauro Arnone - Tutti i diritti riservati',
        legendary_gate_title: 'Contenuto Leggendario',
        legendary_gate_desc: 'Hai sbloccato un contenuto speciale cliccando il badge Leggenda.'
      });
      // Estensione: chiavi localizzazione per ModalitÃ  CV
      Object.assign(T.it, {
        cv_button_text: 'ModalitÃ  CV (PDF)',
        aria_cv_toggle: 'Attiva modalitÃ  CV',
        cv_title: 'Curriculum Vitae',
        cv_role: 'Web Developer â€” WordPress, PHP, JavaScript',
        cv_contacts_title: 'Contatti',
        cv_email_label: 'Email',
        cv_linkedin_label: 'LinkedIn',
        cv_github_label: 'GitHub',
        cv_languages_title: 'Lingue',
        cv_lang_it: 'Italiano â€” Madrelingua',
        cv_lang_en: 'Inglese â€” B2',
        cv_soft_title: 'Soft Skills',
        cv_soft_item1: 'Problem Solving Creativo',
        cv_soft_item2: 'Collaborazione',
        cv_soft_item3: 'Apprendimento Rapido',
        cv_intro_title: 'Chi sono',
        cv_intro_text: 'Sviluppatore web con focus su WordPress, PHP e JavaScript. Unisco competenze tecniche e cura dellâ€™esperienza utente per realizzare soluzioni scalabili e orientate ai risultati.',
        cv_skills_title: 'Competenze Tecniche',
        cv_projects_title: 'Progetti Rilevanti',
        cv_education_title: 'Formazione',
        cv_other_skills_title: 'Altre Competenze',
        cv_experiences_title: 'Esperienze',
        cv_exp_item1: 'Sviluppatore Web Freelance â€” 2023â€“2025',
        cv_exp_item2: 'Supporto WordPress/WooCommerce â€” 2022â€“2024',
        cv_print_btn: 'Stampa',
        cv_download_btn: 'Scarica PDF',
        cv_exit_btn: 'Esci',
        cv_print_help_title: 'Istruzioni per qualitÃ  e margini',
        cv_print_help_step1: 'Seleziona "Salva come PDF"',
        cv_print_help_step2: 'Formato: A4, orientamento verticale',
        cv_print_help_step3: 'Margini: Nessuno o Personalizzati (10â€“15 mm)',
        cv_print_help_step4: 'Scala: 100% (non adattare alla pagina)',
        cv_print_help_step5: 'Abilita grafica di sfondo',
        cv_print_help_step6: 'Disattiva intestazioni/piÃ¨ di pagina',
        cv_profile_photo_alt: 'Foto profilo per CV'
        ,
        // CV - formazione voci
        cv_ed_item1: 'Diploma tecnico â€” Istituto Buccari Marconi',
        cv_ed_item2: 'Corso Formazione Cisco CCNA â€” basi di Networking (Routing & Switching)',
        cv_ed_item3: 'Corsi intensivi: C++, OOP, Python, PHP, JavaScript, jQuery, WordPress (Udemy/YouTube)',
        cv_ed_item4: 'Autoâ€‘formazione continua: bestâ€‘practice web, sicurezza, performance, UX',
        // CV - progetti
        cv_project_item1: 'Plugin CSS classes per WordPress â€” Studio immers',
        cv_project_item2: 'Plugin "Flash Order" per WooCommerce',
        cv_project_item3: 'Portfolio & Curriculum su GitHub Pages',
        // CV - competenze tecniche
        cv_skill_php: 'PHP',
        cv_skill_js: 'JavaScript',
        cv_skill_html5: 'HTML5',
        cv_skill_css_tailwind: 'CSS3/Tailwind',
        cv_skill_wp_woo: 'WordPress/WooCommerce',
        cv_skill_jquery: 'jQuery',
        cv_skill_rest_api: 'REST API',
        cv_skill_mysql: 'MySQL',
        cv_skill_git_github: 'Git/GitHub',
        cv_skill_docker: 'Docker',
        cv_skill_ci_cd: 'CI/CD',
        cv_skill_web_perf: 'Performance Web',
        // CV - altre competenze
        cv_other_grafica_2d_3d: 'Grafica 2D/3D',
        cv_other_blender: 'Blender',
        cv_other_substance_painter: 'Substance Painter',
        cv_other_substance_designer: 'Substance Designer',
        cv_other_quixel_mixer: 'Quixel Mixer',
        cv_other_unreal_engine: 'Unreal Engine',
        cv_other_photoshop: 'Photoshop',
        cv_other_canva: 'Canva'
      });
      Object.assign(T.en, {
        doc_title: 'Mauro Arnone | Interactive CV',
        nav_about: 'About',
        nav_wordpress: 'WordPress',
        nav_php: 'PHP',
        nav_javascript: 'JavaScript',
        nav_css: 'CSS',
        nav_tailwind: 'Tailwind',
        nav_html: 'HTML',
        nav_database: 'Database',
        nav_projects: 'Projects',
        cat_all: 'All',
        cat_languages: 'Languages',
        cat_frontend: 'Frontend',
        cat_cms: 'CMS',
        cat_database: 'Database',
        cat_frameworks: 'Frameworks & Libraries',
        cat_lang_frameworks: 'Languages + Frameworks',
        cat_backend: 'Backend',
        cat_3d: '3D',
        skills_title: 'Skills',
        skip_to_content: 'Skip to content',
        menu_button_text: 'Menu',
        alt_logo: 'Logo',
        alt_profile_photo: 'Profile photo of Mauro Arnone',
        hero_tagline: 'Web Developer â€¢ WordPress â€¢ PHP â€¢ JavaScript',
        cta_contact: 'Contact me',
        cta_linkedin: 'LinkedIn',
        cta_github: 'GitHub',
        about_title: 'About',
        about_intro: 'I am a web developer with experience in WordPress, PHP, and JavaScript. I combine technical expertise and strategic vision to turn ideas into concrete, scalable, resultsâ€‘oriented tools. This project, built with HTML, Tailwind, and GitHub Pages, showcases skills, experiences, and projects in a simple, modern, and impactful way, offering a clear, elegant, and immediate overview of my professional journey and capabilities.',
        skills_wordpress: 'WordPress',
        skills_photoshop: 'Photoshop',
        skills_canva: 'Canva',
        skills_substance_designer: 'Substance Designer',
        skills_quixel_mixer: 'Quixel Mixer',
        skills_php: 'PHP',
        skills_js: 'JavaScript',
        skills_jquery: 'jQuery',
        skills_gsap: 'GSAP',
        skills_threejs: 'Three.js',
        skills_html: 'HTML',
        skills_css_advanced: 'Advanced CSS',
        skills_tailwind: 'Tailwind CSS',
        skills_db_mysql: 'Database (MySQL)',
        skills_crm_automation: 'CRM & Automations',
        skills_seo_marketing: 'SEO & Marketing',
        skills_typescript: 'TypeScript',
        skills_react: 'React',
        skills_vue: 'Vue.js',
        skills_node: 'Node.js',
        skills_express: 'Express',
        skills_rest_api: 'REST APIs',
        
        skills_vite_webpack: 'Build (Vite/Webpack)',
        skills_git_github: 'Git & GitHub',
        skills_docker: 'Docker',
        skills_ci_cd: 'CI/CD',
        skills_testing_jest: 'Testing (Jest)',
        skills_accessibility: 'Accessibility (a11y)',
        skills_performance: 'Web Performance',
        skills_sass: 'SASS/SCSS',
        skills_laravel: 'Laravel',
        skills_woocommerce: 'WooCommerce',
        skills_bootstrap: 'Bootstrap',
        skills_materialize: 'Materialize',
        skills_elementor: 'Elementor',
        skills_3d_group_title: '3D & Graphics',
        skills_group_types_title: '3D & Graphics',
        skills_group_frameworks_title: 'Frameworks',
        skills_group_languages_title: 'Languages',
        skills_group_software_title: 'Software',
        skills_group_other_title: 'Softwares',
        skills_group_alt_title: 'Other',
        skills_3d_modeling: '3D Modeling',
        skills_3d_rendering: '3D Rendering',
        skills_texture_painting: 'Texture Painting',
        skills_3d_models_printing: 'Models for 3D printing',
        skills_3d_models_rendering: 'Models for 3D rendering',
        skills_3d_models_games: '3D game models',
        skills_webgl_webgpu: 'WebGL/WebGPU',
        skills_blender: 'Blender',
        skills_substance_painter: 'Substance Painter',
        skills_zbrush: 'ZBrush',
        skills_unity: 'Unity',
        skills_unreal_engine: 'Unreal Engine',
        skills_glsl: 'GLSL (Shaders)',
        skills_server_linux_install: 'Linux server setup (Ubuntu/Debian)',
        skills_nginx_apache_config: 'Nginx/Apache configuration',
        skills_ssl_letsencrypt: "SSL/TLS & Let's Encrypt",
        skills_vps_provisioning: 'VPS provisioning',
        
        skills_backup_restore: 'Backup & Restore',
        skills_monitoring_logging: 'Monitoring & Logging',
        skills_security_firewall: 'Security & Firewall (ufw/fail2ban)',
        skills_db_admin_mysql_postgres: 'DB Admin (MySQL/PostgreSQL)',
        skills_db_tuning_indexing: 'Tuning & Indexing',
        skills_db_replication_migration: 'Replication & Migrations',
        hud_xp_label: 'XP',
        hud_badge_label: 'Badges',
        hud_tooltip_next: 'XP to next badge: {{remaining}}',
        hud_tooltip_all: 'You unlocked all badges',
        overlay_title: 'Badges',
        overlay_close: 'Close',
        overlay_desc: 'Click CV headings to earn XP and unlock badges.',
        overlay_no_badge: 'No badges yet. Try clicking a title!',
        aria_theme_toggle: 'Toggle theme',
        aria_main_nav: 'Main navigation',
        aria_page_nav: 'Page navigation',
        aria_header_landmark: 'Header',
        aria_main_landmark: 'Main content',
        aria_footer_landmark: 'Footer',
        quick_actions_title: 'Quick Actions',
        qa_scroll_top: 'Scroll to top',
        qa_copy_email: 'Copy email',
        qa_open_badges: 'Open badges',
        toast_copied: 'Copied to clipboard',
        theme_button_text: 'Theme',
        toast_xp_plus: '+{{points}} XP: {{title}}',
        toast_badge_unlocked: 'Badge unlocked: {{name}}',
        toast_secret_unlocked: 'Badge unlocked: Secret (+{{bonus}} XP)',
        toast_dev_bonus: 'Dev Bonus: +{{bonus}} XP',
        toast_debugger_unlocked: 'Badge unlocked: Debugger',
        rarity_map: { comune: 'Common', raro: 'Rare', epico: 'Epic', leggendario: 'Legendary', mitico: 'Mythic', segreto: 'Secret' },
        badge_labels: { 'Segreto': 'Secret', 'Debugger': 'Debugger', 'Esploratore': 'Explorer', 'Curioso':'Curious', 'Esperto':'Expert', 'Instancabile':'Indefatigable', 'Maestro':'Master', 'Veterano':'Veteran', 'Leggenda':'Legend', 'Mitico':'Mythic', 'Immortale':'Immortal' },
        badge_desc_extra: { 'Segreto': 'You found an easter egg by clicking the logo!' },
        achievement_desc: {
          'Esploratore': 'You started exploring the CV.',
          'Esperto': 'You delved into many sections.',
          'Maestro': 'You tried almost everything.',
          'Curioso': 'You clicked on many sections.',
          'Instancabile': 'You never stop â€” great consistency.',
          'Veterano': 'You explored every part in depth.',
          'Leggenda': 'Epic commitment in the CV tour.',
          'Mitico': 'You reached a very high milestone.',
          'Immortale': 'You brought XP to the highest level.',
          'Debugger': 'You solved the console riddle.'
        },
        // Detailed sections
        wp_dev_title: 'Plugin and Theme Development',
        wp_dev_desc: 'Best practices, security, hooks and custom post types. Published on wordpress.org.',
        wp_dev_link: 'Plugin example',
        wp_perf_title: 'Performance & SEO',
        wp_perf_desc: 'LCP optimizations, caching, images and semantic HTML structure with schema.org.',
        php_arch_title: 'Architecture & OOP',
        php_arch_desc: 'Patterns, code organization, input/output security, WordPress integration.',
        php_api_title: 'APIs & integrations',
        php_api_desc: 'REST, webhooks, CRM automations and third-party services.',
        js_title: 'âš¡ JavaScript',
        js_interactivity_title: 'Interactivity & UX',
        js_interactivity_desc: 'Fluid experiences, animations, client-side state management, WP editor integration.',
        js_fetch_title: 'Fetch & Async',
        js_fetch_desc: 'Async requests, error handling, progressive enhancement.',
        js_ajax_title: 'AJAX & APIs',
        js_ajax_desc: 'AJAX with fetch/XHR, client-side caching, CORS handling.',
        js_debug_title: 'Advanced Logs & Debug',
        js_debug_desc: 'Structured console, log levels, error tracking, performance profiling.',
        js_libs_title: 'Libraries & Frameworks',
        js_libs_desc: 'three.js for 3D/WebGL, jQuery for DOM, GSAP for animations.',
        css_title: 'ðŸŽ¨ Advanced CSS',
        css_layout_title: 'Layout & Animations',
        css_layout_desc: 'Grid, flex, transitions and complex animations with optimal performance.',
        css_design_system_desc: 'Reusable components, consistent typography and palette.',
        css_frameworks_title: 'CSS Frameworks',
        css_frameworks_desc: 'Bootstrap and Materialize: grid, UI components, responsive and accessibility.',
        tailwind_title: 'ðŸŒ¬ï¸ Tailwind CSS',
        tailwind_utility_title: 'Utility-first UI',
        tailwind_utility_desc: 'Modern components, mobile-first responsive, accessible hover/focus states.',
        tailwind_build_title: 'Build & Performance',
        tailwind_build_desc: 'Purge CSS, production optimization, reduce critical CSS.',
        modal_open: 'Open Modal Demo',
        modal_title: 'Tailwind Modal Demo',
        modal_desc: 'Example UI component with Tailwind and minimal JavaScript.',
        modal_close: 'Close',
        html_title: 'ðŸ”¤ Semantic HTML',
        html_desc: 'Semantic structure, accessibility, technical SEO and JSON-LD structured data.',
        db_title: 'ðŸ—„ï¸ Database (MySQL)',
        db_model_title: 'Modeling & Queries',
        db_model_desc: 'Optimized schema, normalization, complex queries and indexes.',
        db_migrate_title: 'Migrations & Security',
        db_migrate_desc: 'Backups, migrations, permission management and data protection.',
        // Frameworks & API sections
        jquery_title: 'jQuery',
        jquery_desc: 'DOM selectors, events, lightweight animations and AJAX.',
        jquery_demo_title: 'jQuery Animation Demo',
        jquery_demo_show: 'Show',
        jquery_demo_hide: 'Hide',
        jquery_demo_toggle: 'Toggle',
        jquery_demo_fade: 'Fade',
        jquery_demo_slide: 'Slide',
        jquery_demo_animate: 'Animate',
        jquery_demo_fadeto: 'FadeTo 50%',
        jquery_demo_bounce: 'Bounce',
        jquery_demo_highlight: 'Highlight',
        jquery_demo_pulse: 'Pulse',
        jquery_demo_stop: 'Stop',
        jquery_demo_reset: 'Reset',
        jquery_demo_box_label: 'jQuery Box',
        gsap_title: 'GSAP',
        gsap_desc: 'Timelines, easing and highâ€‘performance animations on canvas/DOM.',
        gsap_demo_title: 'GSAP Animation Demo',
        gsap_demo_play: 'Play',
        gsap_demo_reverse: 'Reverse',
        gsap_demo_pause: 'Pause',
        gsap_demo_resume: 'Resume',
        gsap_demo_restart: 'Restart',
        gsap_demo_box_label: 'GSAP Box',
        gsap_demo_yoyo: 'Yoyo',
        gsap_demo_stagger: 'Stagger',
        gsap_demo_dots_label: 'GSAP Boxes',
        threejs_title: 'Three.js',
        threejs_desc: 'Scene, camera, materials and WebGL/WebGPU rendering.',
        threejs_demo_title: 'Three.js Demo (cube)',
        threejs_demo_start: 'Start',
        threejs_demo_stop: 'Stop',
        threejs_demo_spin: 'Accelerate',
        threejs_demo_reset: 'Reset',
        threejs_demo_canvas_label: 'Three.js Canvas',
        threejs_demo_autorotate: 'Autoâ€‘rotate',
        threejs_demo_wireframe: 'Wireframe',
        threejs_demo_solid: 'Solid',
        threejs_demo_lights: 'Dynamic Lights',
        bootstrap_title: 'Bootstrap',
        bootstrap_desc: 'Grid, components, responsive UI and utilities.',
        bootstrap_demo_title: 'Bootstrap Animation Demo',
        materialize_title: 'Materialize',
        materialize_desc: 'Material Design UI, grids, components and modals.',
        wp_title: 'WordPress',
        php_title: 'PHP',
        css_design_system_title: 'Design System',
        woocommerce_title: 'WooCommerce',
        woocommerce_desc: 'WordPress eâ€‘commerce: hooks, checkout, integrations, performance & scalability.',
        // WooCommerce - blocks and details
        woo_block_checkout_title: 'Checkout & UX',
        woo_block_catalog_title: 'Catalog & Logic',
        woo_block_api_title: 'API & Integrations',
        woo_block_perf_title: 'Performance & Scalability',
        woo_checkout_item1: 'Custom fields, simplified steps, upsell/crossâ€‘sell',
        woo_checkout_item2: 'Payment methods: Stripe, PayPal, cards, bank transfer',
        woo_catalog_item1: 'Attributes, variations, bundles, composite products',
        woo_catalog_item2: 'Pricing rules, coupons, taxes and shipping',
        woo_api_item1: 'Webhooks, REST API, ERP/CRM, automations',
        woo_api_item2: 'Multiâ€‘language (WPML/Polylang) and multiâ€‘store',
        woo_perf_item1: 'Caching, optimized queries, lazy loading',
        woo_perf_item2: 'Horizontal scaling and CDN',
        woo_toggle_show: 'Show details',
        woo_toggle_hide: 'Hide details',
        woo_details_title: 'Quick details',
        woo_details_item1: 'Checkout changes via hooks/filters and Gutenberg blocks',
        woo_details_item2: 'Advanced shipping (tables, zones, carriers)',
        woo_details_item3: 'Subscriptions/Membership and transactional emails',
        woo_details_item4: 'Product sync via API (ERP/CRM)',
        woo_details_item5: 'Event tracking for analytics/ads',
        woo_details_item6: 'Hardening and compliance (GDPR)',
        rest_title: 'REST APIs',
        rest_desc: 'CRUD endpoints, authentication, async fetch and integrations.',
        // REST - details
        rest_details_title: 'Technical details',
        rest_details_title2: 'Integrations & Performance',
        rest_point_endpoints: 'CRUD endpoints, query params, pagination and filtering',
        rest_point_auth: 'JWT/OAuth2 authentication, sessions, roles and permissions',
        rest_point_validation: 'Payload validation, schemas, sanitization and error handling',
        rest_point_integrations: 'Integrations: Webhooks, ERP/CRM, thirdâ€‘party services',
        rest_point_performance: 'Caching, rate limiting, ETag, CDN and performance',
        rest_point_security: 'Security: CSRF, CORS, HTTPS, audit and logging',
        // REST - example
        rest_example_title: 'Request/Response Example',
        rest_example_desc: 'Example GET call to a products endpoint with JSON response.',
        rest_example_request_title: 'Request',
        rest_example_response_title: 'Response',
        projects_title: 'Experience & Projects',
        projects_github_title: 'Open Source GitHub Projects',
        projects_github_desc: 'Plugins and tools built to simplify WordPress and digital automations.',
        projects_github_link: 'Go to repos',
        projects_cssclasses_desc: "Plugin published on wordpress.org to quickly create CSS classes and add them to WordPress editor blocks with one click and live preview.",
        projects_repo_link: 'Go to repo',
        footer_rights: 'Â© 2025 Mauro Arnone - All rights reserved',
        legendary_gate_title: 'Legendary Content',
        legendary_gate_desc: 'You unlocked a special content by clicking the Legend badge.',
        badge_action_unlocked_content: 'Content unlocked',
        badge_action_special_message: 'Special message shown',
        badge_action_hidden_feature: 'Hidden feature activated',
        badge_action_state_updated: 'Project state updated'
      });
      // Extension: CV mode localization keys (EN)
      Object.assign(T.en, {
        cv_button_text: 'CV Mode (PDF)',
        aria_cv_toggle: 'Toggle CV mode',
        cv_title: 'Curriculum Vitae',
        cv_role: 'Web Developer â€” WordPress, PHP, JavaScript',
        cv_contacts_title: 'Contacts',
        cv_email_label: 'Email',
        cv_linkedin_label: 'LinkedIn',
        cv_github_label: 'GitHub',
        cv_languages_title: 'Languages',
        cv_lang_it: 'Italian â€” Native',
        cv_lang_en: 'English â€” B2',
        cv_soft_title: 'Soft Skills',
        cv_soft_item1: 'Creative Problem Solving',
        cv_soft_item2: 'Collaboration',
        cv_soft_item3: 'Fast Learning',
        cv_intro_title: 'About',
        cv_intro_text: 'Web developer focused on WordPress, PHP and JavaScript. I combine technical skills and userâ€‘experience care to deliver scalable, resultsâ€‘oriented solutions.',
        cv_skills_title: 'Technical Skills',
        cv_projects_title: 'Relevant Projects',
        cv_education_title: 'Education',
        cv_other_skills_title: 'Other Skills',
        cv_experiences_title: 'Experiences',
        cv_exp_item1: 'Freelance Web Developer â€” 2023â€“2025',
        cv_exp_item2: 'WordPress/WooCommerce Support â€” 2022â€“2024',
        cv_print_btn: 'Print',
        cv_download_btn: 'Download PDF',
        cv_exit_btn: 'Exit',
        cv_print_help_title: 'Instructions for quality and margins',
        cv_print_help_step1: 'Choose "Save as PDF"',
        cv_print_help_step2: 'Paper: A4, portrait orientation',
        cv_print_help_step3: 'Margins: None or Custom (10â€“15 mm)',
        cv_print_help_step4: 'Scale: 100% (do not fit to page)',
        cv_print_help_step5: 'Enable background graphics',
        cv_print_help_step6: 'Disable headers/footers',
        cv_profile_photo_alt: 'CV profile photo'
        ,
        // CV - education items
        cv_ed_item1: 'Technical diploma â€” Buccari Marconi Institute',
        cv_ed_item2: 'Cisco CCNA Training Course â€” Networking fundamentals (Routing & Switching)',
        cv_ed_item3: 'Intensive courses: C++, OOP, Python, PHP, JavaScript, jQuery, WordPress (Udemy/YouTube)',
        cv_ed_item4: 'Selfâ€‘learning: web bestâ€‘practices, security, performance, UX',
        // CV - projects
        cv_project_item1: 'WordPress CSS classes plugin â€” Studio immers',
        cv_project_item2: 'â€œFlash Orderâ€ plugin for WooCommerce',
        cv_project_item3: 'Portfolio & CV on GitHub Pages',
        // CV - technical skills
        cv_skill_php: 'PHP',
        cv_skill_js: 'JavaScript',
        cv_skill_html5: 'HTML5',
        cv_skill_css_tailwind: 'CSS3/Tailwind',
        cv_skill_wp_woo: 'WordPress/WooCommerce',
        cv_skill_jquery: 'jQuery',
        cv_skill_rest_api: 'REST APIs',
        cv_skill_mysql: 'MySQL',
        cv_skill_git_github: 'Git/GitHub',
        cv_skill_docker: 'Docker',
        cv_skill_ci_cd: 'CI/CD',
        cv_skill_web_perf: 'Web Performance',
        // CV - other skills
        cv_other_grafica_2d_3d: '2D/3D Graphics',
        cv_other_blender: 'Blender',
        cv_other_substance_painter: 'Substance Painter',
        cv_other_substance_designer: 'Substance Designer',
        cv_other_quixel_mixer: 'Quixel Mixer',
        cv_other_unreal_engine: 'Unreal Engine',
        cv_other_photoshop: 'Photoshop',
        cv_other_canva: 'Canva'
      });
      
      // UtilitÃ  i18n
      const t = (key, params={}) => {
        const dict = T[L] || T['it'];
        let str = dict[key] || (T['it'][key] || key);
        Object.entries(params).forEach(([k,v]) => { str = String(str).replaceAll(`{{${k}}}`, String(v)); });
        return str;
      };
      const applyI18nStatic = () => {
        document.querySelectorAll('[data-i18n]').forEach(el => {
          const key = el.getAttribute('data-i18n');
          if (key) el.textContent = t(key);
        });
        document.querySelectorAll('[data-i18n-aria]').forEach(el => {
          const attr = el.getAttribute('data-i18n-aria');
          if (attr) el.setAttribute('aria-label', t(attr));
        });
        document.querySelectorAll('[data-i18n-alt]').forEach(el => {
          const key = el.getAttribute('data-i18n-alt');
          if (key) el.setAttribute('alt', t(key));
        });
      };
      const setLanguage = (newLang) => {
        if (!['it','en'].includes(newLang)) return;
        localStorage.setItem('langOverride', newLang);
        L = newLang;
        document.documentElement.setAttribute('lang', L);
        applyI18nStatic();
        document.title = t('doc_title');
        updateHUD();
        if (badgeOverlay && !badgeOverlay.classList.contains('hidden')) renderBadges();
        // Propaga cambio lingua agli iframe
        sendToBootstrapIframe({ type: 'lang', value: L });
        sendToMaterializeIframe({ type: 'lang', value: L });
      };
      window.cvGame = {
        help() {
          console.log('%c'+T[L].helpTitle, 'color:#1065ff; font-weight:bold');
          console.log(T[L].helpProgress);
          console.log(T[L].helpSolve);
        },
        progress() {
          console.log(`XP: ${xp} | Badge: ${badges.length} | ${T[L].progressLabel}: ${secretClicks}/10`);
        },
        solve(answer) {
          const ok = String(answer || '').trim().toLowerCase() === 'mauro';
          if (!ok) {
            console.log(T[L].nope);
            return false;
          }
          if (!badges.includes('Debugger')) {
            badges.push('Debugger');
            localStorage.setItem('badges', JSON.stringify(badges));
            showToast(`ðŸ› ï¸ ${t('toast_debugger_unlocked')}`);
            launchConfetti();
          }
          if (localStorage.getItem('devXpUsed') !== '1') {
            const bonus = 5;
            xp += bonus;
            localStorage.setItem('xp', String(xp));
            localStorage.setItem('devXpUsed', '1');
            showToast(`ðŸ§ª ${t('toast_dev_bonus', {bonus})}`);
            checkAchievements();
          }
          updateHUD();
          return true;
        }
      };
      console.log('%c'+T[L].welcome, 'color:#1065ff; font-weight:bold', T[L].welcomeHelp);
      applyI18nStatic();
      document.title = t('doc_title');
      // Initialize HUD after i18n is ready
      updateHUD();
      // Wire language buttons
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const newLang = btn.getAttribute('data-lang');
          setLanguage(newLang);
        });
      });

      // HUD cliccabile per aprire overlay badge
      if (hudEl) {
        hudEl.setAttribute('role', 'button');
        hudEl.setAttribute('tabindex', '0');
        hudEl.classList.add('cursor-pointer');
        hudEl.addEventListener('click', () => toggleBadgeOverlay(true));
        hudEl.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            toggleBadgeOverlay(true);
          }
        });
      }
      const hudElMobile = document.getElementById('gamify-hud-mobile');
      if (hudElMobile) {
        hudElMobile.setAttribute('role', 'button');
        hudElMobile.setAttribute('tabindex', '0');
        hudElMobile.classList.add('cursor-pointer');
        hudElMobile.addEventListener('click', () => toggleBadgeOverlay(true));
        hudElMobile.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            toggleBadgeOverlay(true);
          }
        });
      }
      if (badgeBackdrop) badgeBackdrop.addEventListener('click', () => toggleBadgeOverlay(false));
      if (badgeCloseBtn) badgeCloseBtn.addEventListener('click', () => toggleBadgeOverlay(false));
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') toggleBadgeOverlay(false);
      });

      // Quick Actions
      const scrollTopBtn = document.getElementById('qa-scroll-top');
      if (scrollTopBtn) scrollTopBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

      const copyEmailBtn = document.getElementById('qa-copy-email');
      if (copyEmailBtn) copyEmailBtn.addEventListener('click', async () => {
        try {
          await navigator.clipboard.writeText('mauro.arnone.ma@gmail.com');
          showToast(`ðŸ“‹ ${t('toast_copied')}`);
        } catch (e) {
          showToast('ðŸ“‹ Copy failed');
        }
      });

      const openBadgesBtn = document.getElementById('qa-open-badges');
      if (openBadgesBtn) openBadgesBtn.addEventListener('click', () => toggleBadgeOverlay(true));

      // Categoria iniziale applicata dopo la definizione del router

      // Category router (hash-based)
      const categoryButtons = Array.from(document.querySelectorAll('.cat-btn'));
      const allSections = Array.from(document.querySelectorAll('section[id]'));
      const allCategoryContainers = Array.from(document.querySelectorAll('[data-category]'));
      const pageSubnavEl = document.getElementById('page-subnav');
      const setActiveCategory = (cat) => {
        // IT: Router categorie â€” attiva filtri, mostra/nasconde sezioni e costruisce il subnav.
        // EN: Category router â€” toggles filters, shows/hides sections, builds subnav.
        //
        // IT: Supporto filtro combinato "linguaggi + frameworks" tramite cat='lf' o singoli.
        // EN: Combined filter support for "languages + frameworks" via cat='lf' or singles.
        const combined = (cat === 'linguaggi' || cat === 'frameworks' || cat === 'lf');
        const activeCats = combined ? ['linguaggi', 'frameworks'] : (cat ? [cat] : []);
        const showAll = !cat || cat === 'all';
        // IT: Esclusioni visibilitÃ  per alcune categorie (es. nascondi WooCommerce in 'lf').
        // EN: Visibility exclusions for certain categories (e.g., hide WooCommerce in 'lf').
        const EXCLUDE_FOR_CATEGORY = { lf: new Set(['woocommerce']) };
        const excludeSet = EXCLUDE_FOR_CATEGORY[cat] || null;

        // IT: Aggiorna stato dei pulsanti â€” se combinato, marca entrambi.
        // EN: Update buttons â€” if combined, mark both as active.
        categoryButtons.forEach(btn => {
          const btnCat = btn.getAttribute('data-cat');
          const isActive = showAll ? btnCat === 'all' : (activeCats.includes(btnCat) || (combined && btnCat === 'lf') || btnCat === cat);
          btn.setAttribute('aria-pressed', String(isActive));
          btn.classList.toggle('bg-blue-50', isActive);
          btn.classList.toggle('dark:bg-gray-700', isActive);
          btn.classList.toggle('border-brand', isActive);
          btn.classList.toggle('ring-1', isActive);
          btn.classList.toggle('ring-brand', isActive);
        });

        // IT: Mostra solo i contenitori (section/div) con categorie corrispondenti; supporta valori multipli.
        // EN: Show only containers (section/div) matching categories; supports multi-value attributes.
        allCategoryContainers.forEach(el => {
          const sCats = (el.getAttribute('data-category') || '').split(/\s+/).filter(Boolean);
          const show = showAll || sCats.some(c => activeCats.includes(c));
          const hiddenByExclude = excludeSet && excludeSet.has(el.id);
          el.classList.toggle('hidden', !show || hiddenByExclude);
        });

        // IT: Filtra gli elementi della lista competenze per categoria (se presenti).
        // EN: Filter skills list items by category (if present).
        const skillsList = document.getElementById('skills-list');
        if (skillsList) {
          const skillItems = Array.from(skillsList.querySelectorAll('li'));
          skillItems.forEach(li => {
            const liCatAttr = li.getAttribute('data-cat') || '';
            const liCats = liCatAttr.split(/\s+/).filter(Boolean);
            const show = showAll || liCats.some(c => activeCats.includes(c));
            li.classList.toggle('hidden', !show);
          });
        }

        // IT: Filtra gli altri elementi con data-cat (esclude i pulsanti e gli item della lista competenze).
        // EN: Filter other elements with data-cat (excluding filter buttons and skills list items).
        const genericCatItems = Array.from(document.querySelectorAll('[data-cat]')).filter(el => {
          return !el.classList.contains('cat-btn') && !(skillsList && skillsList.contains(el));
        });
        genericCatItems.forEach(el => {
          const elCats = (el.getAttribute('data-cat') || '').split(/\s+/).filter(Boolean);
          const show = showAll || elCats.some(c => activeCats.includes(c));
          el.classList.toggle('hidden', !show);
        });

        // IT: Costruisce il subâ€‘nav contestuale in cima alla pagina, solo con sezioni visibili.
        // EN: Builds contextual subâ€‘nav at the top, using only visible sections.
        if (pageSubnavEl) {
          pageSubnavEl.innerHTML = '';
          // IT: Esclusioni dal subnav (es. WooCommerce quando attivo 'lf').
          // EN: Subnav exclusions (e.g., WooCommerce when 'lf' is active).
          const EXCLUDE_FOR_SUBNAV = { lf: new Set(['woocommerce']) };
          const visibleSections = allSections.filter(sec => {
            const sCatAttr = sec.getAttribute('data-category') || '';
            const sCats = sCatAttr.split(/\s+/).filter(Boolean);
            const show = showAll || sCats.some(c => activeCats.includes(c));
            if (!show) return false;
            if (excludeSet && excludeSet.has(sec.id)) return false; // esclusione dalla visibilitÃ 
            return true;
          });
          // IT: Mostra il subnav solo se ci sono sezioni visibili collegate.
          // EN: Show the subnav only when there are visible, linked sections.
          pageSubnavEl.classList.toggle('hidden', visibleSections.length === 0);
          visibleSections.forEach(sec => {
            const id = sec.id;
            const excludeSet = EXCLUDE_FOR_SUBNAV[cat] || null;
            // IT: Esclusione specifica dal subnav, la sezione puÃ² comunque restare visibile.
            // EN: Specific subnav exclusion; the section can still remain visible.
            if (excludeSet && excludeSet.has(id)) return;
            const titleEl = sec.querySelector('h2');
            const label = titleEl ? titleEl.textContent.trim() : id;
            const a = document.createElement('a');
            a.href = cat ? `#cat=${cat}&section=${id}` : `#section=${id}`;
            a.className = 'px-2 py-1 rounded border text-xs bg-white hover:bg-gray-100 transition dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700';
            a.textContent = label;
            pageSubnavEl.appendChild(a);
          });
        }
        // lo scroll sarÃ  gestito da applyCategoryFromHash
        // IT/EN: Aggiorna la mesh 3D nel header in base alla categoria attiva
        try { window.hero3DOverlay?.setCategoryMesh(cat || 'all'); } catch(e){}
      };
      const parseRouteFromHash = () => {
        const h = location.hash || '';
        const catMatch = h.match(/cat=(\w+)/);
        const secMatch = h.match(/section=([A-Za-z0-9_-]+)/);
        return { cat: catMatch ? catMatch[1] : null, section: secMatch ? secMatch[1] : null };
      };
      const applyCategoryFromHash = () => {
        const { cat, section } = parseRouteFromHash();
        setActiveCategory(cat);
        // IT/EN: Aggiorna accenti laterali nel 3D header in base a section
        try { window.hero3DOverlay?.setSectionAccents(section || null); } catch(e){}
        if (section) {
          const target = document.getElementById(section);
          if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        } else {
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }
      };
      window.addEventListener('hashchange', applyCategoryFromHash);
      categoryButtons.forEach(btn => {
        btn.addEventListener('click', () => {
          const cat = btn.getAttribute('data-cat');
          const url = new URL(location.href);
          url.hash = `#cat=${cat}`;
          history.pushState(null, '', url);
          applyCategoryFromHash();
          // Animazione header: cambio gradiente e impulso forme
          try {
            const CATEGORY_GRADIENTS = {
              all: ['#2563eb', '#14b8a6', '#7c3aed'], // default: blue-600, teal-500, purple-600
              lf: ['#0ea5e9', '#22d3ee', '#a78bfa'], // sky/cyan/indigo
              backend: ['#ef4444', '#f97316', '#f59e0b'], // red/orange/amber
              frontend: ['#ec4899', '#06b6d4', '#8b5cf6'], // pink/cyan/violet
              cms: ['#10b981', '#34d399', '#fde68a'], // green/emerald/amber
              database: ['#4f46e5', '#06b6d4', '#22d3ee'], // indigo/cyan
              '3d': ['#9333ea', '#f59e0b', '#ef4444'] // purple/amber/red
            };
            const palette = CATEGORY_GRADIENTS[cat] || CATEGORY_GRADIENTS.all;
            if (window.heroHeaderAPI && typeof window.heroHeaderAPI.setGradient === 'function') {
              window.heroHeaderAPI.setGradient(palette, { easing: 'ease-in-out' });
            }
            if (window.heroHeaderAPI && typeof window.heroHeaderAPI.pulse === 'function') {
              window.heroHeaderAPI.pulse(1);
            }
          } catch (_) {
            // no-op fallback
          }
        });
      });

      // Interactive Header: tilt, parallax, ripple
      (function () {
        const headerEl = document.getElementById('home');
        const heroCard = document.getElementById('hero-card');
        const layer = document.getElementById('hero-interactive-layer');
        const shapeEls = Array.from(document.querySelectorAll('#hero-shapes .hero-shape'));
        const supportsMotion = window.matchMedia('(prefers-reduced-motion: no-preference)').matches;
        if (!headerEl || !heroCard || !supportsMotion) return;
        headerEl.style.perspective = '800px';
        headerEl.style.touchAction = 'pan-y';
        let dragging = false;
        let lastX = 0, lastY = 0;
        let rafId = null;
        const clamp = (v, min, max) => Math.max(min, Math.min(max, v));
        // Auto-assegna una profonditÃ  di default a TUTTI i discendenti del hero-card
        // in modo da applicare l'effetto 3D anche agli elementi senza data-depth
        const allHeroDescendants = Array.from(heroCard.querySelectorAll('*'));
        const defaultDepthFor = (el) => {
          const tag = el.tagName;
          if (tag === 'IMG') return 3;
          if (tag === 'H1') return 2;
          if (tag === 'H2' || tag === 'H3') return 1.8;
          if (tag === 'A') return 1.3;
          if (tag === 'P' || tag === 'SPAN') return 1.1;
          return 1.0;
        };
        allHeroDescendants.forEach(el => {
          if (!el.dataset.depth) {
            try { el.dataset.depth = String(defaultDepthFor(el)); } catch (e) {}
          }
        });
        let cardDepthEls = Array.from(heroCard.querySelectorAll('[data-depth]'));
        const layerDepthEls = Array.from(layer?.querySelectorAll('[data-depth]') || []);
        let pulseStrength = 0; // impulso extra per click categoria
        const applyTransforms = (nx, ny, intensity = 1) => {
          const rotX = clamp(-ny * 8 * intensity, -12, 12);
          const rotY = clamp(nx * 8 * intensity, -12, 12);
          heroCard.style.transition = 'transform 120ms ease-out';
          heroCard.style.transformStyle = 'preserve-3d';
          heroCard.style.transform = `translateZ(0px) rotateX(${rotX}deg) rotateY(${rotY}deg)`;
          // Parallax per tutti gli elementi con data-depth dentro heroCard
          cardDepthEls.forEach(el => {
            const d = parseFloat(el.dataset.depth || '1');
            const z = d * 8;
            const tx = nx * d * 12;
            const amp = 1 + (Math.abs(nx) + Math.abs(ny)) * 2;
            const floatY = Math.sin(window.__heroFloatTime__ * 1.6 + d) * amp;
            const pulseY = Math.sin(window.__heroFloatTime__ * 5 + d) * (pulseStrength * 14 * d);
            const pulseX = Math.cos(window.__heroFloatTime__ * 4 + d) * (pulseStrength * 10 * d);
            const ty = ny * d * 8 + floatY + pulseY;
            const txx = tx + pulseX;
            el.style.transition = 'transform 120ms ease-out';
            el.style.transform = `translateZ(${z}px) translate(${txx}px, ${ty}px)`;
          });
          // Geometric shapes parallax
          shapeEls.forEach((shape, i) => {
            const d = parseFloat(shape.dataset.depth || '1');
            const tx = nx * d * 20;
            const amp = 1 + (Math.abs(nx) + Math.abs(ny)) * 2;
            const floatY = Math.sin(window.__heroFloatTime__ * (1.4 + i * 0.1)) * amp;
            const pulseY = Math.sin(window.__heroFloatTime__ * (6 + i * 0.2)) * (pulseStrength * 18 * d);
            const pulseX = Math.cos(window.__heroFloatTime__ * (5 + i * 0.15)) * (pulseStrength * 14 * d);
            const ty = ny * d * -14 + floatY + pulseY;
            const txx = tx + pulseX;
            const rot = nx * 10 + i * 2;
            shape.style.transition = 'transform 220ms ease-out';
            shape.style.transform = `translate(${txx}px, ${ty}px) rotate(${rot}deg)`;
          });
          // Foreground sparkles
          layerDepthEls.forEach(el => {
            const d = parseFloat(el.dataset.depth || '1');
            const tx = nx * d * 16;
            const amp = 1 + (Math.abs(nx) + Math.abs(ny)) * 2.5;
            const floatY = Math.sin(window.__heroFloatTime__ * 1.8 + d * 0.7) * amp;
            const pulseY = Math.sin(window.__heroFloatTime__ * 6.4 + d) * (pulseStrength * 12 * d);
            const pulseX = Math.cos(window.__heroFloatTime__ * 5.2 + d) * (pulseStrength * 10 * d);
            const ty = ny * d * 10 + floatY + pulseY;
            const txx = tx + pulseX;
            el.style.transition = 'transform 160ms ease-out';
            el.style.transform = `translate(${txx}px, ${ty}px)`;
          });
        };
        let lastNX = 0, lastNY = 0;
        window.__heroFloatTime__ = 0;
        let animId = null;
        const tick = () => {
          window.__heroFloatTime__ += 0.016; // ~60fps
          applyTransforms(lastNX, lastNY, dragging ? 1.2 : 1);
          // attenua l'impulso nel tempo
          if (pulseStrength > 0) {
            pulseStrength *= 0.92;
            if (pulseStrength < 0.02) pulseStrength = 0;
          }
          animId = requestAnimationFrame(tick);
        };
        const onPointerMove = (e) => {
          const rect = headerEl.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          lastX = x; lastY = y;
          const nx = clamp((x / rect.width) * 2 - 1, -1, 1);
          const ny = clamp((y / rect.height) * 2 - 1, -1, 1);
          lastNX = nx; lastNY = ny;
          if (rafId) cancelAnimationFrame(rafId);
          rafId = requestAnimationFrame(() => applyTransforms(nx, ny, dragging ? 1.2 : 1));
        };
        const onPointerDown = (e) => {
          // Non intercettare click su elementi interattivi (link, bottoni)
          const interactive = e.target.closest('a,button');
          if (interactive) return;
          dragging = true;
          headerEl.setPointerCapture?.(e.pointerId);
        };
        const onPointerUp = () => {
          dragging = false;
          heroCard.style.transition = 'transform 300ms ease-out';
          heroCard.style.transform = 'translateZ(0) rotateX(0deg) rotateY(0deg)';
          shapeEls.forEach(shape => {
            shape.style.transition = 'transform 300ms ease-out';
            shape.style.transform = 'translate(0,0) rotate(0deg)';
          });
          cardDepthEls.forEach(el => {
            el.style.transition = 'transform 300ms ease-out';
            el.style.transform = 'translateZ(0) translate(0,0)';
          });
          layerDepthEls.forEach(el => {
            el.style.transition = 'transform 300ms ease-out';
            el.style.transform = 'translate(0,0)';
          });
          lastNX = 0; lastNY = 0;
        };
        const spawnRipple = (x, y) => {
          if (!layer) return;
          const rip = document.createElement('span');
          rip.style.position = 'absolute';
          rip.style.left = `${x - 12}px`;
          rip.style.top = `${y - 12}px`;
          rip.style.width = '24px';
          rip.style.height = '24px';
          rip.style.borderRadius = '9999px';
          rip.style.pointerEvents = 'none';
          rip.style.background = 'radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.0) 60%)';
          rip.style.filter = 'blur(1px)';
          layer.appendChild(rip);
          const anim = rip.animate([
            { transform: 'scale(0.2)', opacity: 0.9 },
            { transform: 'scale(6)', opacity: 0 }
          ], { duration: 600, easing: 'cubic-bezier(0.2, 0.65, 0.3, 1)' });
          anim.onfinish = () => rip.remove();
        };
        const onClick = (e) => {
          // Non interferire con i click su link e bottoni
          const interactive = e.target.closest('a,button');
          if (interactive) return;
          const rect = headerEl.getBoundingClientRect();
          spawnRipple(e.clientX - rect.left, e.clientY - rect.top);
        };
        headerEl.addEventListener('pointermove', onPointerMove, { passive: true });
        headerEl.addEventListener('pointerdown', onPointerDown);
        headerEl.addEventListener('pointerup', onPointerUp);
        headerEl.addEventListener('pointerleave', onPointerUp);
        headerEl.addEventListener('click', onClick);
        // avvia loop di galleggiamento continuo
        tick();

        // API globale per interazioni esterne (filtri categoria)
        // IT: API per controllare l'header dall'esterno (es. filtri).
        // EN: Global API to control the header from outside (e.g., filters).
        // 
        // IT: Overlay per il crossfade del gradiente, inserito come primo figlio dell'header.
        // EN: Overlay used to crossfade gradients, inserted as header's first child.
        let gradientOverlay = headerEl.querySelector('#hero-gradient-overlay');
        const ensureGradientOverlay = () => {
          if (gradientOverlay) return gradientOverlay;
          const ov = document.createElement('div');
          ov.id = 'hero-gradient-overlay';
          ov.style.position = 'absolute';
          ov.style.left = '0';
          ov.style.top = '0';
          ov.style.right = '0';
          ov.style.bottom = '0';
          ov.style.opacity = '0';
          ov.style.pointerEvents = 'none';
          ov.style.backgroundSize = '100% 100%';
          ov.style.willChange = 'opacity';
          // IT: Primo figlio per restare sotto i contenuti interattivi.
          // EN: Inserted as first child to stay under interactive content.
          headerEl.insertBefore(ov, headerEl.firstChild);
          gradientOverlay = ov;
          return gradientOverlay;
        };
        let gradientAnim = null;
        let gradientFadeOutAnim = null;
        window.heroHeaderAPI = {
          pulse(strength = 1) {
            // IT: Un piccolo â€œboosterâ€ di movimento. SÃ¬, caffeina per lâ€™header â˜•ï¸
            // EN: A tiny motion booster. Yes, headerâ€™s caffeine â˜•ï¸
            pulseStrength = Math.max(pulseStrength, strength);
          },
          setGradient(colors = [], opts = {}) {
            // IT: Cambia gradiente con un crossfade morbido, rispettando "prefers-reduced-motion".
            // EN: Switch gradient with a soft crossfade, honoring "prefers-reduced-motion".
            const okMotion = window.matchMedia('(prefers-reduced-motion: no-preference)').matches;
            if (!headerEl) return;
            if (!Array.isArray(colors) || colors.length === 0) return;
            const [c1, c2, c3] = [colors[0], colors[1] || colors[0], colors[2] || colors[1] || colors[0]];
            const next = `linear-gradient(135deg, ${c1}, ${c2}, ${c3})`;
            const duration = Math.max(300, Number(opts.duration || 1200));
            const easing = String(opts.easing || 'cubic-bezier(0.2, 0.65, 0.3, 1)');
            if (!okMotion || !headerEl.animate) {
              // IT: Fallback senza animazione (statico). Minimalismo zen ðŸ§˜
              // EN: No-animation fallback (static). Zen minimalism ðŸ§˜
              headerEl.style.backgroundImage = next;
              headerEl.style.backgroundSize = '100% 100%';
              headerEl.style.backgroundPosition = '50% 50%';
              return;
            }
            const ov = ensureGradientOverlay();
            ov.style.backgroundImage = next;
            ov.style.backgroundPosition = '50% 50%';
            ov.style.opacity = '0';
            // IT: Interrompe eventuali animazioni precedenti su overlay e header (niente code party crashers ðŸŽ‰ðŸš«).
            // EN: Cancels previous animations on overlay and header (no party crashers ðŸŽ‰ðŸš«).
            try { gradientAnim?.cancel(); } catch (e) {}
            try { gradientFadeOutAnim?.cancel(); } catch (e) {}
            try { ov.getAnimations?.().forEach(a => a.cancel()); } catch (e) {}
            try { headerEl.getAnimations?.().forEach(a => a.cancel()); } catch (e) {}
            gradientAnim = ov.animate([
              { opacity: 0 },
              { opacity: 1 }
            ], { duration, easing });
            gradientAnim.onfinish = () => {
              // IT: Imposta definitivamente il gradiente sull'header.
              // EN: Commit the new gradient onto the header.
              headerEl.style.backgroundImage = next;
              headerEl.style.backgroundSize = '100% 100%';
              headerEl.style.backgroundPosition = '50% 50%';
              // IT: Dissolvenza dolce dellâ€™overlay per evitare stacchi bruschi.
              // EN: Soft overlay fade-out to avoid harsh cuts.
              gradientFadeOutAnim = ov.animate([
                { opacity: 1 },
                { opacity: 0 }
              ], { duration: Math.min(400, Math.floor(duration / 3)), easing });
              gradientFadeOutAnim.onfinish = () => {
                ov.style.opacity = '0';
                ov.style.backgroundImage = '';
              };
            };
          }
        };
      })();

      // Scroll progress bar (navbar bottom)
      const scrollProgressEl = document.getElementById('scroll-progress');
      let scrollTicking = false;
      const updateScrollProgress = () => {
        if (!scrollProgressEl) return;
        const doc = document.documentElement;
        const top = window.scrollY || doc.scrollTop || document.body.scrollTop || 0;
        const height = Math.max(1, doc.scrollHeight - doc.clientHeight);
        const pct = Math.min(100, Math.max(0, (top / height) * 100));
        scrollProgressEl.style.width = pct + '%';
      };
      const onScroll = () => {
        if (scrollTicking) return;
        scrollTicking = true;
        requestAnimationFrame(() => {
          updateScrollProgress();
          scrollTicking = false;
        });
      };
      window.addEventListener('scroll', onScroll, { passive: true });
      window.addEventListener('resize', updateScrollProgress);
      updateScrollProgress();

      // Reactive particles background
      const particleCanvas = document.getElementById('bg-particles');
      const pctx = particleCanvas ? particleCanvas.getContext('2d') : null;
      const DPR = Math.max(1, Math.floor(window.devicePixelRatio || 1));
      let particlesBg = [];
      let mouseX = 0, mouseY = 0, hasMouse = false;
      let scrollYPrev = window.scrollY;
      let scrollImpulse = 0; // decays over time
      const isDarkTheme = document.documentElement.classList.contains('dark');
      // Colore accento (verde) per le connessioni del reticolo
      const ACCENT = '#10b981';
      const hexToRgb = (hex) => {
        try {
          const h = hex.replace('#', '');
          const bigint = parseInt(h, 16);
          return { r: (bigint >> 16) & 255, g: (bigint >> 8) & 255, b: bigint & 255 };
        } catch (e) { return { r: 16, g: 101, b: 255 }; }
      };
      const brandRgb = hexToRgb(ACCENT);
      // Rilevamento mobile/touch per modalitÃ  performance
      const isTouchDevice = ('ontouchstart' in window) || (navigator.maxTouchPoints > 0);
      const isMobileViewport = window.matchMedia('(max-width: 640px)').matches;
      const isMobilePerfMode = isTouchDevice && isMobileViewport;
      // Mesh and performance parameters
      let cellSize = 120;
      let linkRadius = 120;
      let maxLinksPerParticle = 6;
      let grid = new Map(); // spatial hash grid
      if (isMobilePerfMode) {
        cellSize = 160; // celle piÃ¹ grandi => meno vicini
        linkRadius = 100; // raggio collegamenti ridotto
        maxLinksPerParticle = 3; // meno linee per particella
      }
      
      // IT: Overlay Three.js nel header â€” mesh wireframe animate per categoria.
      // EN: Three.js overlay in header â€” animated wireframe meshes per category.
      (function(){
        if (!window.THREE) return; // three.js CDN giÃ  caricato in fondo alla pagina
        var headerEl = document.getElementById('home');
        var layer = document.getElementById('hero-3d-layer');
        if (!headerEl || !layer) return;

        var prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        var renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setPixelRatio(Math.max(1, window.devicePixelRatio || 1));
        renderer.setClearColor(0x000000, 0); // trasparente
        layer.appendChild(renderer.domElement);

        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera(50, 1, 0.1, 100);
        camera.position.set(0, 0, 6);

        var group = new THREE.Group();
        scene.add(group);
        // IT: Gruppo accenti laterali; EN: Side accent meshes group
        var accentsGroup = new THREE.Group();
        scene.add(accentsGroup);
        // IT: Grid di sfondo fullâ€‘screen (solo su 'all'); EN: Fullâ€‘screen background grid (only on 'all')
        var bgGrid = null;
        function updateGridGeometry(){
          // IT: Crea una plane suddivisa che riempie il frustum; EN: Build subdivided plane filling the frustum
          var zDist = Math.abs(camera.position.z - 0);
          var vFov = (camera.fov * Math.PI) / 180;
          var height = 2 * Math.tan(vFov / 2) * zDist;
          var width = height * camera.aspect;
          var wSeg = Math.max(8, Math.round(width * 6));
          var hSeg = Math.max(6, Math.round(height * 6));
          var plane = new THREE.PlaneGeometry(width, height, wSeg, hSeg);
          var edges = new THREE.EdgesGeometry(plane);
          var gridColor = (typeof isDarkTheme !== 'undefined' && isDarkTheme) ? 0xa0afb8 : 0x6f7b83;
          var mat = new THREE.LineBasicMaterial({ color: gridColor, transparent: true, opacity: (typeof isDarkTheme !== 'undefined' && isDarkTheme) ? 0.28 : 0.22 });
          mat.depthWrite = false;
          var lines = new THREE.LineSegments(edges, mat);
          lines.position.set(0, 0, 0);
          lines.rotation.set(0, 0, 0);
          lines.position.z = -0.2; // leggermente dietro
          lines.renderOrder = -1; // render prima delle mesh
          return lines;
        }

        function resize(){
          var w = headerEl.clientWidth;
          var h = headerEl.clientHeight;
          var width = Math.max(1, w);
          var height = Math.max(1, h);
          renderer.setSize(width, height);
          camera.aspect = width / height;
          camera.updateProjectionMatrix();
          // IT/EN: Aggiorna la griglia fullâ€‘screen alla nuova dimensione
          if (bgGrid){
            scene.remove(bgGrid);
            if (bgGrid.geometry) bgGrid.geometry.dispose?.();
            if (bgGrid.material) bgGrid.material.dispose?.();
            bgGrid = updateGridGeometry();
            scene.add(bgGrid);
          }
        }
        window.addEventListener('resize', resize);
        resize();

        // IT: Input del mouse per parallax; EN: Mouse input for parallax
        var mouseX = 0, mouseY = 0, hasMouse = false;
        headerEl.addEventListener('mousemove', function(ev){
          var rect = headerEl.getBoundingClientRect();
          var x = (ev.clientX - rect.left) / Math.max(1, rect.width);
          var y = (ev.clientY - rect.top) / Math.max(1, rect.height);
          mouseX = (x - 0.5) * 2; // [-1,1]
          mouseY = (0.5 - y) * 2; // [-1,1]
          hasMouse = true;
        });
        headerEl.addEventListener('mouseleave', function(){ hasMouse = false; });

        function clearGroup(){
          while(group.children.length){
            var child = group.children.pop();
            if (child.geometry) child.geometry.dispose?.();
            if (child.material) child.material.dispose?.();
          }
        }

        // IT: Mostra/Nasconde la griglia fullâ€‘screen; EN: Toggle fullâ€‘screen grid
        function ensureGridShown(show){
          if (show){
            if (!bgGrid){
              bgGrid = updateGridGeometry();
              scene.add(bgGrid);
            }
            bgGrid.visible = true;
          } else {
            if (bgGrid) bgGrid.visible = false;
          }
        }

        // IT: Palette colori per categoria; EN: Category color palette
        var COLORS = {
          lf: 0x1065ff,
          backend: 0x10b981,
          frontend: 0x1065ff,
          cms: 0xff3e7f,
          database: 0xf59e0b,
          '3d': 0x7c3aed,
          all: 0xffffff
        };

        // IT: Geometrie per categoria; EN: Category â†’ geometry mapping
        function buildForCategory(cat){
          clearGroup();
          ensureGridShown(cat === 'all');
          var color = COLORS[cat] ?? 0xffffff;
          var mat = new THREE.MeshBasicMaterial({ color: color, wireframe: true });
          var mat2 = new THREE.MeshBasicMaterial({ color: 0xffffff, wireframe: true, opacity: 0.35, transparent: true });

          switch(cat){
            case 'backend':
              group.add(new THREE.Mesh(new THREE.TorusKnotGeometry(1, 0.25, 128, 32), mat));
              break;
            case 'frontend':
              group.add(new THREE.Mesh(new THREE.IcosahedronGeometry(1.2, 1), mat));
              break;
            case 'cms':
              group.add(new THREE.Mesh(new THREE.BoxGeometry(1.4, 1.1, 1.2), mat));
              group.add(new THREE.Mesh(new THREE.BoxGeometry(1.8, 1.5, 1.6), mat2));
              break;
            case 'database':
              group.add(new THREE.Mesh(new THREE.CylinderGeometry(1.2, 1.2, 1.6, 24, 1), mat));
              break;
            case '3d':
              group.add(new THREE.Mesh(new THREE.SphereGeometry(1.2, 24, 16), mat));
              group.add(new THREE.Mesh(new THREE.TorusGeometry(1.6, 0.2, 16, 64), mat2));
              break;
            case 'lf':
              group.add(new THREE.Mesh(new THREE.IcosahedronGeometry(1.1, 0), mat));
              group.add(new THREE.Mesh(new THREE.TorusGeometry(1.8, 0.18, 14, 48), mat2));
              break;
            case 'all':
            default:
              group.add(new THREE.Mesh(new THREE.BoxGeometry(1.2, 1.2, 1.2), mat));
              break;
          }
          // Posizionamento centrale
          group.position.set(0, 0, 0);
          layer.style.opacity = '0';
          try {
            layer.getAnimations?.().forEach(a => a.cancel());
          } catch(e){}
          // IT: Fadeâ€‘in leggero del layer; EN: Soft layer fadeâ€‘in
          layer.animate([ { opacity: 0 }, { opacity: 1 } ], { duration: 500, easing: 'ease-in-out', fill: 'forwards' });
        }

        // IT: Accenti laterali per sezione; EN: Side accents per section
        function clearAccents(){
          while(accentsGroup.children.length){
            var child = accentsGroup.children.pop();
            if (child.geometry) child.geometry.dispose?.();
            if (child.material) child.material.dispose?.();
          }
        }

        var SECTION_COLORS = {
          javascript: 0xf7df1e,
          php: 0x777bb4,
          wordpress: 0x21759b,
          css: 0x2965f1,
          html: 0xe34f26,
          gsap: 0x88ce02,
          threejs: 0x00ffff,
          database: 0xf59e0b,
          woo: 0x96588a
        };

        function buildAccentsForSection(section){
          clearAccents();
          if (!section) return; // nessun accento per sezione nulla
          var color = SECTION_COLORS[section] ?? 0xffffff;
          var mat = new THREE.MeshBasicMaterial({ color: color, wireframe: true, transparent: true, opacity: 0.9 });
          var left, right;
          switch(section){
            case 'javascript':
              left = new THREE.Mesh(new THREE.IcosahedronGeometry(0.7, 0), mat);
              right = new THREE.Mesh(new THREE.TorusGeometry(0.5, 0.12, 12, 36), mat);
              break;
            case 'php':
              left = new THREE.Mesh(new THREE.TorusKnotGeometry(0.45, 0.12, 64, 16), mat);
              right = new THREE.Mesh(new THREE.BoxGeometry(0.6, 0.55, 0.6), mat);
              break;
            case 'wordpress':
              left = new THREE.Mesh(new THREE.BoxGeometry(0.65, 0.5, 0.65), mat);
              right = new THREE.Mesh(new THREE.TorusGeometry(0.55, 0.14, 14, 40), mat);
              break;
            case 'css':
              left = new THREE.Mesh(new THREE.CylinderGeometry(0.45, 0.45, 0.7, 16, 1), mat);
              right = new THREE.Mesh(new THREE.TorusGeometry(0.5, 0.1, 10, 32), mat);
              break;
            case 'html':
              left = new THREE.Mesh(new THREE.OctahedronGeometry(0.6, 0), mat);
              right = new THREE.Mesh(new THREE.BoxGeometry(0.5, 0.7, 0.5), mat);
              break;
            case 'gsap':
              left = new THREE.Mesh(new THREE.TorusGeometry(0.6, 0.1, 10, 36), mat);
              right = new THREE.Mesh(new THREE.TorusGeometry(0.4, 0.08, 10, 36), mat);
              break;
            case 'threejs':
              left = new THREE.Mesh(new THREE.SphereGeometry(0.55, 16, 12), mat);
              right = new THREE.Mesh(new THREE.IcosahedronGeometry(0.5, 0), mat);
              break;
            case 'database':
              left = new THREE.Mesh(new THREE.CylinderGeometry(0.5, 0.5, 0.6, 18, 1), mat);
              right = new THREE.Mesh(new THREE.CylinderGeometry(0.5, 0.5, 0.6, 18, 1), mat);
              break;
            case 'woo':
            case 'woocommerce':
              left = new THREE.Mesh(new THREE.TorusGeometry(0.5, 0.12, 12, 36), mat);
              right = new THREE.Mesh(new THREE.TorusKnotGeometry(0.4, 0.1, 64, 16), mat);
              break;
            default:
              left = new THREE.Mesh(new THREE.BoxGeometry(0.55, 0.55, 0.55), mat);
              right = new THREE.Mesh(new THREE.IcosahedronGeometry(0.5, 0), mat);
              break;
          }
          left.position.set(-2.4, 0.8, 0);
          right.position.set(2.4, -0.6, 0);
          left.userData.base = { x: left.position.x, y: left.position.y, z: left.position.z, side: -1 };
          right.userData.base = { x: right.position.x, y: right.position.y, z: right.position.z, side: 1 };
          accentsGroup.add(left);
          accentsGroup.add(right);
        }

        var clock = new THREE.Clock();
        function animate(){
          // In modalitÃ  CV, renderizza un frame e ferma il loop
          if (window.cvModeActive) {
            renderer.render(scene, camera);
            return;
          }
          if (!prefersReduced){
            var t = clock.getElapsedTime();
            group.rotation.y = t * 0.25;
            group.rotation.x = Math.sin(t * 0.5) * 0.08;
            // IT: Piccola vita agli accenti; EN: Light motion for accents
            accentsGroup.rotation.z = Math.sin(t * 0.2) * 0.02;
            // IT: Bobbing/Parallax degli accenti + camera reattiva al mouse; EN: Accent bobbing/parallax + mouse-reactive camera
            for (var i = 0; i < accentsGroup.children.length; i++){
              var m = accentsGroup.children[i];
              var base = m.userData && m.userData.base ? m.userData.base : { x: m.position.x, y: m.position.y, z: m.position.z, side: (m.position.x < 0 ? -1 : 1) };
              var off = i * 0.7;
              m.position.y = base.y + Math.sin(t + off) * 0.08;
              var mx = hasMouse ? mouseX : 0;
              m.position.x = base.x + mx * 0.25 * base.side;
              m.rotation.y += 0.002;
            }
            if (hasMouse){
              // parallax leggero della camera
              camera.position.x += (mouseX * 0.35 - camera.position.x) * 0.08;
              camera.position.y += (mouseY * 0.25 - camera.position.y) * 0.08;
              camera.lookAt(0, 0, 0);
            }
            if (bgGrid && bgGrid.visible){
              bgGrid.rotation.z = Math.sin(t * 0.15) * 0.01;
            }
          }
          renderer.render(scene, camera);
          requestAnimationFrame(animate);
        }
        animate();
        // Espone una funzione per riprendere il loop dopo lâ€™uscita dalla modalitÃ  CV
        window.resumeThreeLoop = function(){ requestAnimationFrame(animate); };

        // API globale per cambiare mesh da router categorie
        window.hero3DOverlay = {
          // IT: Dissolvenza in uscita e poi cambio categoria; EN: Fade-out then switch category
          setCategoryMesh: function(cat){
            cat = cat || 'all';
            if (prefersReduced){
              buildForCategory(cat);
              return;
            }
            try { layer.getAnimations?.().forEach(a => a.cancel()); } catch(e){}
            var anim = layer.animate([
              { opacity: 1 },
              { opacity: 0 }
            ], { duration: 280, easing: 'ease-in-out', fill: 'forwards' });
            (anim.finished || Promise.resolve()).then(function(){
              buildForCategory(cat);
            }).catch(function(){
              buildForCategory(cat);
            });
          },
          // IT: Accenti laterali con fade; EN: Side accents with fade
          setSectionAccents: function(section){
            section = section || null;
            if (prefersReduced){
              buildAccentsForSection(section);
              return;
            }
            try { layer.getAnimations?.().forEach(a => a.cancel()); } catch(e){}
            var anim = layer.animate([
              { opacity: 1 },
              { opacity: 0 }
            ], { duration: 220, easing: 'ease-in-out', fill: 'forwards' });
            (anim.finished || Promise.resolve()).then(function(){
              buildAccentsForSection(section);
              // fadeâ€‘in
              layer.animate([ { opacity: 0 }, { opacity: 1 } ], { duration: 220, easing: 'ease-in-out', fill: 'forwards' });
            }).catch(function(){
              buildAccentsForSection(section);
              layer.animate([ { opacity: 0 }, { opacity: 1 } ], { duration: 220, easing: 'ease-in-out', fill: 'forwards' });
            });
          }
        };
        // Imposta una mesh di default
        buildForCategory('all');
      })();
      let particleTargetCount = 120; // updated on init
      const computeDensityFactor = () => {
        const override = localStorage.getItem('particleDensity');
        if (override === 'low') return 0.6;
        if (override === 'medium') return 1.0;
        if (override === 'high') return 1.4;
        const cores = (navigator.hardwareConcurrency || 4);
        const isTouch = isTouchDevice;
        let f = 1.0;
        if (DPR > 1.5) f *= 0.8;
        if (cores <= 4) f *= 0.85;
        if (isTouch) f *= 0.8;
        if (isMobilePerfMode) f *= 0.7;
        return f;
      };
      const setCanvasSize = () => {
        if (!particleCanvas || !pctx) return;
        const w = window.innerWidth;
        const h = window.innerHeight;
        particleCanvas.width = Math.max(1, Math.floor(w * DPR));
        particleCanvas.height = Math.max(1, Math.floor(h * DPR));
        particleCanvas.style.width = w + 'px';
        particleCanvas.style.height = h + 'px';
        pctx.setTransform(DPR, 0, 0, DPR, 0, 0);
      };
      const rand = (min, max) => Math.random() * (max - min) + min;
      const initParticles = () => {
        if (!particleCanvas) return;
        const area = window.innerWidth * window.innerHeight;
        const density = computeDensityFactor();
        const target = isMobilePerfMode
          ? Math.round(Math.min(160, Math.max(50, (area / 16000) * density)))
          : Math.round(Math.min(260, Math.max(70, (area / 12000) * density)));
        particleTargetCount = target;
        // adjust link radius for higher counts
        const isTouch = isTouchDevice;
        linkRadius = isMobilePerfMode ? 100 : (isTouch ? 110 : 120);
        particlesBg = new Array(target).fill(0).map(() => ({
          x: rand(0, window.innerWidth),
          y: rand(0, window.innerHeight),
          vx: isMobilePerfMode ? rand(-0.2, 0.2) : rand(-0.25, 0.25),
          vy: isMobilePerfMode ? rand(-0.2, 0.2) : rand(-0.25, 0.25),
          size: rand(1.2, 2.4),
          // tonalitÃ  verdi (accent)
          hue: rand(145, 160),
          alpha: rand(0.35, 0.75)
        }));
        // reset grid
        grid.clear();
      };
      const drawParticles = () => {
        if (!pctx || !particleCanvas) return;
        pctx.clearRect(0, 0, particleCanvas.width, particleCanvas.height);
        grid.clear();
        particlesBg.forEach((p, i) => {
          // Interaction: mouse repulsion
          if (hasMouse) {
            const dx = p.x - mouseX;
            const dy = p.y - mouseY;
            const d2 = dx*dx + dy*dy;
            const r = 120; // influence radius
            if (d2 < r*r) {
              const force = Math.max(0.05, 0.25 - (d2 / (r*r)) * 0.25);
              const inv = 1 / Math.max(8, Math.sqrt(d2));
              p.vx += dx * inv * force;
              p.vy += dy * inv * force;
            }
          }
          // Interaction: scroll impulse
          if (Math.abs(scrollImpulse) > 0.001) {
            p.vy += scrollImpulse * (isMobilePerfMode ? 0.05 : 0.08);
          }
          // Slight continuous motion (Brownian jitter)
          p.vx += rand(-0.015, 0.015);
          p.vy += rand(-0.015, 0.015);
          // Natural motion
          p.x += p.vx;
          p.y += p.vy;
          // Gentle friction
          p.vx *= 0.99;
          p.vy *= 0.99;
          // Wrap around edges
          if (p.x < -5) p.x = window.innerWidth + 5;
          if (p.x > window.innerWidth + 5) p.x = -5;
          if (p.y < -5) p.y = window.innerHeight + 5;
          if (p.y > window.innerHeight + 5) p.y = -5;
          // Register into grid
          const gx = Math.floor(p.x / cellSize);
          const gy = Math.floor(p.y / cellSize);
          const key = gx + ',' + gy;
          const arr = grid.get(key);
          if (arr) arr.push(i); else grid.set(key, [i]);
          // Draw circle
          pctx.beginPath();
          pctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
          pctx.fillStyle = `hsla(${p.hue}, 85%, 55%, ${p.alpha})`;
          pctx.fill();
        });
        // Draw mesh connections
        const effectiveLinkRadius = linkRadius;
        const linkR2 = effectiveLinkRadius * effectiveLinkRadius;
        particlesBg.forEach((p, i) => {
          const gx = Math.floor(p.x / cellSize);
          const gy = Math.floor(p.y / cellSize);
          let links = 0;
          for (let dx = -1; dx <= 1; dx++) {
            for (let dy = -1; dy <= 1; dy++) {
              const key = (gx + dx) + ',' + (gy + dy);
              const indices = grid.get(key);
              if (!indices) continue;
              for (let k = 0; k < indices.length; k++) {
                const j = indices[k];
                if (j <= i) continue; // avoid duplicates
                const q = particlesBg[j];
                const ddx = p.x - q.x;
                const ddy = p.y - q.y;
                const d2 = ddx*ddx + ddy*ddy;
                if (d2 < linkR2) {
                  const d = Math.sqrt(d2);
                  const alpha = Math.max(0.05, 0.35 - (d / effectiveLinkRadius) * 0.35);
                  // Glow stroke (blurred, wider, lower alpha)
                  if (!isMobilePerfMode) {
                    pctx.save();
                    pctx.shadowBlur = 6;
                    pctx.shadowColor = `rgba(${brandRgb.r},${brandRgb.g},${brandRgb.b}, ${alpha * 0.8})`;
                    pctx.beginPath();
                    pctx.moveTo(p.x, p.y);
                    pctx.lineTo(q.x, q.y);
                    pctx.lineWidth = 1.6;
                    pctx.strokeStyle = `rgba(${brandRgb.r},${brandRgb.g},${brandRgb.b}, ${alpha * 0.25})`;
                    pctx.stroke();
                    pctx.shadowBlur = 0;
                    pctx.restore();
                  }
                  pctx.beginPath();
                  pctx.moveTo(p.x, p.y);
                  pctx.lineTo(q.x, q.y);
                  pctx.lineWidth = 0.8;
                  pctx.strokeStyle = `rgba(${brandRgb.r},${brandRgb.g},${brandRgb.b}, ${alpha})`;
                  pctx.stroke();
                  links++;
                  if (links >= maxLinksPerParticle) break;
                }
              }
              if (links >= maxLinksPerParticle) break;
            }
            if (links >= maxLinksPerParticle) break;
          }
        });
        // Decay scroll impulse
        scrollImpulse *= 0.92;
      };
      let rafId = 0;
      const animate = () => {
        // In modalitÃ  CV non animiamo i particles
        if (window.cvModeActive) { return; }
        drawParticles();
        rafId = requestAnimationFrame(animate);
      };
      const onMouseMove = (e) => {
        hasMouse = true;
        mouseX = e.clientX;
        mouseY = e.clientY;
      };
      const onMouseLeave = () => { hasMouse = false; };
      let lastBurstTime = 0;
      const burstCooldownMs = 700;
      const onClickBurst = (e) => {
        const now = performance.now();
        if (now - lastBurstTime < burstCooldownMs) return;
        lastBurstTime = now;
        if (!particlesBg.length) return;
        const x = e.clientX;
        const y = e.clientY;
        const burstCount = isMobilePerfMode ? 8 : 12;
        for (let i = 0; i < burstCount; i++) {
          particlesBg.push({
            x, y,
            vx: rand(-2.2, 2.2),
            vy: rand(-2.2, 2.2),
            size: rand(1.2, 2.6),
            // burst verdi
            hue: rand(145, 160),
            alpha: rand(0.45, 0.85)
          });
        }
        // Trim to target count to avoid unbounded growth
        const maxCount = Math.round(Math.min(isMobilePerfMode ? 160 : 220, Math.max(isMobilePerfMode ? 60 : 80, particleTargetCount)));
        if (particlesBg.length > maxCount) {
          particlesBg.splice(0, particlesBg.length - maxCount);
        }
      };
      const onScrollParticles = () => {
        const cur = window.scrollY;
        const delta = cur - scrollYPrev;
        scrollYPrev = cur;
        scrollImpulse += Math.max(-4, Math.min(4, delta / 200));
      };
      // API globali per pausa/ripresa particles
      window.pauseParticles = function(){ if (rafId) { try { cancelAnimationFrame(rafId); } catch(e){} rafId = 0; } };
      window.resumeParticles = function(){ if (!rafId) { animate(); } };
      // Init if canvas available
      if (particleCanvas && pctx) {
        setCanvasSize();
        initParticles();
        animate();
        window.addEventListener('resize', () => { setCanvasSize(); initParticles(); });
        if (!isTouchDevice) {
          window.addEventListener('mousemove', onMouseMove, { passive: true });
          window.addEventListener('mouseleave', onMouseLeave, { passive: true });
        }
        window.addEventListener('scroll', onScrollParticles, { passive: true });
        document.addEventListener('click', onClickBurst);
      }
    });
  </script>
  <!-- Stili leggeri per animazione apertura/chiusura del menu mobile -->
  <style>
    #menu-mobile { transition: transform 220ms ease, opacity 220ms ease; opacity: 0; transform: translateY(-8px); }
    #menu-mobile.open { opacity: 1; transform: translateY(0); }
    #menu-mobile.closing { opacity: 0; transform: translateY(-8px); }
  </style>

  <!-- jQuery CDN e inizializzazione demo -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script>
    $(function() {
      var $box = $('#jq-box');
      $('#jq-show').on('click', function () { $box.stop(true, true).show(); });
      $('#jq-hide').on('click', function () { $box.stop(true, true).hide(); });
      $('#jq-toggle').on('click', function () { $box.stop(true, true).toggle(); });
      $('#jq-fade').on('click', function () { $box.stop(true, true).fadeToggle(300); });
      $('#jq-slide').on('click', function () { $box.stop(true, true).slideToggle(300); });
      $('#jq-animate').on('click', function () {
        $box.stop(true, false)
            .animate({ left: '+=30', opacity: 0.85, borderRadius: '1rem' }, 350)
            .animate({ left: '-=30', opacity: 1, borderRadius: '0.5rem' }, 350);
      });
      $('#jq-fadeto').on('click', function () { $box.stop(true, false).fadeTo(200, 0.5); });
      $('#jq-bounce').on('click', function () {
        $box.stop(true, false)
            .animate({ top: '-=20' }, 150)
            .animate({ top: '+=20' }, 150)
            .animate({ width: '+=10', height: '+=6' }, 120)
            .animate({ width: '-=10', height: '-=6' }, 120)
            .animate({ top: '-=10' }, 100)
            .animate({ top: '+=10' }, 100);
      });
      $('#jq-highlight').on('click', function () {
        $box.stop(true, false);
        var originalShadow = $box.css('box-shadow');
        var originalBorderWidth = $box.css('border-width');
        $box.css('box-shadow', '0 0 0 0 rgba(0,0,0,0)');
        $box.animate({ borderWidth: '4px' }, 140)
            .queue(function(next){
              $box.css('box-shadow', '0 0 0 10px rgba(16,101,255,0.35)');
              next();
            })
            .delay(200)
            .animate({ borderWidth: originalBorderWidth || '1px' }, 140)
            .queue(function(next){
              $box.css('box-shadow', originalShadow || 'none');
              next();
            });
      });
      function doPulse(times) {
        if (times <= 0) return;
        $box
          .animate({ opacity: 0.75, borderRadius: '1rem' }, 180)
          .animate({ opacity: 1, borderRadius: '0.5rem' }, 180)
          .animate({ left: '+=10' }, 120)
          .animate({ left: '-=10' }, 120)
          .queue(function(next){ doPulse(times - 1); next(); });
      }
      $('#jq-pulse').on('click', function () { $box.stop(true, false); doPulse(2); });
      $('#jq-stop').on('click', function () { $box.stop(true, true); });
      $('#jq-reset').on('click', function () { $box.stop(true, true).show().css({ left: 0, top: 0, width: '', height: '', opacity: 1, borderRadius: '0.5rem', boxShadow: '', borderWidth: '' }); });
    });
  </script>

  <!-- GSAP CDN e inizializzazione demo -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var box = document.getElementById('gsap-box');
      if (!box || !window.gsap) return;
      var tl = gsap.timeline({ paused: true, defaults: { duration: 0.4, ease: 'power2.out' } });
      tl
        .to(box, { x: 30, opacity: 0.9, borderRadius: '1rem' })
        .to(box, { rotate: 8, scale: 1.06 })
        .to(box, { x: 0, opacity: 1, rotate: 0, scale: 1 })
        .to(box, { borderRadius: '0.5rem' });

      var playBtn = document.getElementById('gsap-play');
      // rimosso reverseBtn
      var pauseBtn = document.getElementById('gsap-pause');
      var resumeBtn = document.getElementById('gsap-resume');
      var restartBtn = document.getElementById('gsap-restart');
      // rimosso yoyoBtn
      var spinBtn = document.getElementById('gsap-spin');
      var bounceBtn = document.getElementById('gsap-bounce');
      var staggerBtn = document.getElementById('gsap-stagger');
      var dots = document.querySelectorAll('#gsap-dots .gsap-dot');
      var yoyoOn = false;

      if (playBtn) playBtn.addEventListener('click', function () { tl.play(); });
      // rimosso handler Reverse
      if (pauseBtn) pauseBtn.addEventListener('click', function () { tl.pause(); });
      if (resumeBtn) resumeBtn.addEventListener('click', function () {
        // Se Ã¨ in pausa riprende, altrimenti avvia la riproduzione
        if (tl.paused()) tl.resume(); else tl.play();
      });
      if (restartBtn) restartBtn.addEventListener('click', function () { tl.restart(true); });

      // nuovi handler GSAP
      if (spinBtn) spinBtn.addEventListener('click', function () {
        // rotazione completa del box con easing
        gsap.to(box, { rotate: '+=360', duration: 0.8, ease: 'power2.inOut' });
      });
      if (bounceBtn) bounceBtn.addEventListener('click', function () {
        // piccolo bounce verticale e scala
        gsap.timeline({ defaults: { duration: 0.18, ease: 'power2.out' } })
          .to(box, { y: -14, scale: 1.06 })
          .to(box, { y: 0, scale: 1 });
      });

      if (staggerBtn) staggerBtn.addEventListener('click', function () {
        if (!dots || !dots.length) return;
        gsap.to(dots, {
          x: 14,
          scale: 1.08,
          repeat: 1,
          yoyo: true,
          duration: 0.25,
          ease: 'power2.out',
          stagger: { each: 0.06, from: 'center' }
        });
      });
    });
  </script>

  <!-- Three.js CDN e inizializzazione demo -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var wrap = document.getElementById('threejs-canvas-wrap');
      if (!wrap || !window.THREE) return;
      var renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
      renderer.setPixelRatio(Math.max(1, window.devicePixelRatio || 1));
      renderer.shadowMap.enabled = true;
      renderer.shadowMap.type = THREE.PCFSoftShadowMap;
      wrap.appendChild(renderer.domElement);

      var scene = new THREE.Scene();
      var camera = new THREE.PerspectiveCamera(45, 1, 0.1, 100);
      // Controlli camera personalizzati (mouse/touch)
      var controls = (function() {
        var target = new THREE.Vector3();
        var radius = 5, theta = 0, phi = Math.PI / 2;
        var isDown = false, lastX = 0, lastY = 0;
        var pinchPrev = 0;
        var minRadius = 1.5, maxRadius = 30;
        var minPhi = 0.05, maxPhi = Math.PI - 0.05;
        function apply() {
          var sinPhi = Math.sin(phi);
          var x = radius * sinPhi * Math.sin(theta);
          var y = radius * Math.cos(phi);
          var z = radius * sinPhi * Math.cos(theta);
          camera.position.set(target.x + x, target.y + y, target.z + z);
          camera.lookAt(target);
        }
        function step(dt) { theta += dt; apply(); }
        function setTarget(v3) { target.copy(v3); apply(); }
        function setFromCamera() {
          var off = camera.position.clone().sub(target);
          radius = Math.max(0.001, off.length());
          theta = Math.atan2(off.x, off.z);
          phi = Math.acos(Math.min(1, Math.max(-1, off.y / radius)));
        }
        function onPointerDown(e) { isDown = true; lastX = e.clientX; lastY = e.clientY; renderer.domElement.setPointerCapture(e.pointerId); }
        function onPointerMove(e) {
          if (!isDown) return;
          var dx = e.clientX - lastX; var dy = e.clientY - lastY;
          lastX = e.clientX; lastY = e.clientY;
          theta -= dx * 0.005; phi -= dy * 0.003; phi = Math.min(maxPhi, Math.max(minPhi, phi));
          apply();
        }
        function onPointerUp(e) { isDown = false; renderer.domElement.releasePointerCapture(e.pointerId); }
        function onWheel(e) { e.preventDefault(); var f = 1 + (e.deltaY * 0.0015); radius = Math.min(maxRadius, Math.max(minRadius, radius * f)); apply(); }
        function touchDistance(touches) {
          var dx = touches[0].clientX - touches[1].clientX; var dy = touches[0].clientY - touches[1].clientY; return Math.sqrt(dx*dx + dy*dy);
        }
        function onTouchStart(e) {
          if (e.touches.length === 1) { isDown = true; lastX = e.touches[0].clientX; lastY = e.touches[0].clientY; }
          else if (e.touches.length === 2) { isDown = false; pinchPrev = touchDistance(e.touches); }
        }
        function onTouchMove(e) {
          if (e.touches.length === 1 && isDown) {
            var dx = e.touches[0].clientX - lastX; var dy = e.touches[0].clientY - lastY;
            lastX = e.touches[0].clientX; lastY = e.touches[0].clientY;
            theta -= dx * 0.005; phi -= dy * 0.003; phi = Math.min(maxPhi, Math.max(minPhi, phi));
            apply();
          } else if (e.touches.length === 2) {
            var pd = touchDistance(e.touches);
            var diff = pd - pinchPrev; pinchPrev = pd;
            radius = Math.min(maxRadius, Math.max(minRadius, radius - diff * 0.01));
            apply();
          }
        }
        function onTouchEnd(e) { if (e.touches.length === 0) { isDown = false; } }
        renderer.domElement.addEventListener('pointerdown', onPointerDown);
        renderer.domElement.addEventListener('pointermove', onPointerMove);
        renderer.domElement.addEventListener('pointerup', onPointerUp);
        renderer.domElement.addEventListener('wheel', onWheel, { passive: false });
        renderer.domElement.addEventListener('touchstart', onTouchStart, { passive: true });
        renderer.domElement.addEventListener('touchmove', onTouchMove, { passive: true });
        renderer.domElement.addEventListener('touchend', onTouchEnd, { passive: true });
        return { setTarget, setFromCamera, update: apply, step, get target() { return target; } };
      })();

      var ambient = new THREE.AmbientLight(0xffffff, 0.6);
      var dir = new THREE.DirectionalLight(0xffffff, 0.8);
      dir.position.set(3, 5, 2);
      dir.castShadow = false;
      scene.add(ambient);
      scene.add(dir);

      // Spotlight per evidenziare i soggetti
      var spot = new THREE.SpotLight(0xffffff, 1.1, 20, Math.PI / 6, 0.3, 1);
      spot.position.set(3, 4.5, 3);
      spot.castShadow = true;
      spot.shadow.mapSize.set(1024, 1024);
      spot.shadow.bias = -0.0001;
      scene.add(spot);
      scene.add(spot.target);

      // Gruppo soggetti (cubo + altri elementi)
      var contentGroup = new THREE.Group();
      scene.add(contentGroup);
      var geometry = new THREE.BoxGeometry(1, 1, 1);
      var material = new THREE.MeshStandardMaterial({ color: 0x1065ff, roughness: 0.45, metalness: 0.1 });
      var cube = new THREE.Mesh(geometry, material);
      cube.castShadow = true;
      contentGroup.add(cube);

      var sphere1 = new THREE.Mesh(
        new THREE.SphereGeometry(0.4, 24, 16),
        new THREE.MeshStandardMaterial({ color: 0x10b981, roughness: 0.5, metalness: 0.05 })
      );
      sphere1.position.set(-1.2, 0.3, 0.2);
      sphere1.castShadow = true;
      contentGroup.add(sphere1);

      var sphere2 = new THREE.Mesh(
        new THREE.SphereGeometry(0.3, 24, 16),
        new THREE.MeshStandardMaterial({ color: 0xff8a00, roughness: 0.6, metalness: 0.1 })
      );
      sphere2.position.set(1.1, -0.2, -0.4);
      sphere2.castShadow = true;
      contentGroup.add(sphere2);

      var torus = new THREE.Mesh(
        new THREE.TorusGeometry(0.5, 0.15, 16, 64),
        new THREE.MeshStandardMaterial({ color: 0x7c3aed, roughness: 0.55, metalness: 0.2 })
      );
      torus.position.set(0, 0.6, -0.8);
      torus.rotation.x = Math.PI / 4;
      torus.castShadow = true;
      contentGroup.add(torus);

      // Piano di appoggio che riceve ombre (non incluso nel bounding dei soggetti)
      var ground = new THREE.Mesh(
        new THREE.PlaneGeometry(8, 8),
        new THREE.MeshStandardMaterial({ color: 0xe5e7eb, roughness: 0.9, metalness: 0.0 })
      );
      ground.rotation.x = -Math.PI / 2;
      ground.position.y = -0.65;
      ground.receiveShadow = true;
      scene.add(ground);

      // Centra camera e controls sul gruppo soggetti
      var box3 = new THREE.Box3().setFromObject(contentGroup);
      var center = new THREE.Vector3();
      box3.getCenter(center);
      var size = new THREE.Vector3();
      box3.getSize(size);
      var maxSize = Math.max(size.x, size.y, size.z);
      var fitOffset = 1.35;
      var fov = camera.fov * (Math.PI / 180);
      var distance = (maxSize * fitOffset) / (2 * Math.tan(fov / 2));
      camera.position.copy(center.clone().add(new THREE.Vector3(distance, distance * 0.6, distance)));
      camera.lookAt(center);
      controls.setTarget(center);
      controls.setFromCamera();
      controls.update();
      spot.target.position.copy(center);

      var running = false;
      var speed = 0.8;
      var clock = new THREE.Clock();
      var autoRotate = false;
      var lightsDynamic = false;
      var lightPhase = 0;

      function resize() {
        var w = wrap.clientWidth;
        var h = wrap.clientHeight;
        renderer.setSize(w, h, false);
        camera.aspect = Math.max(0.1, w / Math.max(1, h));
        camera.updateProjectionMatrix();
      }
      window.addEventListener('resize', resize);
      resize();

      function loop() {
        // In modalitÃ  CV, renderizza un frame e ferma il loop
        if (window.cvModeActive) { renderer.render(scene, camera); return; }
        var dt = clock.getDelta();
        if (running) {
          cube.rotation.y += speed * dt;
          cube.rotation.x += 0.15 * dt;
        }
        if (autoRotate) { controls.step(0.6 * dt); }
        if (lightsDynamic) {
          lightPhase += dt * 0.8;
          var lx = center.x + Math.cos(lightPhase) * 3.0;
          var lz = center.z + Math.sin(lightPhase) * 2.0;
          dir.position.set(lx, 5, lz);
          spot.position.set(center.x + Math.cos(lightPhase + Math.PI/3) * 3.2, 4.5, center.z + Math.sin(lightPhase + Math.PI/3) * 3.2);
          ambient.intensity = 0.5 + 0.2 * Math.sin(lightPhase * 0.7);
          dir.intensity = 0.7 + 0.3 * Math.max(0, Math.cos(lightPhase));
          spot.intensity = 1.0 + 0.2 * Math.sin(lightPhase * 1.2);
        }
        controls.update();
        renderer.render(scene, camera);
        requestAnimationFrame(loop);
      }
      loop();
      // Espone una funzione per riprendere il loop dopo lâ€™uscita dalla modalitÃ  CV
      window.resumeThreeDemo = function(){ requestAnimationFrame(loop); };

      var startBtn = document.getElementById('threejs-start');
      var stopBtn = document.getElementById('threejs-stop');
      var spinBtn = document.getElementById('threejs-spin');
      var resetBtn = document.getElementById('threejs-reset');
      var autorotateBtn = document.getElementById('threejs-autorotate');
      var wireframeBtn = document.getElementById('threejs-wireframe');
      var solidBtn = document.getElementById('threejs-solid');
      var lightsBtn = document.getElementById('threejs-lights');
      if (startBtn) startBtn.addEventListener('click', function () { running = true; });
      if (stopBtn) stopBtn.addEventListener('click', function () { running = false; });
      if (spinBtn) spinBtn.addEventListener('click', function () { speed = Math.min(3.0, speed + 0.3); });
      if (resetBtn) resetBtn.addEventListener('click', function () {
        speed = 0.8;
        cube.rotation.set(0, 0, 0);
        // Riposiziona camera e target nuovamente centrati sui soggetti
        var boxR = new THREE.Box3().setFromObject(contentGroup);
        var centerR = new THREE.Vector3();
        var sizeR = new THREE.Vector3();
        boxR.getCenter(centerR);
        boxR.getSize(sizeR);
        var maxR = Math.max(sizeR.x, sizeR.y, sizeR.z);
        var distR = (maxR * fitOffset) / (2 * Math.tan(fov / 2));
        camera.position.copy(centerR.clone().add(new THREE.Vector3(distR, distR * 0.6, distR)));
        controls.setTarget(centerR);
        controls.setFromCamera();
        controls.update();
        autoRotate = false;
        autorotateBtn && autorotateBtn.classList.remove('bg-brand','text-white');
        setWireframe(false);
        wireframeBtn && wireframeBtn.classList.remove('bg-brand','text-white');
        lightsDynamic = false;
        lightsBtn && lightsBtn.classList.remove('bg-brand','text-white');
        ambient.intensity = 0.6;
        dir.intensity = 0.8;
        spot.intensity = 1.1;
      });

      function setWireframe(on) {
        var meshes = [cube, sphere1, sphere2, torus];
        meshes.forEach(function(m){ if (m && m.material) m.material.wireframe = !!on; });
      }
      if (autorotateBtn) autorotateBtn.addEventListener('click', function(){
        autoRotate = !autoRotate;
        autorotateBtn.classList.toggle('bg-brand', autoRotate);
        autorotateBtn.classList.toggle('text-white', autoRotate);
        autorotateBtn.classList.toggle('bg-gray-200', !autoRotate);
      });
      if (wireframeBtn) wireframeBtn.addEventListener('click', function(){
        var wf = !(cube.material && cube.material.wireframe);
        setWireframe(wf);
        wireframeBtn.classList.toggle('bg-brand', wf);
        wireframeBtn.classList.toggle('text-white', wf);
        wireframeBtn.classList.toggle('bg-gray-200', !wf);
      });
      if (solidBtn) solidBtn.addEventListener('click', function(){
        setWireframe(false);
        wireframeBtn && wireframeBtn.classList.remove('bg-brand','text-white');
        wireframeBtn && wireframeBtn.classList.add('bg-gray-200');
      });
      if (lightsBtn) lightsBtn.addEventListener('click', function(){
        lightsDynamic = !lightsDynamic;
        lightsBtn.classList.toggle('bg-brand', lightsDynamic);
        lightsBtn.classList.toggle('text-white', lightsDynamic);
        lightsBtn.classList.toggle('bg-gray-200', !lightsDynamic);
      });
    });
  </script>

  <!-- Libreria per generazione PDF client-side -->
  <script src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>

  <!-- Logica ModalitÃ  CV: toggle e stampa -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var btn = document.getElementById('cv-mode-btn');
      var btnMobile = document.getElementById('cv-mode-btn-mobile');
      var sheet = document.getElementById('cv-sheet');
      var printBtn = document.getElementById('cv-print-btn');
      var exitBtn = document.getElementById('cv-exit-btn');
      function updateCvButtonUI() {
        var active = document.documentElement.classList.contains('cv-mode');
        [btn, btnMobile].forEach(function(b){
          if (!b) return;
          var labelSpan = b.querySelector('span[data-i18n="cv_button_text"]');
          if (active) {
            if (labelSpan) labelSpan.textContent = 'Chiudi CV';
            b.setAttribute('aria-label', 'Disattiva modalitÃ  CV');
            b.setAttribute('aria-pressed', 'true');
          } else {
            if (labelSpan) labelSpan.textContent = 'ModalitÃ  CV (PDF)';
            b.setAttribute('aria-label', 'Attiva modalitÃ  CV');
            b.setAttribute('aria-pressed', 'false');
          }
        });
      }
      // Failsafe: se la pagina si apre giÃ  in cv-mode, assicura il foglio visibile
      if (document.documentElement.classList.contains('cv-mode') && sheet) {
        sheet.classList.remove('hidden');
      }
      updateCvButtonUI();
      function enterCvMode() {
        window.cvModeActive = true;
        document.documentElement.classList.add('cv-mode');
        if (sheet) {
          sheet.classList.remove('hidden');
          sheet.style.display = 'block';
          sheet.style.visibility = 'visible';
          sheet.setAttribute('aria-hidden', 'false');
        }
        // Disattiva transizioni/animazioni accessorie se necessario
        document.body.classList.add('print:overflow-visible');
        // Resetta lo scroll in alto e porta subito in vista il foglio
        try { window.scrollTo({ top: 0, behavior: 'auto' }); } catch(e) { window.scrollTo(0,0); }
        try { document.documentElement.scrollTop = 0; document.body.scrollTop = 0; } catch(e){}
        // Scorri allâ€™inizio del foglio (senza smooth per performance)
        sheet && sheet.scrollIntoView({ behavior: 'auto', block: 'start' });
        // Ferma loop animazioni background/demo
        try { window.pauseParticles && window.pauseParticles(); } catch(e){}
        updateCvButtonUI();
      }
      function exitCvMode() {
        window.cvModeActive = false;
        document.documentElement.classList.remove('cv-mode');
        if (sheet) {
          sheet.classList.add('hidden');
          sheet.style.display = '';
          sheet.style.visibility = '';
          sheet.setAttribute('aria-hidden', 'true');
        }
        // Riprendi loop animazioni background/demo
        try { window.resumeParticles && window.resumeParticles(); } catch(e){}
        try { window.resumeThreeLoop && window.resumeThreeLoop(); } catch(e){}
        try { window.resumeThreeDemo && window.resumeThreeDemo(); } catch(e){}
        updateCvButtonUI();
      }
      // Semplice anteprima di stampa in nuova finestra, senza cloni complessi
      function openSimplePrintPreview(sheetEl) {
        var win = window.open('', 'cv_print', 'width=900,height=1200');
        if (!win || !sheetEl) return;
        var headClone = document.head.cloneNode(true);
        // Rimuovi script per evitare effetti collaterali nella nuova finestra
        headClone.querySelectorAll('script').forEach(function(s){ try { s.parentNode && s.parentNode.removeChild(s); } catch(e){} });
        var baseHref = (document.baseURI || window.location.href);
        var printStyle = [
          '@page { size: A4; margin: 12mm; }',
          'html, body { background:#fff !important; color:#111 !important; }',
          '#cv-controls, #site-nav { display:none !important; }',
          '#cv-sheet { box-shadow:none !important; border-radius:0 !important; }'
        ].join('\n');
        var html = [
          '<!doctype html>',
          '<html lang="it">',
          '<head>',
          '<meta charset="utf-8"/>',
          '<base href="'+ baseHref +'"/>',
          '<title>Anteprima CV</title>',
          headClone.innerHTML,
          '<style>'+ printStyle +'</style>',
          '</head>',
          '<body>',
          sheetEl.outerHTML,
          '<script>window.addEventListener("load", function(){ setTimeout(function(){ window.print(); }, 300); });</scr'+'ipt>',
          '</body></html>'
        ].join('');
        win.document.open();
        win.document.write(html);
        win.document.close();
      }
      // Download diretto PDF usando l'anteprima sanificata
      function downloadPdfDirect(sheetEl) {
        var win = window.open('', 'cv_pdf', 'width=900,height=1200');
        if (!win || !sheetEl) return;
        var headClone = document.head.cloneNode(true);
        headClone.querySelectorAll('script').forEach(function(s){ try { s.parentNode && s.parentNode.removeChild(s); } catch(e){} });
        var baseHref = (document.baseURI || window.location.href);
        var printStyle = [
          '@page { size: A4; margin: 12mm; }',
          'html, body { background:#fff !important; color:#111 !important; }',
          '#cv-controls, #site-nav { display:none !important; }',
          '#cv-sheet { box-shadow:none !important; border-radius:0 !important; }'
        ].join('\n');
        // Forza crossorigin sulle immagini del contenuto clonando markup con attributo
        var contentHtml = (function(){
          var clone = sheetEl.cloneNode(true);
          clone.querySelectorAll('img').forEach(function(img){ try { img.setAttribute('crossorigin','anonymous'); } catch(e){} });
          return clone.outerHTML;
        })();
        var html = [
          '<!doctype html>',
          '<html lang="it">',
          '<head>',
          '<meta charset="utf-8"/>',
          '<base href="'+ baseHref +'"/>',
          '<title>Download CV PDF</title>',
          headClone.innerHTML,
          '<style>'+ printStyle +'</style>',
          // Librerie necessarie
          '<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></scr'+'ipt>',
          '<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></scr'+'ipt>',
          '</head>',
          '<body>',
          contentHtml,
          '<script>(function(){\n' +
          '  function generate(){\n' +
          '    var sheet = document.getElementById("cv-sheet");\n' +
          '    if(!sheet){ window.close(); return; }\n' +
          '    try {\n' +
          '      sheet.style.background = "#ffffff"; sheet.style.color = "#111"; sheet.style.transform = "none"; sheet.style.filter = "none";\n' +
          '      var opt = { scale: 2, useCORS: true, allowTaint: false, scrollY: 0, backgroundColor: "#ffffff", logging: false };\n' +
          '      Promise.resolve().then(function(){ return (document.fonts && document.fonts.ready) ? document.fonts.ready : undefined; }).then(function(){\n' +
          '        var imgs = Array.from(sheet.querySelectorAll("img"));\n' +
          '        return Promise.all(imgs.map(function(img){ return new Promise(function(res){ if(img.complete) return res(); var done=function(){ img.onload=null; img.onerror=null; res(); }; img.onload=done; img.onerror=done; }); }));\n' +
          '      }).then(function(){\n' +
          '        var rect = sheet.getBoundingClientRect();\n' +
          '        var w = Math.max(sheet.scrollWidth, sheet.offsetWidth, Math.floor(rect.width));\n' +
          '        var h = Math.max(sheet.scrollHeight, sheet.offsetHeight, Math.floor(rect.height));\n' +
          '        var h2cOpts = Object.assign({}, opt, { width: w, height: h, windowWidth: w, windowHeight: h });\n' +
          '        if (w===0 || h===0) throw new Error("Dimensioni nulle");\n' +
          '        return html2canvas(sheet, h2cOpts);\n' +
          '      }).then(function(canvas){\n' +
          '        var jsPDFCtor = (window.jspdf && window.jspdf.jsPDF) ? window.jspdf.jsPDF : (window.jsPDF||null);\n' +
          '        if(!jsPDFCtor) throw new Error("jsPDF non disponibile");\n' +
          '        var pdf = new jsPDFCtor({ unit: "mm", format: "a4", orientation: "portrait" });\n' +
          '        var pageWidth = 210, pageHeight = 297;\n' +
          '        var pxPerMm = canvas.width / pageWidth;\n' +
          '        var pageHeightPx = Math.floor(pxPerMm * pageHeight);\n' +
          '        var y = 0, pageIndex = 0;\n' +
          '        while (y < canvas.height) {\n' +
          '          var sliceHeightPx = Math.min(pageHeightPx, canvas.height - y);\n' +
          '          var sliceCanvas = document.createElement("canvas");\n' +
          '          sliceCanvas.width = canvas.width; sliceCanvas.height = sliceHeightPx;\n' +
          '          var ctx = sliceCanvas.getContext("2d");\n' +
          '          ctx.drawImage(canvas, 0, y, canvas.width, sliceHeightPx, 0, 0, canvas.width, sliceHeightPx);\n' +
          '          var imgData = sliceCanvas.toDataURL("image/jpeg", 0.95);\n' +
          '          var sliceHeightMm = sliceHeightPx / pxPerMm;\n' +
          '          if (pageIndex > 0) pdf.addPage("a4", "portrait");\n' +
          '          pdf.addImage(imgData, "JPEG", 0, 0, pageWidth, sliceHeightMm);\n' +
          '          y += sliceHeightPx; pageIndex += 1;\n' +
          '        }\n' +
          '        pdf.save("Mauro-Arnone-CV.pdf");\n' +
          '        setTimeout(function(){ window.close(); }, 500);\n' +
          '      }).catch(function(err){ console.error("Errore download PDF:", err); try { window.print(); } catch(e){} setTimeout(function(){ window.close(); }, 500); });\n' +
          '    } catch(e){ console.error(e); try { window.print(); } catch(_){} setTimeout(function(){ window.close(); }, 500); }\n' +
          '  }\n' +
          '  window.addEventListener("load", function(){ setTimeout(generate, 200); });\n' +
          '})();</scr'+'ipt>',
          '</body></html>'
        ].join('');
        win.document.open();
        win.document.write(html);
        win.document.close();
      }
      if (btn) btn.addEventListener('click', function(){
        if (document.documentElement.classList.contains('cv-mode')) {
          exitCvMode();
        } else {
          enterCvMode();
        }
      });
      if (btnMobile) btnMobile.addEventListener('click', function(){
        if (document.documentElement.classList.contains('cv-mode')) {
          exitCvMode();
        } else {
          enterCvMode();
        }
      });
      if (printBtn) printBtn.addEventListener('click', function(){
        if (!sheet) return;
        // Percorso semplice: apri anteprima di stampa in nuova finestra e interrompi
        try { openSimplePrintPreview(sheet); return; } catch(e) { console.error('Anteprima stampa semplice fallita:', e); }
        var wasCvActive = document.documentElement.classList.contains('cv-mode');
        // Crea un clone del foglio CV come figlio diretto del body per cattura piÃ¹ robusta
        var clone = sheet.cloneNode(true);
        clone.id = 'cv-sheet-pdf';
        // Rendi visibile il clone anche se l'originale Ã¨ nascosto
        clone.classList.remove('hidden');
        clone.style.display = 'block';
        clone.style.visibility = 'visible';
        // Posiziona fuori schermo ma mantenendo dimensioni reali
        clone.style.position = 'fixed';
        clone.style.left = '-10000px';
        clone.style.top = '0';
        clone.style.zIndex = '9999';
        // Dimensioni stabilizzate (A4 a 96dpi ~ 794x1123px)
        clone.style.width = '794px';
        clone.style.minHeight = '1123px';
        try {
          clone.style.setProperty('width', '794px', 'important');
          clone.style.setProperty('min-height', '1123px', 'important');
        } catch(e){}
        clone.style.margin = '32px auto';
        clone.style.boxShadow = 'none';
        clone.style.borderRadius = '0';
        // Rimuovi classi che possono nascondere o trasformare elementi (Tailwind/effect)
        (function(){
          var shouldRemove = function(cls){
            return (
              cls === 'hidden' || cls === 'invisible' || cls === 'opacity-0' ||
              /^opacity-/.test(cls) || /^translate-/.test(cls) || /^scale-/.test(cls) || /^blur-/.test(cls) ||
              /^brightness-/.test(cls) || /^contrast-/.test(cls) || /^saturate-/.test(cls) || /^hue-rotate-/.test(cls) ||
              /^dark:/.test(cls)
            );
          };
          var cleanEl = function(el){
            if (!el || !el.classList) return;
            Array.from(el.classList).forEach(function(cls){ if (shouldRemove(cls)) { try { el.classList.remove(cls); } catch(e){} } });
          };
          cleanEl(clone);
          clone.querySelectorAll('*').forEach(cleanEl);
        })();
        // Assicura che controlli e istruzioni non compaiano nel clone
        var cloneControls = clone.querySelector('#cv-controls');
        if (cloneControls) cloneControls.style.display = 'none';
        // Forza crossOrigin anonimo sulle immagini del clone (aiuta CORS)
        clone.querySelectorAll('img').forEach(function(img){
          try { img.setAttribute('crossorigin', 'anonymous'); } catch(e){}
        });
        document.body.appendChild(clone);
        // Inietta stile forte per garantire testo visibile e rimuovere effetti
        var forceStyle = document.createElement('style');
        forceStyle.id = 'pdf-force-style';
        forceStyle.textContent = [
          '#cv-sheet-pdf, #cv-sheet-pdf * {',
          '  color: #111 !important;',
          '  -webkit-text-fill-color: #111 !important;',
          '  background: transparent !important;',
          '  filter: none !important;',
          '  transform: none !important;',
          '  mix-blend-mode: normal !important;',
          '  text-shadow: none !important;',
          '  box-shadow: none !important;',
          '}',
          '#cv-sheet-pdf { background: #ffffff !important; }'
        ].join('\n');
        try { document.head.appendChild(forceStyle); } catch(e){}
        // Imposta modalitÃ  PDF per layout/esclusioni sul clone;
        // rimuove temporaneamente cv-mode per evitare conflitti di visibilitÃ 
        document.documentElement.classList.remove('cv-mode');
        document.documentElement.classList.add('pdf-mode');
        // Opzioni PDF A4
        var opt = {
          margin:       [0, 0, 0, 0],
          filename:     'Mauro-Arnone-CV.pdf',
          image:        { type: 'jpeg', quality: 0.95 },
          html2canvas:  { scale: 2, useCORS: true, allowTaint: false, scrollY: 0, backgroundColor: '#ffffff', logging: false },
          jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' }
        };
        try {
          // Cattura manuale con html2canvas + jsPDF per massima affidabilitÃ 
          setTimeout(function(){
            try {
              // Forza bg e testo scuro direttamente sul clone e stabilizza layout
              clone.style.background = '#ffffff';
              clone.style.color = '#111111';
              clone.style.transform = 'none';
              clone.style.filter = 'none';
              // Debug dimensioni clone
              console.log('PDF clone initial dims:', { offsetW: clone.offsetWidth, offsetH: clone.offsetHeight });
              (async function(){
                try {
                  if (document.fonts && document.fonts.ready) {
                    try { await document.fonts.ready; } catch(e){}
                  }
                  // Attendi il caricamento delle immagini nel clone
                  try {
                    var imgs = Array.from(clone.querySelectorAll('img'));
                    await Promise.all(imgs.map(function(img){
                      return new Promise(function(res){
                        if (img.complete) return res();
                        var done = function(){ try { img.onload = null; img.onerror = null; } catch(e){}; res(); };
                        img.onload = done; img.onerror = done;
                      });
                    }));
                  } catch(e){}
                  var rect = clone.getBoundingClientRect();
                  console.log('PDF clone settled dims:', { offsetW: clone.offsetWidth, offsetH: clone.offsetHeight, rectW: rect.width, rectH: rect.height });
                  await new Promise(function(res){ requestAnimationFrame(function(){ requestAnimationFrame(res); }); });
                  var w = Math.max(clone.scrollWidth, clone.offsetWidth, Math.floor(rect.width));
                  var h = Math.max(clone.scrollHeight, clone.offsetHeight, Math.floor(rect.height));
                  var h2cOpts = Object.assign({}, opt.html2canvas, { width: w, height: h, windowWidth: w, windowHeight: h });
                  if (w === 0 || h === 0) {
                    throw new Error('Clone ha dimensioni nulle: w=' + w + ' h=' + h);
                  }
                  var canvas = await html2canvas(clone, h2cOpts);
                  console.log('Canvas dims:', { w: canvas.width, h: canvas.height });
                  var jsPDFCtor = (window.jspdf && window.jspdf.jsPDF) ? window.jspdf.jsPDF : (window.jsPDF || null);
                  if (!jsPDFCtor) { throw new Error('jsPDF non disponibile'); }
                  var pdf = new jsPDFCtor({ unit: 'mm', format: 'a4', orientation: 'portrait' });
                  var pageWidth = 210; // mm
                  var pageHeight = 297; // mm
                  var pxPerMm = canvas.width / pageWidth; // px per mm
                  var pageHeightPx = Math.floor(pxPerMm * pageHeight);
                  var y = 0;
                  var pageIndex = 0;
                  while (y < canvas.height) {
                    var sliceHeightPx = Math.min(pageHeightPx, canvas.height - y);
                    var sliceCanvas = document.createElement('canvas');
                    sliceCanvas.width = canvas.width;
                    sliceCanvas.height = sliceHeightPx;
                    var sliceCtx = sliceCanvas.getContext('2d');
                    sliceCtx.drawImage(canvas, 0, y, canvas.width, sliceHeightPx, 0, 0, canvas.width, sliceHeightPx);
                    var imgData = sliceCanvas.toDataURL('image/jpeg', 0.95);
                    var sliceHeightMm = sliceHeightPx / pxPerMm;
                    if (pageIndex > 0) pdf.addPage('a4', 'portrait');
                    pdf.addImage(imgData, 'JPEG', 0, 0, pageWidth, sliceHeightMm);
                    y += sliceHeightPx;
                    pageIndex += 1;
                  }
                  pdf.save(opt.filename);
                } catch(err) {
                  console.error('Errore cattura canvas per PDF (uso fallback dom-to-image):', err);
                  if (window.domtoimage) {
                    try {
                      var dataUrl = await window.domtoimage.toPng(clone, { cacheBust: true, imagePlaceholder: '#fff', bgcolor: '#ffffff' });
                      var jsPDFCtor2 = (window.jspdf && window.jspdf.jsPDF) ? window.jspdf.jsPDF : (window.jsPDF || null);
                      if (!jsPDFCtor2) { throw new Error('jsPDF non disponibile'); }
                      var img = new Image();
                      img.src = dataUrl;
                      await new Promise(function(res){ img.onload = res; });
                      var pageWidth2 = 210;
                      var pageHeight2 = 297;
                      var pxPerMm2 = img.width / pageWidth2;
                      var pageHeightPx2 = Math.floor(pxPerMm2 * pageHeight2);
                      var pdf2 = new jsPDFCtor2({ unit: 'mm', format: 'a4', orientation: 'portrait' });
                      var canvasTmp = document.createElement('canvas');
                      var ctxTmp = canvasTmp.getContext('2d');
                      var y2 = 0, pageIndex2 = 0;
                      while (y2 < img.height) {
                        var sliceHeightPx2 = Math.min(pageHeightPx2, img.height - y2);
                        canvasTmp.width = img.width;
                        canvasTmp.height = sliceHeightPx2;
                        ctxTmp.clearRect(0,0,canvasTmp.width,canvasTmp.height);
                        ctxTmp.drawImage(img, 0, y2, img.width, sliceHeightPx2, 0, 0, img.width, sliceHeightPx2);
                        var imgData2 = canvasTmp.toDataURL('image/jpeg', 0.95);
                        var sliceHeightMm2 = sliceHeightPx2 / pxPerMm2;
                        if (pageIndex2 > 0) pdf2.addPage('a4', 'portrait');
                        pdf2.addImage(imgData2, 'JPEG', 0, 0, pageWidth2, sliceHeightMm2);
                        y2 += sliceHeightPx2;
                        pageIndex2 += 1;
                      }
                      pdf2.save(opt.filename);
                    } catch(e2) {
                      console.error('Fallback dom-to-image fallito:', e2);
                    }
                  }
                } finally {
                  document.documentElement.classList.remove('pdf-mode');
                  if (wasCvActive) { document.documentElement.classList.add('cv-mode'); }
                  try { document.body.removeChild(clone); } catch(e){}
                  try { var s = document.getElementById('pdf-force-style'); if (s) s.remove(); } catch(e){}
                }
              })();
            } catch(err) {
              console.error('Errore generazione PDF:', err);
              document.documentElement.classList.remove('pdf-mode');
              if (wasCvActive) { document.documentElement.classList.add('cv-mode'); }
              try { document.body.removeChild(clone); } catch(e){}
            }
          }, 120);
        } catch (e) {
          window.print();
        }
      });
      var downloadBtn = document.getElementById('cv-download-btn');
      if (downloadBtn) downloadBtn.addEventListener('click', function(){
        if (!sheet) return;
        try { downloadPdfDirect(sheet); } catch(e) { console.error('Download PDF diretto fallito:', e); }
      });
      if (exitBtn) exitBtn.addEventListener('click', exitCvMode);
    });
  </script>

</body>
</html>
